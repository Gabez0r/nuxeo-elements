{"version":3,"file":"main.91c54d399146f1df6650.bundle.js","sources":["webpack:///../ui/widgets/nuxeo-tooltip.js","webpack:///../ui/nuxeo-filters-behavior.js","webpack:///../core/nuxeo-element.js","webpack:///../ui/nuxeo-icons.js","webpack:///../ui/actions/nuxeo-action-button-styles.js","webpack:///../core/nuxeo-connection.js","webpack:///../core/nuxeo-resource.js","webpack:///../core/nuxeo-page-provider.js","webpack:///../core/nuxeo-operation.js","webpack:///../ui/widgets/nuxeo-selectivity.js","webpack:///../ui/nuxeo-i18n-behavior.js","webpack:///../ui/actions/nuxeo-favorites-toggle-button.js","webpack:///../ui/widgets/nuxeo-actions-menu.js","webpack:///../ui/widgets/nuxeo-card.js","webpack:///../ui/widgets/nuxeo-checkmark.js","webpack:///../ui/widgets/nuxeo-date-picker.js","webpack:///../ui/widgets/nuxeo-dialog.js","webpack:///../ui/widgets/nuxeo-textarea.js","webpack:///../ui/actions/nuxeo-add-to-collection-button.js","webpack:///../ui/widgets/nuxeo-input.js","webpack:///../ui/actions/nuxeo-link-button.js"],"sourcesContent":["/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport '@nuxeo/nuxeo-elements/nuxeo-element.js';\nimport '@polymer/paper-tooltip/paper-tooltip.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { dom } from '@polymer/polymer/lib/legacy/polymer.dom.js';\n\n{\n  /**\n   * Example:\n   *\n   *     <div>\n   *       <span>Hover me!</span>\n   *       <nuxeo-tooltip>Tooltip text</nuxeo-tooltip>\n   *     </div>\n   *\n   *     <div>\n   *       <span id=\"btn\">Hover me!</span>\n   *       <nuxeo-tooltip for=\"btn\">Tooltip text</nuxeo-tooltip>\n   *     </div>\n   *\n   * @memberof Nuxeo\n   * @demo demo/nuxeo-tooltip/index.html\n   */\n  class Tooltip extends Nuxeo.Element {\n    static get template() {\n      return html`\n        <style>\n          :host {\n            display: none;\n          }\n        </style>\n\n        <slot id=\"content\"></slot>\n      `;\n    }\n\n    static get is() {\n      return 'nuxeo-tooltip';\n    }\n\n    static get properties() {\n      return {\n        for: String,\n\n        position: {\n          type: String,\n          value: 'bottom',\n        },\n\n        offset: {\n          type: Number,\n          value: 14,\n        },\n\n        animationDelay: {\n          type: Number,\n          value: 500,\n        },\n      };\n    }\n\n    constructor() {\n      super();\n      // since we are adding/removing listeners on the parent and not the tooltip itself\n      // (and therefore we need to `bind(this)`), we must keep references to the listener to make sure the same\n      // reference is used in addEventListener and removeEventListener (and prevent potential memory leaks)\n      this._showListener = this.show.bind(this);\n      this._hideListener = this.hide.bind(this);\n    }\n\n    connectedCallback() {\n      super.connectedCallback();\n      this._target = this.target;\n      if (this._target) {\n        this._target.addEventListener('mouseenter', this._showListener);\n        this._target.addEventListener('focus', this._showListener);\n        this._target.addEventListener('mouseleave', this._hideListener);\n        this._target.addEventListener('blur', this._hideListener);\n        this._target.addEventListener('tap', this._hideListener);\n      }\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      if (this._target) {\n        this._target.removeEventListener('mouseenter', this._showListener);\n        this._target.removeEventListener('focus', this._showListener);\n        this._target.removeEventListener('mouseleave', this._hideListener);\n        this._target.removeEventListener('blur', this._hideListener);\n        this._target.removeEventListener('tap', this._hideListener);\n      }\n      this._target = null;\n    }\n\n    show() {\n      if (!this._tooltip) {\n        // create a paper tooltip and append to body\n        this._tooltip = document.createElement('paper-tooltip');\n        document.body.appendChild(this._tooltip);\n        // clone content in <slot> and append to paper-tooltip body\n        this.$.content.assignedNodes().forEach((node) => {\n          this._tooltip.appendChild(node.cloneNode(true));\n        });\n        // set manual mode to avoid setting extra listeners in paper-tooltip\n        this._tooltip.manualMode = true;\n        // configure tooltip properties and show\n        this._tooltip._target = this._target;\n        this._tooltip.animationDelay = this.animationDelay;\n        this._tooltip.offset = this.offset;\n        this._tooltip.position = this.position;\n        this._tooltip.fitToVisibleBounds = true;\n        this._tooltip.show();\n      }\n    }\n\n    hide() {\n      if (this._tooltip) {\n        document.body.removeChild(this._tooltip);\n        this._tooltip = null;\n      }\n    }\n\n    /**\n     * Gets the anchor element specified in the `for` attribute, or, if that doesn't exist, the parent node containing\n     * the tooltip.\n     *\n     * Code adapted from paper-tooltip.\n     */\n    get target() {\n      const { parentNode } = dom(this);\n      // If the parentNode is a document fragment, then we need to use the host.\n      const ownerRoot = dom(this).getOwnerRoot();\n      let target;\n      if (this.for) {\n        target = dom(ownerRoot).querySelector(`#${this.for}`);\n      } else {\n        target = parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? ownerRoot.host : parentNode;\n      }\n      return target;\n    }\n  }\n\n  customElements.define(Tooltip.is, Tooltip);\n  Nuxeo.Tooltip = Tooltip;\n}\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\n/**\n * `Nuxeo.FilterBehavior` provides a set of helpers to use in filter expressions.\n *\n * @polymerBehavior\n */\nexport const FiltersBehavior = {\n  /**\n   * Checks if the document is a favorite.\n   */\n  isFavorite(doc) {\n    return (\n      doc && doc.contextParameters && doc.contextParameters.favorites && doc.contextParameters.favorites.isFavorite\n    );\n  },\n\n  /**\n   * Checks if the current user is subscribed to document notifications.\n   */\n  isSubscribed(doc) {\n    return (\n      doc &&\n      doc.contextParameters &&\n      doc.contextParameters.subscribedNotifications &&\n      doc.contextParameters.subscribedNotifications.length > 0\n    );\n  },\n\n  /**\n   * Checks if the document can be added to a collection.\n   */\n  isCollectionMember(doc) {\n    return doc && doc.facets ? doc.facets.indexOf('NotCollectionMember') === -1 : false;\n  },\n\n  /**\n   * Checks if the document is trashed.\n   */\n  isTrashed(doc) {\n    if (doc) {\n      if (typeof doc.isTrashed === 'undefined') {\n        return this.hasState(doc, 'deleted');\n      }\n      return doc.isTrashed;\n    }\n    return false;\n  },\n\n  /**\n   * Checks if the document is a version.\n   */\n  isVersion(doc) {\n    return doc && doc.isVersion;\n  },\n\n  /**\n   * Checks if the document is immutable.\n   */\n  isImmutable(doc) {\n    return this.hasFacet(doc, 'Immutable');\n  },\n\n  /**\n   * Checks the document's type.\n   */\n  hasType(doc, type) {\n    return doc && doc.type === type;\n  },\n\n  /**\n   * Checks if the document is a proxy.\n   */\n  isProxy(doc) {\n    return doc && doc.isProxy;\n  },\n\n  /**\n   * Checks if the document's path matches the given string regexp.\n   */\n  pathMatches(doc, regex) {\n    return doc && doc.path && new RegExp(regex).test(doc.path);\n  },\n\n  /**\n   * Checks if the document's path starts with the given path.\n   */\n  pathStartsWith(doc, path) {\n    return this.pathMatches(doc, `^${path}`);\n  },\n\n  /**\n   * Checks the document's life cycle state..\n   */\n  hasState(doc, state) {\n    return doc && doc.state === state;\n  },\n\n  /**\n   * Checks if the document has the given facet.\n   */\n  hasFacet(doc, facet) {\n    return doc && doc.facets && doc.facets.indexOf(facet) !== -1;\n  },\n\n  /**\n   * Checks if the document has the given permission.\n   */\n  hasPermission(doc, permission) {\n    return (\n      doc &&\n      doc.contextParameters &&\n      doc.contextParameters.permissions &&\n      doc.contextParameters.permissions.indexOf(permission) !== -1\n    );\n  },\n\n  /**\n   * Checks if the document has a main blob.\n   */\n  hasContent(doc, xpath) {\n    return doc && doc.properties ? this.get(xpath || 'file:content', doc.properties) : false;\n  },\n\n  /**\n   * Checks if the document has attachments.\n   */\n  hasAttachments(doc) {\n    return doc && doc.properties && doc.properties['files:files'] && doc.properties['files:files'].length > 0;\n  },\n\n  /**\n   * Checks if the document has attachments.\n   */\n  hasVersions(doc) {\n    return doc && (doc.properties['uid:major_version'] > 0 || doc.properties['uid:minor_version'] > 0);\n  },\n\n  /**\n   * Checks if the document belongs to a collection.\n   */\n  hasCollections(doc) {\n    return (\n      doc && doc.contextParameters && doc.contextParameters.collections && doc.contextParameters.collections.length > 0\n    );\n  },\n\n  /**\n   * Checks if given user is member of the group.\n   */\n  isMember(user, group) {\n    return user && user.extendedGroups && user.extendedGroups.find((grp) => grp.name === group);\n  },\n\n  /**\n   * Checks if the document can be published.\n   */\n  isPublishable(doc) {\n    return (\n      doc &&\n      !this.isProxy(doc) &&\n      !this.isTrashed(doc) &&\n      this.hasFacet(doc, 'Publishable') &&\n      this.hasPermission(doc, 'Write')\n    );\n  },\n\n  /**\n   * Checks if the document is a publication.\n   */\n  isPublication(doc) {\n    return doc && this.isProxy(doc) && this.hasFacet(doc, 'Immutable');\n  },\n\n  /**\n   * Checks if the document can be tagged.\n   */\n  isTaggable(doc) {\n    return !this.isProxy(doc) && !doc.isVersion && this.hasPermission(doc, 'Write');\n  },\n};\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n/**\n * Nuxeo namespace\n */\nwindow.Nuxeo = window.Nuxeo || {};\n\n/**\n * @memberof Nuxeo\n */\nNuxeo.Element = class Element extends PolymerElement {};\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport '@polymer/iron-iconset-svg/iron-iconset-svg.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\n\nNuxeo icons\n\nExample:\n\n    <link rel=\"import\" href=\"nuxeo-icons.html\">\n\n@memberof Nuxeo\n@pseudoElement nuxeo-icons\n@demo demo/nuxeo-icons/index.html\n*/\nconst template = html`\n  <iron-iconset-svg size=\"24\" name=\"nuxeo\">\n    <svg>\n      <defs>\n        <g id=\"add\">\n          <path\n            d=\"M10,0c-5.514,0 -10,4.486 -10,10c0,5.514 4.486,10 10,10c5.514,0 10,-4.486 10,-10c0,-5.514 -4.486,-10 -10,-10Zm0,18c-4.411,0 -8,-3.589 -8,-8c0,-4.411 3.589,-8 8,-8c4.411,-4.44089e-16 8,3.589 8,8c0,4.411 -3.589,8 -8,8Z\"\n            transform=\"translate(2, 2.001)\"\n          ></path>\n          <path d=\"M6,0h-2v4h-4v2h4v4h2v-4h4v-2h-4Z\" transform=\"translate(7, 7.001)\"></path>\n        </g>\n\n        <g id=\"add-bold\">\n          <path\n            d=\"M10,20c-5.514,0 -10,-4.486 -10,-10c0,-5.514 4.486,-10 10,-10c5.514,0 10,4.486 10,10c0,5.514 -4.486,10 -10,10Zm0,-18c-4.411,8.88178e-16 -8,3.589 -8,8c0,4.411 3.589,8 8,8c4.411,0 8,-3.589 8,-8c0,-4.411 -3.589,-8 -8,-8Z\"\n            transform=\"translate(2, 2.002)\"\n          ></path>\n          <path d=\"M10,3h-3v-3h-4v3h-3v4h3v3h4v-3h3Z\" transform=\"translate(7, 7.002)\"></path>\n        </g>\n\n        <g id=\"admin\" fill-rule=\"evenodd\">\n          <path\n            fill-rule=\"nonzero\"\n            d=\"M18.001,16.185 L18.001,13 L11.001,13 L11.001,11 L15.293,11 L14.968,9.749 C14.501,7.945 13.085,6.603 11.347,6.166 C12.323,5.67 13,4.668 13,3.5 C13,1.846 11.654,0.5 10,0.5 C8.346,0.5 7,1.846 7,3.5 C7,4.668 7.677,5.67 8.653,6.166 C6.916,6.603 5.5,7.945 5.033,9.749 L4.708,11 L9,11 L9,13 L2,13 L2,16.185 C0.838,16.599 0,17.699 0,19 C0,20.654 1.346,22 3,22 C4.654,22 6,20.654 6,19 C6,17.698 5.162,16.599 4,16.185 L4,15 L9,15 L9,16.185 C7.838,16.599 7,17.699 7,19 C7,20.654 8.346,22 10,22 C11.654,22 13,20.654 13,19 C13,17.698 12.162,16.599 11,16.185 L11,15 L16,15 L16,16.185 C14.838,16.599 14,17.699 14,19 C14,20.654 15.346,22 17,22 C18.654,22 20,20.654 20,19 C20.001,17.698 19.163,16.599 18.001,16.185 Z M10.001,2.5 C10.552,2.5 11.001,2.949 11.001,3.5 C11.001,4.051 10.552,4.5 10.001,4.5 C9.45,4.5 9.001,4.051 9.001,3.5 C9.001,2.949 9.45,2.5 10.001,2.5 Z M9.859,8 L10.142,8 C11.012,8 11.811,8.379 12.365,9 L7.637,9 C8.19,8.379 8.99,8 9.859,8 Z M3.001,20 C2.45,20 2.001,19.551 2.001,19 C2.001,18.449 2.45,18 3.001,18 C3.552,18 4.001,18.449 4.001,19 C4.001,19.551 3.552,20 3.001,20 Z M10.001,20 C9.45,20 9.001,19.551 9.001,19 C9.001,18.449 9.45,18 10.001,18 C10.552,18 11.001,18.449 11.001,19 C11.001,19.551 10.552,20 10.001,20 Z M17.001,20 C16.45,20 16.001,19.551 16.001,19 C16.001,18.449 16.45,18 17.001,18 C17.552,18 18.001,18.449 18.001,19 C18.001,19.551 17.552,20 17.001,20 Z\"\n            transform=\"translate(2)\"\n          ></path>\n        </g>\n\n        <g id=\"asset\">\n          <path\n            d=\"M10,20c-5.514,0 -10,-4.486 -10,-10c0,-5.514 4.486,-10 10,-10c5.514,0 10,4.486 10,10c0,5.514 -4.486,10 -10,10Zm0,-18c-4.411,0 -8,3.589 -8,8c0,4.411 3.589,8 8,8c4.411,0 8,-3.589 8,-8c0,-4.411 -3.589,-8 -8,-8Z\"\n            transform=\"translate(2, 2)\"\n          ></path>\n          <path\n            d=\"M4,8c-2.206,0 -4,-1.795 -4,-4c0,-2.205 1.794,-4 4,-4c2.206,0 4,1.795 4,4c0,2.205 -1.794,4 -4,4Zm0,-6c-1.103,0 -2,0.896 -2,2c0,1.103 0.897,2 2,2c1.103,0 2,-0.897 2,-2c0,-1.104 -0.897,-2 -2,-2Z\"\n            transform=\"translate(8, 8)\"\n          ></path>\n        </g>\n\n        <g id=\"asset-metadata\">\n          <path\n            d=\"M4,8c-2.205,0 -4,-1.794 -4,-4c0,-2.206 1.795,-4 4,-4c2.205,0 4,1.794 4,4c0,2.206 -1.795,4 -4,4Zm0,-6c-1.104,0 -2,0.898 -2,2c0,1.103 0.896,2 2,2c1.104,0 2,-0.897 2,-2c0,-1.102 -0.896,-2 -2,-2Z\"\n            transform=\"translate(8, 8.001)\"\n          ></path>\n          <path\n            d=\"M11.165,22.088l-0.209,-1.989l0.995,-0.105c0.625,-0.066 1.243,-0.197 1.838,-0.391l0.951,-0.309l0.619,1.901l-0.951,0.31c-0.728,0.237 -1.484,0.397 -2.248,0.478l-0.995,0.105Zm-2.601,-0.268l-0.951,-0.308c-0.729,-0.236 -1.436,-0.55 -2.102,-0.934l-0.867,-0.499l0.998,-1.733l0.867,0.499c0.545,0.314 1.123,0.571 1.719,0.764l0.951,0.307l-0.615,1.904Zm9.058,-1.936l-1.339,-1.486l0.742,-0.669c0.467,-0.42 0.891,-0.891 1.26,-1.398l0.588,-0.81l1.617,1.177l-0.588,0.809c-0.451,0.62 -0.969,1.194 -1.537,1.708l-0.743,0.669Zm-14.921,-1.551l-0.59,-0.808c-0.453,-0.621 -0.842,-1.29 -1.154,-1.988l-0.409,-0.912l1.825,-0.818l0.408,0.914c0.256,0.571 0.574,1.118 0.945,1.625l0.59,0.807l-1.615,1.18Zm18.855,-4.026l-1.957,-0.414l0.206,-0.978c0.13,-0.611 0.195,-1.242 0.195,-1.872v-1l2,-0.041v1.012c0,0.798 -0.08,1.566 -0.238,2.314l-0.206,0.979Zm-21.556,-2.243v-1.001c0,-0.78 0.078,-1.541 0.232,-2.282l0.206,-0.979l1.957,0.409l-0.203,0.979c-0.128,0.606 -0.192,1.23 -0.192,1.853v1l-2,0.021Zm19.621,-3.802l-0.411,-0.911c-0.257,-0.57 -0.575,-1.116 -0.947,-1.624l-0.591,-0.807l1.613,-1.183l0.591,0.807c0.454,0.62 0.845,1.289 1.158,1.985l0.41,0.912l-1.823,0.821Zm-16.504,-1.68l-1.619,-1.173l0.586,-0.81c0.45,-0.621 0.967,-1.196 1.534,-1.71l0.741,-0.671l1.343,1.483l-0.741,0.67c-0.465,0.421 -0.889,0.893 -1.256,1.401l-0.588,0.81Zm13.223,-2.852l-0.867,-0.498c-0.543,-0.313 -1.121,-0.567 -1.719,-0.76l-0.952,-0.306l0.611,-1.904l0.952,0.306c0.73,0.235 1.438,0.548 2.104,0.93l0.867,0.498l-0.996,1.734Zm-9.097,-0.929l-0.623,-1.9l0.95,-0.312c0.728,-0.239 1.484,-0.401 2.248,-0.483l0.994,-0.106l0.213,1.989l-0.994,0.107c-0.625,0.067 -1.244,0.199 -1.838,0.394l-0.95,0.311Z\"\n            transform=\"translate(1, 0.958)\"\n          ></path>\n        </g>\n\n        <g id=\"asset-versions\">\n          <path\n            d=\"M3.642,4.642c1.678,-1.688 3.932,-2.642 6.358,-2.642c4.963,0 9,4.038 9,9h2c0,-6.065 -4.935,-11 -11,-11c-2.966,0 -5.72,1.167 -7.771,3.229l-2.229,-2.229v6h6l-2.358,-2.358Z\"\n            transform=\"translate(2, 1)\"\n          ></path>\n          <path\n            d=\"M17.357,6.358c-1.677,1.688 -3.93,2.642 -6.357,2.642c-4.963,0 -9,-4.038 -9,-9h-2c0,6.065 4.935,11 11,11c2.967,0 5.721,-1.167 7.771,-3.229l2.229,2.229v-6h-6l2.357,2.358Z\"\n            transform=\"translate(1, 12)\"\n          ></path>\n          <path\n            d=\"M0,4c0,2.206 1.795,4 4,4c2.205,0 4,-1.794 4,-4c0,-2.206 -1.795,-4 -4,-4c-2.205,0 -4,1.794 -4,4Zm6,0c0,1.103 -0.896,2 -2,2c-1.104,0 -2,-0.897 -2,-2c0,-1.103 0.896,-2 2,-2c1.104,0 2,0.897 2,2Z\"\n            transform=\"translate(8, 8)\"\n          ></path>\n        </g>\n\n        <g id=\"attachment\">\n          <path\n            d=\"M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5z\"\n          ></path>\n        </g>\n\n        <g id=\"browse\">\n          <path\n            d=\"M18.998,13h-2v-1c0,-1.654 -1.345,-3 -2.998,-3h-3v-2h2c0.553,0 1,-0.447 1,-1v-5c0,-0.553 -0.447,-1 -1,-1h-6c-0.553,0 -1,0.447 -1,1v5c0,0.553 0.447,1 1,1h2v2h-3c-1.654,0 -3,1.346 -3,3v1h-2c-0.553,0 -1,0.447 -1,1v5c0,0.553 0.447,1 1,1h6c0.553,0 1,-0.447 1,-1v-5c0,-0.553 -0.447,-1 -1,-1h-2v-1c0,-0.551 0.449,-1 1,-1h8c0.551,0 0.998,0.449 0.998,1v1h-1.998c-0.553,0 -1,0.447 -1,1v5c0,0.553 0.447,1 1,1h5.998c0.553,0 1,-0.447 1,-1v-5c0,-0.553 -0.447,-1 -1,-1Zm-10.998,-8v-3h4v3h-4Zm-2,13h-4v-3h4v3Zm11.998,0h-3.998v-3h3.998v3Z\"\n            transform=\"translate(2, 2)\"\n          ></path>\n        </g>\n\n        <g id=\"check\">\n          <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"></path>\n        </g>\n\n        <g id=\"clear\" fill-rule=\"evenodd\">\n          <polygon\n            fill-rule=\"nonzero\"\n            points=\"17.707 1.707 16.293 .293 9 7.586 1.707 .293 .293 1.707 7.586 9 .293 16.293 1.707 17.707 9 10.414 16.293 17.707 17.707 16.293 10.414 9\"\n            transform=\"translate(3 3)\"\n          ></polygon>\n        </g>\n\n        <g id=\"cross\">\n          <g transform=\"translate(2.500000,22.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n            <path\n              d=\"M30 155 c-11 -13 -9 -20 8 -38 l22 -23 -22 -22 c-21 -21 -21 -23 -5 -39 16 -16 18 -16 39 5 l22 22 23 -22 c22 -21 24 -21 40 -5 16 16 16 18 -5 39 l-22 22 22 23 c20 22 21 25 5 40 -15 16 -18 15 -40 -5 l-24 -22 -18 20 c-22 24 -29 25 -45 5z\"\n            ></path>\n          </g>\n        </g>\n\n        <g id=\"clipboard\">\n          <path\n            d=\"M0,3.75c0,-2.301 1.449,-3.75 3.75,-3.75v0c2.301,0 3.75,1.449 3.75,3.75h-7.5Z\"\n            transform=\"translate(8.001, 14.25)\"\n          ></path>\n          <path\n            d=\"M4.51184,0.976311c0.976311,0.976311 0.976311,2.55922 0,3.53553c-0.976311,0.976311 -2.55922,0.976311 -3.53553,0c-0.976311,-0.976311 -0.976311,-2.55922 0,-3.53553c0.976311,-0.976311 2.55922,-0.976311 3.53553,0\"\n            transform=\"translate(9.00692, 7.75592)\"\n          ></path>\n          <path\n            d=\"M16,0h-1v2h1l0.001,14h-14.001v-14h1v-2h-1c-1.103,0 -2,0.896 -2,2v14c0,1.103 0.897,2 2,2h14c1.103,0 2,-0.897 2,-2v-14c0,-1.104 -0.897,-2 -2,-2Z\"\n            transform=\"translate(3.001, 4)\"\n          ></path>\n          <path\n            d=\"M6,2c0,-1.104 -0.896,-2 -2,-2c-1.104,0 -2,0.896 -2,2h-2v3h8v-3h-2Z\"\n            transform=\"translate(8.001, 1)\"\n          ></path>\n        </g>\n\n        <g id=\"clipboard-add\">\n          <path d=\"M5,0h-2v3h-3v2h3v3h2v-3h3v-2h-3Z\" transform=\"translate(8, 11)\"></path>\n          <path\n            d=\"M16,5h-2v-2h-1.142c-0.447,-1.719 -2,-3 -3.858,-3c-1.858,0 -3.411,1.281 -3.858,3h-1.142v2h-2c-1.103,0 -2,0.898 -2,2v14c0,1.103 0.897,2 2,2h14c1.103,0 2,-0.897 2,-2v-14c0,-1.102 -0.897,-2 -2,-2Zm-7,-3c0.739,0 1.385,0.402 1.731,1h-3.463c0.347,-0.598 0.993,-1 1.732,-1Zm-3,3h6v2h-6v-2Zm10,16h-14v-14h2v2h10v-2h2v14Z\"\n            transform=\"translate(3, 0)\"\n          ></path>\n        </g>\n\n        <g id=\"clipboard-subtract\">\n          <path d=\"M0,0h8v2h-8Z\" transform=\"translate(8, 14)\"></path>\n          <path\n            d=\"M16,5h-2v-2h-1.142c-0.447,-1.719 -2,-3 -3.858,-3c-1.858,0 -3.411,1.281 -3.858,3h-1.142v2h-2c-1.103,0 -2,0.898 -2,2v14c0,1.103 0.897,2 2,2h14c1.103,0 2,-0.897 2,-2v-14c0,-1.102 -0.897,-2 -2,-2Zm-7,-3c0.739,0 1.385,0.402 1.731,1h-3.463c0.347,-0.598 0.993,-1 1.732,-1Zm-3,3h6v2h-6v-2Zm10,16h-14v-14h2v2h10v-2h2v14Z\"\n            transform=\"translate(3, 0)\"\n          ></path>\n        </g>\n\n        <g id=\"collections\">\n          <path\n            d=\"M18,12c-0.295,0 -0.572,0.067 -0.824,0.182l-1.615,-1.153c0.277,-0.622 0.439,-1.306 0.439,-2.029c0,-1.018 -0.309,-1.963 -0.833,-2.753l2.321,-2.321c0.164,0.043 0.334,0.074 0.512,0.074c1.104,0 2,-0.895 2,-2c0,-1.104 -0.896,-2 -2,-2c-1.105,0 -2,0.896 -2,2c0,0.178 0.031,0.348 0.074,0.512l-2.321,2.321c-0.79,-0.524 -1.735,-0.833 -2.753,-0.833c-1.515,0 -2.857,0.691 -3.775,1.759l-3.229,-1.794c-0.018,-1.087 -0.904,-1.965 -1.996,-1.965c-1.105,0 -2,0.896 -2,2c0,1.105 0.895,2 2,2c0.375,0 0.721,-0.109 1.021,-0.289l3.231,1.796c-0.148,0.474 -0.252,0.97 -0.252,1.493c0,1.018 0.309,1.963 0.833,2.753l-4.321,4.321c-0.164,-0.043 -0.334,-0.074 -0.512,-0.074c-1.105,0 -2,0.896 -2,2c0,1.105 0.895,2 2,2c1.104,0 2,-0.895 2,-2c0,-0.178 -0.031,-0.348 -0.074,-0.512l4.321,-4.321c0.524,0.348 1.116,0.603 1.753,0.731v2.379c-0.596,0.347 -1,0.984 -1,1.723c0,1.105 0.895,2 2,2c1.104,0 2,-0.895 2,-2c0,-0.737 -0.404,-1.375 -1,-1.723v-2.379c0.916,-0.186 1.731,-0.634 2.391,-1.247l1.628,1.163c-0.006,0.062 -0.019,0.122 -0.019,0.186c0,1.105 0.895,2 2,2c1.104,0 2,-0.895 2,-2c0,-1.104 -0.896,-2 -2,-2Zm-7,0c-1.654,0 -3,-1.346 -3,-3c0,-1.654 1.346,-3 3,-3c1.654,0 3,1.346 3,3c0,1.654 -1.346,3 -3,3Z\"\n            transform=\"translate(2, 2)\"\n          ></path>\n        </g>\n\n        <g id=\"copy\" fill-rule=\"evenodd\">\n          <g fill-rule=\"nonzero\" transform=\"translate(3 1)\">\n            <path\n              d=\"M13.414,0 L6,0 C4.897,0 4,0.898 4,2 L4,16 C4,17.103 4.897,18 6,18 L16,18 C17.103,18 18,17.103 18,16 L18,4.586 L13.414,0 Z M16.001,16 L6,16 L6,2 L12,2 L12,6 L16,6 L16.001,16 Z\"\n            ></path>\n            <path d=\"M2,4 L0,4 L0,20 C0,21.103 0.897,22 2,22 L14,22 L14,20 L2,20 L2,4 Z\"></path>\n          </g>\n        </g>\n\n        <g id=\"dashboard\">\n          <path\n            d=\"M11,0c-6.065,0 -11,4.934 -11,11v5h7h8h7v-5c0,-6.066 -4.935,-11 -11,-11Zm-1.731,14c0.347,-0.597 0.993,-1 1.731,-1c0.738,0 1.385,0.403 1.731,1h-3.462Zm10.731,0h-5.143c-0.363,-1.398 -1.459,-2.493 -2.857,-2.858v-4.142h-2v4.142c-1.398,0.364 -2.494,1.459 -2.857,2.858h-5.143v-3c0,-4.962 4.037,-9 9,-9c4.963,0 9,4.038 9,9v3Z\"\n            transform=\"translate(1, 4)\"\n          ></path>\n          <g>\n            <path\n              transform=\"translate(10.9024, 6.90237)\"\n              d=\"M1.80474,0.390524c0.390524,0.390524 0.390524,1.02369 0,1.41421c-0.390524,0.390524 -1.02369,0.390524 -1.41421,0c-0.390524,-0.390524 -0.390524,-1.02369 0,-1.41421c0.390524,-0.390524 1.02369,-0.390524 1.41421,0\"\n            ></path>\n            <path\n              transform=\"translate(15.8524, 8.95137)\"\n              d=\"M1.80474,0.390524c0.390524,0.390524 0.390524,1.02369 0,1.41421c-0.390524,0.390524 -1.02369,0.390524 -1.41421,0c-0.390524,-0.390524 -0.390524,-1.02369 0,-1.41421c0.390524,-0.390524 1.02369,-0.390524 1.41421,0\"\n            ></path>\n            <path\n              transform=\"translate(17.9024, 13.9024)\"\n              d=\"M1.80474,0.390524c0.390524,0.390524 0.390524,1.02369 0,1.41421c-0.390524,0.390524 -1.02369,0.390524 -1.41421,0c-0.390524,-0.390524 -0.390524,-1.02369 0,-1.41421c0.390524,-0.390524 1.02369,-0.390524 1.41421,0\"\n            ></path>\n            <path\n              d=\"M1.80654,0.390915c0.390915,0.390915 0.390915,1.02471 0,1.41563c-0.390915,0.390915 -1.02471,0.390915 -1.41563,0c-0.390915,-0.390915 -0.390915,-1.02471 -8.88178e-16,-1.41563c0.390915,-0.390915 1.02471,-0.390915 1.41563,0\"\n              transform=\"translate(5.95127, 8.95127)\"\n            ></path>\n            <path\n              transform=\"translate(3.90237, 13.9024)\"\n              d=\"M1.80474,0.390524c0.390524,0.390524 0.390524,1.02369 0,1.41421c-0.390524,0.390524 -1.02369,0.390524 -1.41421,0c-0.390524,-0.390524 -0.390524,-1.02369 0,-1.41421c0.390524,-0.390524 1.02369,-0.390524 1.41421,0\"\n            ></path>\n          </g>\n        </g>\n\n        <g id=\"delete\">\n          <path\n            d=\"M0,12c0,1.103 0.897,2 2,2h10c1.103,0 2,-0.897 2,-2v-12h-14v12Zm2,-10h10l0.001,10h-10.001v-10Z\"\n            transform=\"translate(5, 8)\"\n          ></path>\n          <path d=\"M12,2v-2h-6v2h-6v2h18v-2Z\" transform=\"translate(3, 3)\"></path>\n          <path transform=\"translate(9, 12)\" d=\"M0,0h2v6h-2Z\"></path>\n          <path transform=\"translate(13, 12)\" d=\"M0,0h2v6h-2Z\"></path>\n        </g>\n\n        <g id=\"delete-permanently\" fill-rule=\"evenodd\">\n          <path\n            d=\"M5,19 C5,20.103 5.897,21 7,21 L17,21 C18.103,21 19,20.103 19,19 L19,7 L5,7 L5,19 Z M7,9 L17,9 L17.001,19 L7,19 L7,9 Z M15,4 L21,4 L21,6 L3,6 L3,4 L9,4 L9,2 L15,2 L15,4 Z M8.46,11.88 L9.87,10.47 L12,12.59 L14.12,10.47 L15.53,11.88 L13.41,14 L15.53,16.12 L14.12,17.53 L12,15.41 L9.88,17.53 L8.47,16.12 L10.59,14 L8.46,11.88 Z\"\n          ></path>\n        </g>\n\n        <g id=\"compare\">\n          <path\n            d=\"M10 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h5v2h2V1h-2v2zm0 15H5l5-6v6zm9-15h-5v2h5v13l-5-6v9h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"\n          ></path>\n        </g>\n\n        <g id=\"download\" fill-rule=\"evenodd\">\n          <g fill-rule=\"nonzero\" transform=\"translate(4 5)\">\n            <rect width=\"16\" height=\"2\" y=\"11.001\"></rect>\n            <path\n              d=\"M8,8.001 C7.744,8.001 7.488,7.903 7.293,7.708 L1.293,1.708 L2.707,0.294 L8,5.587 L13.293,0.294 L14.707,1.708 L8.707,7.708 C8.512,7.903 8.256,8.001 8,8.001 Z\"\n            ></path>\n          </g>\n        </g>\n\n        <g id=\"edit\">\n          <path\n            d=\"M18.877,1.179c-0.76,-0.761 -1.772,-1.179 -2.847,-1.179c-1.074,0 -2.086,0.418 -2.846,1.179l-11.409,11.408c-2.22045e-16,0 -0.001,0.003 -0.003,0.004c-0.081,0.082 -0.219,0.298 -0.261,0.461l-1.425,5.704c-0.086,0.34 0.015,0.702 0.263,0.949l0.001,0.001l0.001,0.001c0.248,0.248 0.608,0.349 0.949,0.264l5.704,-1.427c0.163,-0.042 0.38,-0.18 0.461,-0.261c0.001,-0.001 0.004,-0.003 0.004,-0.003l11.409,-11.407c0.76,-0.761 1.179,-1.771 1.178,-2.847c0,-1.075 -0.418,-2.086 -1.178,-2.847h-0.001Zm-6.41,3.549l2.863,2.863l-8.568,8.568l-2.863,-2.863l8.568,-8.568Zm-10.036,12.898l0.595,-2.374l1.78,1.781l-2.375,0.593Zm15.034,-15.032c0.764,0.765 0.764,2.099 0,2.864l-0.719,0.72l-2.866,-2.865l0.721,-0.719c0.765,-0.764 2.099,-0.765 2.864,0Z\"\n            transform=\"translate(1.944, 2)\"\n          ></path>\n        </g>\n\n        <g id=\"expired\">\n          <path\n            d=\"M14,3.171v-2.171c0,-0.552 -0.448,-1 -1,-1h-12c-0.552,0 -1,0.448 -1,1v2.172c0,0.79 0.32,1.563 0.879,2.121l4.707,4.707l-4.707,4.708c-0.567,0.566 -0.879,1.319 -0.879,2.121v2.171c0,0.552 0.448,1 1,1h12c0.552,0 1,-0.448 1,-1v-2.171c0,-0.802 -0.312,-1.555 -0.879,-2.122l-4.707,-4.707l4.707,-4.707c0.559,-0.559 0.879,-1.332 0.879,-2.122Zm-2,13.658v1.171h-10v-1.171c0,-0.268 0.104,-0.519 0.293,-0.708l4.707,-4.707l4.707,4.708c0.189,0.188 0.293,0.439 0.293,0.707Zm0,-13.658c0,0.263 -0.107,0.521 -0.293,0.707l-4.707,4.707l-4.707,-4.707c-0.186,-0.186 -0.293,-0.444 -0.293,-0.707v-1.171h10v1.171Z\"\n            transform=\"translate(5, 2)\"\n          ></path>\n          <path d=\"M0,3l3,-3l3,3Z\" transform=\"translate(9, 16)\"></path>\n        </g>\n\n        <g id=\"export\">\n          <path\n            d=\"M6.293,1.414l2.293,2.293h-8.586v2h8.586l-2.293,2.293l1.414,1.414l4.707,-4.707l-4.707,-4.707Z\"\n            transform=\"translate(10, 7.293)\"\n          ></path>\n          <path\n            d=\"M2,18h2c1.104,0 2,-0.896 2,-2v-14c0,-1.104 -0.896,-2 -2,-2h-2c-1.104,0 -2,0.896 -2,2v14c0,1.104 0.896,2 2,2Zm0,-16h2l-0.003,14h-1.997v-14Z\"\n            transform=\"translate(2, 3)\"\n          ></path>\n        </g>\n\n        <g id=\"favorites\">\n          <path\n            d=\"M16.078,20.124c-0.193,0 -0.387,-0.056 -0.555,-0.168l-5.445,-3.63l-5.445,3.63c-0.348,0.232 -0.805,0.224 -1.145,-0.024c-0.338,-0.247 -0.486,-0.679 -0.371,-1.082l1.838,-6.435l-4.584,-4.584c-0.286,-0.285 -0.371,-0.716 -0.217,-1.09c0.154,-0.373 0.52,-0.617 0.924,-0.617h5.382l2.724,-5.447c0.339,-0.677 1.45,-0.677 1.789,4.44089e-16l2.724,5.447h5.381c0.404,0 0.77,0.244 0.924,0.617c0.154,0.374 0.069,0.805 -0.217,1.09l-4.584,4.584l1.838,6.435c0.115,0.403 -0.033,0.835 -0.371,1.082c-0.176,0.128 -0.383,0.192 -0.59,0.192Zm-6,-6c0.193,0 0.387,0.057 0.555,0.168l3.736,2.491l-1.252,-4.384c-0.101,-0.35 -0.003,-0.726 0.254,-0.982l3.293,-3.293h-3.586c-0.379,0 -0.725,-0.214 -0.895,-0.553l-2.105,-4.211l-2.105,4.211c-0.17,0.339 -0.516,0.553 -0.895,0.553h-3.586l3.293,3.293c0.257,0.257 0.354,0.633 0.254,0.982l-1.252,4.384l3.736,-2.491c0.168,-0.111 0.362,-0.168 0.555,-0.168Z\"\n            transform=\"translate(1.922, 1.877)\"\n          ></path>\n        </g>\n\n        <g id=\"filter\">\n          <path\n            d=\"M14,0h-12c-1.104,0 -2,0.898 -2,2v4c0,0.256 0.098,0.512 0.293,0.707l4.707,4.708v7.585c0,0.404 0.244,0.769 0.617,0.924c0.124,0.052 0.254,0.076 0.383,0.076c0.26,0 0.516,-0.102 0.707,-0.293l4,-4c0.188,-0.187 0.293,-0.441 0.293,-0.707v-3.586l4.707,-4.707c0.195,-0.195 0.293,-0.45 0.293,-0.707v-4c0,-1.102 -0.896,-2 -2,-2Zm-4.707,10.293c-0.188,0.188 -0.293,0.442 -0.293,0.707v3.586l-2,2v-5.586c0,-0.265 -0.105,-0.52 -0.293,-0.707l-4.707,-4.707v-3.586h12v3.586l-4.707,4.707Z\"\n            transform=\"translate(4, 2)\"\n          ></path>\n        </g>\n\n        <g id=\"filter-add\" fill-rule=\"evenodd\">\n          <g fill-rule=\"nonzero\" transform=\"translate(2 2)\">\n            <path\n              d=\"M14,0 L2,0 C0.896,0 0,0.898 0,2 L0,6 C0,6.256 0.098,6.512 0.293,6.707 L5,11.415 L5,19 C5,19.404 5.244,19.769 5.617,19.924 C5.741,19.976 5.871,20 6,20 C6.26,20 6.516,19.898 6.707,19.707 L10.707,15.707 C10.895,15.52 11,15.266 11,15 L11,11.414 L15.707,6.707 C15.902,6.512 16,6.257 16,6 L16,2 C16,0.898 15.104,0 14,0 Z M9.293,10.293 C9.105,10.481 9,10.735 9,11 L9,14.586 L7,16.586 L7,11 C7,10.735 6.895,10.48 6.707,10.293 L2,5.586 L2,2 L14,2 L14,5.586 L9.293,10.293 Z\"\n            ></path>\n            <polygon points=\"20 16 17 16 17 13 15 13 15 16 12 16 12 18 15 18 15 21 17 21 17 18 20 18\"></polygon>\n          </g>\n        </g>\n\n        <g id=\"filter-edit\" fill-rule=\"evenodd\">\n          <g fill-rule=\"nonzero\" transform=\"translate(1 2)\">\n            <path\n              d=\"M12 0L2 0C.896 0 0 .898 0 2L0 5C0 5.256.098 5.512.293 5.707L4 9.415 4 14.914C4 15.318 4.244 15.683 4.617 15.838 4.741 15.89 4.871 15.914 5 15.914 5.26 15.914 5.516 15.812 5.707 15.621L9.707 11.621C9.895 11.434 10 11.18 10 10.914L10 9.414 13.707 5.707C13.902 5.512 14 5.257 14 5L14 2C14 .898 13.104 0 12 0zM8.293 8.293C8.105 8.481 8 8.735 8 9L8 10.414 6 12.5 6 9C6 8.735 5.895 8.48 5.707 8.293L2 4.586 2 2 12 2 12 4.586 8.293 8.293zM20.707204 11.29325L17.707204 8.29325C17.316204 7.90225 16.684204 7.90225 16.293204 8.29325L9.29320404 15.29325C9.16420404 15.42125 9.07420404 15.58225 9.02920404 15.75825L8.02920404 19.75825C7.94520404 20.09825 8.04520404 20.45925 8.29320404 20.70725 8.48220404 20.89725 8.73820404 21.00025 9.00020404 21.00025 9.08020404 21.00025 9.16220404 20.99125 9.24220404 20.97125L13.242204 19.97125C13.418204 19.92725 13.579204 19.83525 13.707204 19.70725L20.707204 12.70725C21.098204 12.31625 21.098204 11.68425 20.707204 11.29325zM12.488204 18.09725L10.375204 18.62625 10.902204 16.51125 14.000204 13.41425 15.586204 15.00025 12.488204 18.09725zM17.000204 13.58625L15.414204 12.00025 17.000204 10.41425 18.586204 12.00025 17.000204 13.58625z\"\n            ></path>\n          </g>\n        </g>\n\n        <g id=\"fit-to-real-size\" fill-rule=\"evenodd\">\n          <path\n            d=\"M11.987 15.083a3.077 3.077 0 0 1 0-6.154 3.077 3.077 0 0 1 0 6.154zm-8.953-5.49V3h6.51v1.594h-4.92v4.999h-1.59zM3 21v-6.525h1.59v4.931h4.988V21H3zM19.376 9.593v-5h-4.92V3h6.51v6.593h-1.59zM14.422 21v-1.594h4.988v-4.93H21V21h-6.578z\"\n          ></path>\n        </g>\n\n        <g id=\"fit-to-viewer\" fill-rule=\"nonzero\">\n          <path\n            d=\"M14.77 13.409l1.419-1.42-1.398-1.398.716-.718 2.115 2.116-2.136 2.137-.716-.717zM11.99 7.81l-1.399 1.4-.716-.718 2.116-2.116 2.135 2.137-.717.716-1.418-1.419zm-2.117 7.696l.718-.717 1.398 1.399 1.42-1.42.716.717-2.136 2.137-2.116-2.116zM6.378 11.99l2.115-2.116.717.716-1.399 1.4 1.42 1.418-.717.717-2.136-2.135zM4.5 4.588v14.824h15V4.588h-15zM3 3h18v18H3V3z\"\n          ></path>\n        </g>\n\n        <g id=\"group\">\n          <path\n            d=\"M16.34 14.391a7.088 7.088 0 0 0-1.07-.48c.514-.882 1.653-1.439 3.116-1.439 1.715 0 2.989.763 3.329 1.919h-5.376zm-9.311 3.54c.522-1.637 2.47-2.717 5.092-2.717 2.622 0 4.57 1.08 5.09 2.717H7.03zm-1.411-5.459c1.503 0 2.66.59 3.153 1.514a7.1 7.1 0 0 0-.87.405H2.289c.34-1.156 1.614-1.919 3.329-1.919zm17.326 2.559c0-2.26-1.874-3.837-4.557-3.837-2.067 0-3.64.941-4.26 2.404a10.106 10.106 0 0 0-2.007-.195c-.793 0-1.539.084-2.227.241-.608-1.488-2.188-2.45-4.276-2.45-2.683 0-4.557 1.577-4.557 3.837v.639h5.247a4.791 4.791 0 0 0-1.159 3.166v.906h13.945v-.906a4.792 4.792 0 0 0-1.16-3.166h5.011v-.64z\"\n          ></path>\n          <path\n            d=\"M11.987 12.435a3.49 3.49 0 0 1-3.486-3.486 3.49 3.49 0 0 1 3.486-3.487 3.49 3.49 0 0 1 3.486 3.487 3.49 3.49 0 0 1-3.486 3.486m0-5.23a1.744 1.744 0 1 0 1.743 1.743c0-.961-.782-1.742-1.743-1.742M5.08 10.239A2.131 2.131 0 0 1 2.952 8.11c0-1.173.955-2.128 2.13-2.128 1.174 0 2.129.955 2.129 2.128a2.131 2.131 0 0 1-2.13 2.129m0-3.192a1.064 1.064 0 1 0 .001 2.128 1.064 1.064 0 0 0 0-2.128M16.701 8.11c0-1.173.955-2.128 2.129-2.128 1.175 0 2.13.955 2.13 2.128a2.131 2.131 0 0 1-2.13 2.13A2.131 2.131 0 0 1 16.7 8.11m1.064 0a1.066 1.066 0 0 0 2.129 0 1.064 1.064 0 0 0-2.13 0\"\n          ></path>\n        </g>\n\n        <g id=\"lock\">\n          <path\n            d=\"M2.70711,0.585786c0.585786,0.585786 0.585786,1.53553 0,2.12132c-0.585786,0.585786 -1.53553,0.585786 -2.12132,0c-0.585786,-0.585786 -0.585786,-1.53553 0,-2.12132c0.585786,-0.585786 1.53553,-0.585786 2.12132,0\"\n            transform=\"translate(10.3536, 14.8536)\"\n          ></path>\n          <path\n            d=\"M12,9v-4c0,-2.757 -2.243,-5 -5,-5c-2.757,0 -5,2.243 -5,5v4c-1.104,0 -2,0.896 -2,2v7c0,1.103 0.896,2 2,2h10c1.104,0 2,-0.897 2,-2v-7c0,-1.104 -0.896,-2 -2,-2Zm-8,-4c0,-1.654 1.346,-3 3,-3c1.654,0 3,1.346 3,3v4h-6v-4Zm-2,13v-7h10l0.002,7h-10.002Z\"\n            transform=\"translate(5, 2)\"\n          ></path>\n        </g>\n\n        <g id=\"move\" fill-rule=\"evenodd\">\n          <g fill-rule=\"nonzero\" transform=\"translate(1 1)\">\n            <circle cx=\"11\" cy=\"11.001\" r=\"2\"></circle>\n            <polygon points=\"17 15.416 15.586 14.001 18.586 11.001 15.586 8.001 17 6.587 21.414 11.001\"></polygon>\n            <polygon points=\"5 15.416 .586 11.001 5 6.587 6.414 8.001 3.414 11.001 6.414 14.001\"></polygon>\n            <polygon points=\"14 6.416 11 3.416 8 6.416 6.586 5.001 11 .587 15.414 5.001\"></polygon>\n            <polygon points=\"11 21.416 6.586 17.001 8 15.587 11 18.587 14 15.587 15.414 17.001\"></polygon>\n          </g>\n        </g>\n\n        <g id=\"notify\">\n          <path\n            d=\"M0,0c0.693,1.19 1.969,2 3.445,2c1.476,0 2.752,-0.81 3.445,-2h-6.89Z\"\n            transform=\"translate(8.555, 19)\"\n          ></path>\n          <path\n            d=\"M18,15h-18v-2.721l0.684,-0.227c1.385,-0.463 2.316,-1.754 2.316,-3.214v-2.838c0,-3.309 2.691,-6 6,-6c3.309,0 6,2.691 6,6v2.838c0,1.46 0.931,2.751 2.316,3.214l0.684,0.227v2.721Zm-14.965,-2h11.931c-1.221,-1.002 -1.966,-2.514 -1.966,-4.162v-2.838c0,-2.206 -1.794,-4 -4,-4c-2.206,0 -4,1.794 -4,4v2.838c0,1.648 -0.745,3.16 -1.965,4.162Z\"\n            transform=\"translate(3, 3)\"\n          ></path>\n        </g>\n\n        <g id=\"preview\">\n          <path\n            d=\"M11,0c-5,0 -9.27,3.11 -11,7.5c1.73,4.39 6,7.5 11,7.5c5,0 9.27,-3.11 11,-7.5c-1.73,-4.39 -6,-7.5 -11,-7.5Zm0,12.5c-2.76,0 -5,-2.24 -5,-5c0,-2.76 2.24,-5 5,-5c2.76,0 5,2.24 5,5c0,2.76 -2.24,5 -5,5Zm0,-8c-1.66,0 -3,1.34 -3,3c0,1.66 1.34,3 3,3c1.66,0 3,-1.34 3,-3c0,-1.66 -1.34,-3 -3,-3Z\"\n            transform=\"translate(1, 4.5)\"\n          ></path>\n        </g>\n\n        <g id=\"recent\">\n          <path d=\"M0,0v6h4v-2h-2v-4Z\" transform=\"translate(11, 8)\"></path>\n          <path\n            d=\"M9,0c-2.715,0 -5.221,1.089 -7.062,2.938l-1.938,-1.938v6h6l-2.649,-2.649c1.473,-1.48 3.477,-2.351 5.649,-2.351c4.411,0 8,3.589 8,8c0,4.411 -3.589,8 -8,8v2c5.514,0 10,-4.485 10,-10c0,-5.515 -4.486,-10 -10,-10Z\"\n            transform=\"translate(3, 2)\"\n          ></path>\n        </g>\n\n        <g id=\"refresh\">\n          <path\n            d=\"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"\n          ></path>\n        </g>\n\n        <g id=\"remove\">\n          <path\n            d=\"M10,0c-5.514,0 -10,4.486 -10,10c0,5.514 4.486,10 10,10c5.514,0 10,-4.486 10,-10c0,-5.514 -4.486,-10 -10,-10Zm0,18c-4.411,0 -8,-3.589 -8,-8c0,-4.411 3.589,-8 8,-8c4.411,-4.44089e-16 8,3.589 8,8c0,4.411 -3.589,8 -8,8Z\"\n            transform=\"translate(2, 2.001)\"\n          ></path>\n          <path\n            d=\"M6,0l-2.293,2.293l-2.293,-2.293l-1.414,1.414l2.293,2.293l-2.293,2.293l1.414,1.414l2.293,-2.293l2.293,2.293l1.414,-1.414l-2.293,-2.293l2.293,-2.293Z\"\n            transform=\"translate(8.293, 8.294)\"\n          ></path>\n        </g>\n\n        <g id=\"remove-bold\">\n          <path\n            d=\"M10,20c-5.514,0 -10,-4.486 -10,-10c0,-5.514 4.486,-10 10,-10c5.514,0 10,4.486 10,10c0,5.514 -4.486,10 -10,10Zm0,-18c-4.411,8.88178e-16 -8,3.589 -8,8c0,4.411 3.589,8 8,8c4.411,0 8,-3.589 8,-8c0,-4.411 -3.589,-8 -8,-8Z\"\n            transform=\"translate(2, 2.002)\"\n          ></path>\n          <path\n            d=\"M9.898,8l-2.949,-3l2.949,-3l-1.949,-1.949l-3,2.949l-3,-3l-1.949,2l2.949,3l-2.949,3l1.949,1.949l3,-2.949l3,2.949Z\"\n            transform=\"translate(7.051, 7.002)\"\n          ></path>\n        </g>\n\n        <g id=\"replace\">\n          <path\n            d=\"M3.38300739546321,6.871047330502961 L9.040858915463218,6.871047330502961 L9.040858915463218,9.803262440502976 L12.95484251546327,5.893642290502953 L9.040858915463218,1.9840221405029297 L9.040858915463218,4.916237250502945 L3.38300739546321,4.916237250502945 C2.3037264294632678,4.916237250502945 1.426015615463257,5.792969570502919 1.426015615463257,6.871047330502961 L1.426015615463257,16.645097740502933 C1.426015615463257,17.723175440502928 2.3037264294632678,18.59990774050289 3.38300739546321,18.59990774050289 L5.3399991754632765,18.59990774050289 L5.3399991754632765,16.645097740502933 L3.38300739546321,16.645097740502933 L3.38300739546321,6.871047330502961 z\"\n          ></path>\n          <path\n            d=\"M15.471966315463305,4.916237250502945 L15.471966315463305,6.871047330502961 L19.172826015463215,6.871047330502961 L19.172826015463215,16.645097740502933 L13.514974515463223,16.645097740502933 L13.514974515463223,13.71288254050296 L9.600990925463293,17.62250274050291 L13.514974515463223,21.532122840502893 L13.514974515463223,18.59990774050289 L19.172826015463215,18.59990774050289 C20.252107015463253,18.59990774050289 21.129817815463298,17.723175440502928 21.129817815463298,16.645097740502933 L21.129817815463298,6.871047330502961 C21.129817815463298,5.792969570502919 20.252107015463253,4.916237250502945 19.172826015463215,4.916237250502945 L15.471966315463305,4.916237250502945 z\"\n          ></path>\n        </g>\n\n        <g id=\"reply\">\n          <path d=\"M10 8.5v-4l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z\"></path>\n        </g>\n\n        <g id=\"restore-deleted\" fill-rule=\"nonzero\">\n          <path\n            d=\"M16,12.5 C16,11.2108333 14.9771429,10.1666667 13.7142857,10.1666667 C12.4514286,10.1666667 11.4285714,11.2108333 11.4285714,12.5 C11.4285714,13.7891667 12.4514286,14.8333333 13.7142857,14.8333333 C14.9771429,14.8333333 16,13.7891667 16,12.5 Z M13.7142857,2 C8.03428571,2 3.42857143,6.70166667 3.42857143,12.5 L0,12.5 L4.57142857,17.1666667 L9.14285714,12.5 L5.71428571,12.5 C5.71428571,7.99083333 9.29714286,4.33333333 13.7142857,4.33333333 C18.1314286,4.33333333 21.7142857,7.99083333 21.7142857,12.5 C21.7142857,17.0091667 18.1314286,20.6666667 13.7142857,20.6666667 C11.9828571,20.6666667 10.3885714,20.1008333 9.07428571,19.1441667 L7.45714286,20.8183333 C9.19428571,22.1833333 11.36,23 13.7142857,23 C19.3942857,23 24,18.2983333 24,12.5 C24,6.70166667 19.3942857,2 13.7142857,2 Z\"\n          ></path>\n        </g>\n\n        <g id=\"review\">\n          <path\n            d=\"M18,7h-5v-5c0,-1.102 -0.897,-2 -2,-2h-9c-1.103,0 -2,0.898 -2,2v9c0,1.103 0.897,2 2,2h5v5c0,1.103 0.897,2 2,2h9c1.103,0 2,-0.897 2,-2v-9c0,-1.102 -0.897,-2 -2,-2Zm-16,4v-9h9l0.001,5h-2.001c-1.103,0 -2,0.898 -2,2v2h-5Zm9.001,0h-2.001v-2h2.001v2Zm-2.001,7v-5h2c1.103,0 2,-0.897 2,-2v-2h5l0.001,9h-9.001Z\"\n            transform=\"translate(2, 2)\"\n          ></path>\n        </g>\n\n        <g id=\"search\">\n          <path\n            d=\"M12.5,11h-0.79l-0.28,-0.27c0.98,-1.14 1.57,-2.62 1.57,-4.23c0,-3.59 -2.91,-6.5 -6.5,-6.5c-3.59,0 -6.5,2.91 -6.5,6.5c0,3.59 2.91,6.5 6.5,6.5c1.61,0 3.09,-0.59 4.23,-1.57l0.27,0.28v0.79l5,4.99l1.49,-1.49l-4.99,-5Zm-6,0c-2.49,0 -4.5,-2.01 -4.5,-4.5c0,-2.49 2.01,-4.5 4.5,-4.5c2.49,0 4.5,2.01 4.5,4.5c0,2.49 -2.01,4.5 -4.5,4.5Z\"\n            transform=\"translate(3, 3)\"\n          ></path>\n        </g>\n\n        <g id=\"search-nxql\">\n          <path\n            d=\"M12.5,11h-0.79l-0.28,-0.27c0.98,-1.14 1.57,-2.62 1.57,-4.23c0,-3.59 -2.91,-6.5 -6.5,-6.5c-3.59,0 -6.5,2.91 -6.5,6.5c0,3.59 2.91,6.5 6.5,6.5c1.61,0 3.09,-0.59 4.23,-1.57l0.27,0.28v0.79l5,4.99l1.49,-1.49l-4.99,-5Zm-6,0c-2.49,0 -4.5,-2.01 -4.5,-4.5c0,-2.49 2.01,-4.5 4.5,-4.5c2.49,0 4.5,2.01 4.5,4.5c0,2.49 -2.01,4.5 -4.5,4.5Z\"\n            transform=\"translate(3, 3)\"\n          ></path>\n          <text\n            transform=\"matrix(1.0186654329299927,0,0,0.97158633323613,-0.0034914176222127224,1.4850397025215731) \"\n            xml:space=\"preserve\"\n            text-anchor=\"start\"\n            font-family=\"Helvetica, Arial, sans-serif\"\n            font-size=\"8\"\n            y=\"21.27207\"\n            x=\"0.37858\"\n            fill-opacity=\"null\"\n            stroke-opacity=\"null\"\n            stroke-width=\"0\"\n          >\n            NXQL\n          </text>\n        </g>\n\n        <g id=\"send\">\n          <path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"></path>\n        </g>\n\n        <g id=\"settings\">\n          <path\n            d=\"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z\"\n          ></path>\n        </g>\n\n        <g id=\"share\">\n          <path\n            d=\"M16,12c-1.2,0 -2.266,0.541 -3,1.381l-5.092,-2.545c0.059,-0.269 0.092,-0.548 0.092,-0.836c0,-0.288 -0.033,-0.566 -0.092,-0.837l5.092,-2.545c0.734,0.84 1.8,1.382 3,1.382c2.205,0 4,-1.795 4,-4c0,-2.206 -1.795,-4 -4,-4c-2.205,0 -4,1.794 -4,4c0,0.287 0.033,0.566 0.092,0.836l-5.092,2.545c-0.734,-0.839 -1.8,-1.381 -3,-1.381c-2.205,0 -4,1.794 -4,4c0,2.205 1.795,4 4,4c1.2,0 2.266,-0.543 3,-1.383l5.092,2.546c-0.059,0.271 -0.092,0.55 -0.092,0.837c0,2.205 1.795,4 4,4c2.205,0 4,-1.795 4,-4c0,-2.206 -1.795,-4 -4,-4Zm0,-10c1.104,0 2,0.895 2,2c0,1.104 -0.896,2 -2,2c-1.104,0 -2,-0.896 -2,-2c0,-1.105 0.896,-2 2,-2Zm-12,10c-1.104,0 -2,-0.896 -2,-2c0,-1.105 0.896,-2 2,-2c1.104,0 2,0.895 2,2c0,1.104 -0.896,2 -2,2Zm12,6c-1.104,0 -2,-0.896 -2,-2c0,-1.105 0.896,-2 2,-2c1.104,0 2,0.895 2,2c0,1.104 -0.896,2 -2,2Z\"\n            transform=\"translate(2, 2)\"\n          ></path>\n        </g>\n\n        <g id=\"spreadsheet\">\n          <path\n            d=\"M16.4210526,3 L4.57894737,3 C3.71052632,3 3,3.64878615 3,4.441747 L3,14.533976 C3,15.3269368 3.71052632,15.975723 4.57894737,15.975723 L16.4210526,15.975723 C17.2894737,15.975723 18,15.3269368 18,14.533976 L18,4.441747 C18,3.64878615 17.2894737,3 16.4210526,3 Z M17.0029456,4 L17.0029456,6.6626205 L4,6.6626205 L4,4 L17.0029456,4 Z M12.2042358,15.0259743 L8.53924257,15.0259743 L8.53924257,11.3896106 L12.2042358,11.3896106 L12.2042358,15.0259743 Z M12.2042358,10.87013 L8.53924257,10.87013 L8.53924257,7.23376634 L12.2042358,7.23376634 L12.2042358,10.87013 Z M4.02951253,11.3896106 L7.58115945,11.3896106 L7.58115945,15.0259743 L4.02951253,15.0259743 L4.02951253,11.3896106 Z M4.02951253,7.23376634 L7.58115945,7.23376634 L7.58115945,10.87013 L4.02951253,10.87013 L4.02951253,7.23376634 Z M13.1623189,14.3750537 L13.1623189,11.3896106 L16.7139658,11.3896106 L17.9222651,13.4140289 L15.4435147,15.9761042 L13.1325949,15.9761042 L13.1623189,14.3750537 Z M13.1623189,10.87013 L13.1623189,7.23376634 L16.7139658,7.23376634 L16.7139658,10.87013 L13.1623189,10.87013 Z M19.738785,8.53246766 C19.569659,8.53246766 19.3937679,8.60173173 19.2652321,8.73333345 L18.0272296,10.0008658 L20.56412,12.5982683 L21.8021225,11.3307359 C22.0659592,11.060606 22.0659592,10.6242424 21.8021225,10.3541126 L20.2191029,8.73333345 C20.0838021,8.59480532 19.9146761,8.53246766 19.738785,8.53246766 Z M17.3033698,10.7419915 L9.82123391,18.4025974 L9.82123391,21 L12.3581245,21 L19.8402604,13.3393941 L17.3033698,10.7419915 Z M17.9257536,13.3393941 L11.7966261,19.6147186 L11.1742423,19.6147186 L11.1742423,18.9774892 L17.3033698,12.7021647 L17.9257536,13.3393941 Z\"\n            fill-rule=\"nonzero\"\n          ></path>\n        </g>\n\n        <g id=\"subtract\">\n          <path\n            d=\"M10,20c-5.514,0 -10,-4.486 -10,-10c0,-5.514 4.486,-10 10,-10c5.514,0 10,4.486 10,10c0,5.514 -4.486,10 -10,10Zm0,-18c-4.411,-8.88178e-16 -8,3.589 -8,8c0,4.411 3.589,8 8,8c4.411,0 8,-3.589 8,-8c0,-4.411 -3.589,-8 -8,-8Z\"\n            transform=\"translate(2, 2.001)\"\n          ></path>\n          <path d=\"M0,0h10v2h-10Z\" transform=\"translate(7, 11.001)\"></path>\n        </g>\n\n        <g id=\"subtract-bold\">\n          <path\n            d=\"M10,20c-5.514,0 -10,-4.486 -10,-10c0,-5.514 4.486,-10 10,-10c5.514,0 10,4.486 10,10c0,5.514 -4.486,10 -10,10Zm0,-18c-4.411,8.88178e-16 -8,3.589 -8,8c0,4.411 3.589,8 8,8c4.411,0 8,-3.589 8,-8c0,-4.411 -3.589,-8 -8,-8Z\"\n            transform=\"translate(2, 2.002)\"\n          ></path>\n          <path d=\"M0,0h10v4h-10Z\" transform=\"translate(7, 10.002)\"></path>\n        </g>\n\n        <g id=\"switch-sides\">\n          <path\n            d=\"M13.01 9H6v2h7.01v3L17 10l-3.99-4v3zM3.99 8V5H11V3H3.99V0L0 4l3.99 4z\"\n            transform=\"translate(3, 5)\"\n            fill-rule=\"nonzero\"\n          ></path>\n        </g>\n\n        <g id=\"tasks\">\n          <path\n            d=\"M2.707,3.293l-1.293,-1.293l-1.414,1.414l2.707,2.708l4.707,-4.708l-1.414,-1.414Z\"\n            transform=\"translate(8.293, 5.293)\"\n          ></path>\n          <path\n            d=\"M2.707,3.293l-1.293,-1.293l-1.414,1.414l2.707,2.708l4.707,-4.708l-1.414,-1.414Z\"\n            transform=\"translate(8.293, 12.293)\"\n          ></path>\n          <path\n            d=\"M14,0h-12c-1.103,0 -2,0.898 -2,2v16c0,1.103 0.897,2 2,2h12c1.103,0 2,-0.897 2,-2v-16c0,-1.102 -0.897,-2 -2,-2Zm-12,18v-16h12l0.001,16h-12.001Z\"\n            transform=\"translate(4, 2)\"\n          ></path>\n        </g>\n\n        <g id=\"unlock\">\n          <path\n            d=\"M12,9h-8v-4c0,-1.654 1.346,-3 3,-3c1.654,0 3,1.346 3,3v1h2v-1c0,-2.757 -2.243,-5 -5,-5c-2.757,0 -5,2.243 -5,5v4c-1.104,0 -2,0.896 -2,2v7c0,1.103 0.896,2 2,2h10c1.104,0 2,-0.897 2,-2v-7c0,-1.104 -0.896,-2 -2,-2Zm-10,9v-7h10l0.002,7h-10.002Z\"\n            transform=\"translate(5, 2)\"\n          ></path>\n          <path\n            d=\"M2.70711,0.585786c0.585786,0.585786 0.585786,1.53553 0,2.12132c-0.585786,0.585786 -1.53553,0.585786 -2.12132,0c-0.585786,-0.585786 -0.585786,-1.53553 0,-2.12132c0.585786,-0.585786 1.53553,-0.585786 2.12132,0\"\n            transform=\"translate(10.3536, 14.8536)\"\n          ></path>\n        </g>\n\n        <g id=\"upload\">\n          <path d=\"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z\"></path>\n        </g>\n\n        <g id=\"user\">\n          <path\n            d=\"M12 12a5.506 5.506 0 0 1-5.5-5.5C6.5 3.467 8.967 1 12 1s5.5 2.467 5.5 5.5S15.033 12 12 12zm0-8.25A2.752 2.752 0 0 0 9.25 6.5 2.753 2.753 0 0 0 12 9.25a2.753 2.753 0 0 0 2.75-2.75A2.752 2.752 0 0 0 12 3.75zM23 23H1v-1.429C1 16.524 5.524 13 12 13s11 3.524 11 8.571V23zM3.969 20.143h16.064c-.823-2.583-3.896-4.286-8.032-4.286s-7.21 1.703-8.032 4.286z\"\n          ></path>\n        </g>\n\n        <g id=\"user-settings\" fill-rule=\"evenodd\">\n          <g fill-rule=\"nonzero\">\n            <g transform=\"translate(0 8)\">\n              <path\n                d=\"M8.002 8.006C5.797 8.006 4.002 6.211 4.002 4.006 4.002 1.801 5.797.006 8.002.006 10.207.006 12.002 1.801 12.002 4.006 12.002 6.211 10.208 8.006 8.002 8.006zM8.002 2.006C6.898 2.006 6.002 2.902 6.002 4.006 6.002 5.109 6.898 6.006 8.002 6.006 9.106 6.006 10.002 5.109 10.002 4.006 10.002 2.902 9.106 2.006 8.002 2.006zM16.002 16.006L.002 16.006.002 15.006C.002 11.473 3.291 9.006 8.002 9.006 12.713 9.006 16.002 11.473 16.002 15.006L16.002 16.006zM2.161 14.006L13.845 14.006C13.246 12.198 11.011 11.006 8.003 11.006 4.995 11.006 2.759 12.198 2.161 14.006z\"\n              ></path>\n            </g>\n            <path\n              d=\"M24.002,7.006 L24.002,5.006 L22.9,5.006 C22.769,4.368 22.515,3.777 22.167,3.252 L22.951,2.468 L21.537,1.054 L20.752,1.838 C20.229,1.491 19.638,1.236 19.001,1.108 L19.001,0.006 L17.001,0.006 L17.001,1.108 C16.363,1.237 15.772,1.492 15.248,1.839 L14.465,1.056 L13.051,2.47 L13.834,3.253 C13.486,3.777 13.232,4.369 13.102,5.006 L12,5.006 L12,7.006 L13.102,7.006 C13.233,7.644 13.487,8.235 13.834,8.76 L13.051,9.544 L14.466,10.957 L15.248,10.173 C15.773,10.521 16.365,10.776 17.002,10.904 L17.002,12.007 L19.002,12.007 L19.002,10.904 C19.639,10.774 20.231,10.52 20.755,10.172 L21.539,10.955 L22.952,9.54 L22.168,8.758 C22.516,8.234 22.77,7.643 22.9,7.006 L24.002,7.006 Z M18,8.006 C16.895,8.006 16,7.11 16,6.006 C16,4.902 16.895,4.006 18,4.006 C19.104,4.006 20,4.902 20,6.006 C20,7.109 19.104,8.006 18,8.006 Z\"\n            ></path>\n          </g>\n        </g>\n\n        <g id=\"user-space\">\n          <path\n            d=\"M3,6c-1.654,0 -3,-1.346 -3,-3c0,-1.654 1.346,-3 3,-3c1.654,0 3,1.346 3,3c0,1.654 -1.346,3 -3,3Zm0,-4c-0.551,0 -1,0.449 -1,1c0,0.552 0.449,1 1,1c0.551,0 1,-0.448 1,-1c0,-0.551 -0.449,-1 -1,-1Z\"\n            transform=\"translate(9, 0)\"\n          ></path>\n          <path\n            d=\"M7,13h-4c-0.552,0 -1,-0.448 -1,-1v-4h-1c-0.552,0 -1,-0.448 -1,-1v-2c0,-2.757 2.243,-5 5,-5c2.757,0 5,2.243 5,5v2c0,0.552 -0.448,1 -1,1h-1v4c0,0.552 -0.448,1 -1,1Zm-3,-2h2v-4c0,-0.552 0.448,-1 1,-1h1v-1c0,-1.654 -1.346,-3 -3,-3c-1.654,0 -3,1.346 -3,3v1h1c0.552,0 1,0.448 1,1v4Z\"\n            transform=\"translate(7, 7)\"\n          ></path>\n          <path\n            d=\"M10,7.232c-4.816,0 -10,-1.251 -10,-4c0,-0.969 0.667,-2.316 3.841,-3.232l0.555,1.922c-1.979,0.571 -2.396,1.208 -2.396,1.31c0,0.515 2.75,2 8,2c5.25,0 8,-1.485 8,-2c0,-0.096 -0.389,-0.704 -2.239,-1.264l0.58,-1.914c3.024,0.916 3.659,2.234 3.659,3.178c0,2.749 -5.184,4 -10,4Z\"\n            transform=\"translate(2, 16.768)\"\n          ></path>\n        </g>\n\n        <g id=\"view-array\" fill-rule=\"evenodd\">\n          <g fill-rule=\"nonzero\" transform=\"translate(2 3)\">\n            <path\n              d=\"M14.5 18.001L5.5 18.001C4.673 18.001 4 17.328 4 16.501L4 1.501C4 .674 4.673.001 5.5.001L14.5.001C15.327.001 16 .674 16 1.501L16 16.501C16 17.328 15.327 18.001 14.5 18.001zM6 16.001L14 16.001 14 2.001 6 2.001 6 16.001zM3 16.001L2 16.001C.896 16.001 0 15.104 0 14.001L0 4.001C0 2.899.896 2.001 2 2.001L3 2.001 3 4.001 2 4.001 2 14.001 3 14.001 3 16.001zM18 16.001L17 16.001 17 14.001 18 14.001 18 4.001 17 4.001 17 2.001 18 2.001C19.104 2.001 20 2.899 20 4.001L20 14.001C20 15.104 19.104 16.001 18 16.001z\"\n            ></path>\n          </g>\n        </g>\n\n        <g id=\"view-headline\" fill-rule=\"evenodd\">\n          <g fill-rule=\"nonzero\" transform=\"translate(3 2)\">\n            <path\n              d=\"M16 6.001L2 6.001C.896 6.001 0 5.104 0 4.001L0 2.001C0 .899.896.001 2 .001L16 .001C17.104.001 18 .899 18 2.001L18 4.001C18 5.104 17.104 6.001 16 6.001zM2 2.001L2 4.001 16 4.001 16 2.001 2 2.001zM16 13.001L2 13.001C.896 13.001 0 12.104 0 11.001L0 9.001C0 7.899.896 7.001 2 7.001L16 7.001C17.104 7.001 18 7.899 18 9.001L18 11.001C18 12.104 17.104 13.001 16 13.001zM2 9.001L2 11.001 16 11.001 16 9.001 2 9.001zM16 20.001L2 20.001C.896 20.001 0 19.104 0 18.001L0 16.001C0 14.898.896 14.001 2 14.001L16 14.001C17.104 14.001 18 14.898 18 16.001L18 18.001C18 19.104 17.104 20.001 16 20.001zM2 16.001L2 18.001 16 18.001 16 16.001 2 16.001z\"\n            ></path>\n          </g>\n        </g>\n\n        <g id=\"view-list\" fill-rule=\"evenodd\">\n          <g fill-rule=\"nonzero\" transform=\"translate(2 2)\">\n            <path\n              d=\"M18 6L9 6C7.896 6 7 5.103 7 4L7 2C7 .897 7.896 0 9 0L18 0C19.104 0 20 .897 20 2L20 4C20 5.103 19.104 6 18 6zM9 2L9 4 17.997 4 18 2 9 2zM18 13L9 13C7.896 13 7 12.103 7 11L7 9C7 7.897 7.896 7 9 7L18 7C19.104 7 20 7.897 20 9L20 11C20 12.103 19.104 13 18 13zM9 9L9 11 17.997 11 18 9 9 9zM18 20L9 20C7.896 20 7 19.103 7 18L7 16C7 14.897 7.896 14 9 14L18 14C19.104 14 20 14.897 20 16L20 18C20 19.103 19.104 20 18 20zM9 16L9 18 17.997 18 18 16 9 16zM4 6L2 6C.896 6 0 5.103 0 4L0 2C0 .897.896 0 2 0L4 0C5.104 0 6 .897 6 2L6 4C6 5.103 5.104 6 4 6zM2 2L2 4 3.997 4 4 2 2 2zM4 13L2 13C.896 13 0 12.103 0 11L0 9C0 7.897.896 7 2 7L4 7C5.104 7 6 7.897 6 9L6 11C6 12.103 5.104 13 4 13zM2 9L2 11 3.997 11 4 9 2 9zM4 20L2 20C.896 20 0 19.103 0 18L0 16C0 14.897.896 14 2 14L4 14C5.104 14 6 14.897 6 16L6 18C6 19.103 5.104 20 4 20zM2 16L2 18 3.997 18 4 16 2 16z\"\n            ></path>\n          </g>\n        </g>\n\n        <g id=\"view-thumbnails\" fill-rule=\"evenodd\">\n          <g fill-rule=\"nonzero\" transform=\"translate(2 2)\">\n            <path\n              d=\"M4 6.001L2 6.001C.896 6.001 0 5.104 0 4.001L0 2.001C0 .899.896.001 2 .001L4 .001C5.104.001 6 .899 6 2.001L6 4.001C6 5.104 5.104 6.001 4 6.001zM2 2.001L2 4.001 3.997 4.001 4 2.001 2 2.001zM4 13.001L2 13.001C.896 13.001 0 12.104 0 11.001L0 9.001C0 7.899.896 7.001 2 7.001L4 7.001C5.104 7.001 6 7.899 6 9.001L6 11.001C6 12.104 5.104 13.001 4 13.001zM2 9.001L2 11.001 3.997 11.001 4 9.001 2 9.001zM4 20.001L2 20.001C.896 20.001 0 19.104 0 18.001L0 16.001C0 14.898.896 14.001 2 14.001L4 14.001C5.104 14.001 6 14.898 6 16.001L6 18.001C6 19.104 5.104 20.001 4 20.001zM2 16.001L2 18.001 3.997 18.001 4 16.001 2 16.001zM11 6.001L9 6.001C7.896 6.001 7 5.104 7 4.001L7 2.001C7 .899 7.896.001 9 .001L11 .001C12.104.001 13 .899 13 2.001L13 4.001C13 5.104 12.104 6.001 11 6.001zM9 2.001L9 4.001 10.997 4.001 11 2.001 9 2.001zM11 13.001L9 13.001C7.896 13.001 7 12.104 7 11.001L7 9.001C7 7.899 7.896 7.001 9 7.001L11 7.001C12.104 7.001 13 7.899 13 9.001L13 11.001C13 12.104 12.104 13.001 11 13.001zM9 9.001L9 11.001 10.997 11.001 11 9.001 9 9.001zM11 20.001L9 20.001C7.896 20.001 7 19.104 7 18.001L7 16.001C7 14.898 7.896 14.001 9 14.001L11 14.001C12.104 14.001 13 14.898 13 16.001L13 18.001C13 19.104 12.104 20.001 11 20.001zM9 16.001L9 18.001 10.997 18.001 11 16.001 9 16.001zM18 6.001L16 6.001C14.896 6.001 14 5.104 14 4.001L14 2.001C14 .899 14.896.001 16 .001L18 .001C19.104.001 20 .899 20 2.001L20 4.001C20 5.104 19.104 6.001 18 6.001zM16 2.001L16 4.001 17.997 4.001 18 2.001 16 2.001zM18 13.001L16 13.001C14.896 13.001 14 12.104 14 11.001L14 9.001C14 7.899 14.896 7.001 16 7.001L18 7.001C19.104 7.001 20 7.899 20 9.001L20 11.001C20 12.104 19.104 13.001 18 13.001zM16 9.001L16 11.001 17.997 11.001 18 9.001 16 9.001zM18 20.001L16 20.001C14.896 20.001 14 19.104 14 18.001L14 16.001C14 14.898 14.896 14.001 16 14.001L18 14.001C19.104 14.001 20 14.898 20 16.001L20 18.001C20 19.104 19.104 20.001 18 20.001zM16 16.001L16 18.001 17.997 18.001 18 16.001 16 16.001z\"\n            ></path>\n          </g>\n        </g>\n\n        <g id=\"view-tiles\" fill-rule=\"evenodd\">\n          <g fill-rule=\"nonzero\" transform=\"translate(2 2)\">\n            <path\n              d=\"M7 9.001L2 9.001C.896 9.001 0 8.104 0 7.001L0 2.001C0 .899.896.001 2 .001L7 .001C8.104.001 9 .899 9 2.001L9 7.001C9 8.104 8.104 9.001 7 9.001zM2 2.001L2 7.001 6.997 7.001 7 2.001 2 2.001 2 2.001zM18 9.001L13 9.001C11.896 9.001 11 8.104 11 7.001L11 2.001C11 .899 11.896.001 13 .001L18 .001C19.104.001 20 .899 20 2.001L20 7.001C20 8.104 19.104 9.001 18 9.001zM13 2.001L13 7.001 17.997 7.001 18 2.001 13 2.001 13 2.001zM7 20.001L2 20.001C.896 20.001 0 19.104 0 18.001L0 13.001C0 11.899.896 11.001 2 11.001L7 11.001C8.104 11.001 9 11.899 9 13.001L9 18.001C9 19.104 8.104 20.001 7 20.001zM2 13.001L2 18.001 6.997 18.001 7 13.001 2 13.001 2 13.001zM18 20.001L13 20.001C11.896 20.001 11 19.104 11 18.001L11 13.001C11 11.899 11.896 11.001 13 11.001L18 11.001C19.104 11.001 20 11.899 20 13.001L20 18.001C20 19.104 19.104 20.001 18 20.001zM13 13.001L13 18.001 17.997 18.001 18 13.001 13 13.001 13 13.001z\"\n            ></path>\n          </g>\n        </g>\n\n        <g id=\"view-justified\" fill-rule=\"evenodd\">\n          <path\n            fill-rule=\"nonzero\"\n            d=\"M19,22 L5,22 C3.896,22 3,21.103 3,20 L3,18 C3,16.897 3.896,16 5,16 L19,16 C20.104,16 21,16.897 21,18 L21,20 C21,21.103 20.104,22 19,22 Z M5,18 L5,20 L19,20 L19,18 L5,18 Z M7,8 L5,8 C3.896,8 3,7.103 3,6 L3,4 C3,2.898 3.896,2 5,2 L7,2 C8.104,2 9,2.898 9,4 L9,6 C9,7.103 8.104,8 7,8 Z M5,4 L5,6 L7,6 L7,4 L5,4 Z M19,15 L17,15 C15.896,15 15,14.103 15,13 L15,11 C15,9.898 15.896,9 17,9 L19,9 C20.104,9 21,9.898 21,11 L21,13 C21,14.103 20.104,15 19,15 Z M17,11 L17,13 L19,13 L19,11 L17,11 Z M11,15 L5,15 C3.896,15 3,14.103 3,13 L3,11 C3,9.898 3.896,9 5,9 L11,9 C12.104,9 13,9.898 13,11 L13,13 C13,14.103 12.104,15 11,15 Z M5,11 L5,13 L11,13 L11,11 L5,11 Z M19,8 L13,8 C11.896,8 11,7.103 11,6 L11,4 C11,2.898 11.896,2 13,2 L19,2 C20.104,2 21,2.898 21,4 L21,6 C21,7.103 20.104,8 19,8 Z M13,4 L13,6 L19,6 L19,4 L13,4 Z\"\n          ></path>\n        </g>\n\n        <g id=\"workflow\">\n          <path\n            d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n          ></path>\n        </g>\n\n        <g id=\"csv-export\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <path\n            d=\"M13.4925049,2.5 L5.41176471,2.5 C4.90954418,2.5 4.5,2.91441971 4.5,3.42857143 L4.5,20.5714286 C4.5,21.0855803 4.90954418,21.5 5.41176471,21.5 L18.5882353,21.5 C19.0904558,21.5 19.5,21.0855803 19.5,20.5714286 L19.5,8.5849653 C19.5,8.33745156 19.4029774,8.10042986 19.2308645,7.92626796 L14.1351341,2.76987409 C13.9641525,2.59685705 13.7330699,2.5 13.4925049,2.5 Z\"\n            id=\"Path\"\n            stroke=\"#3A3A54\"\n            fill-rule=\"nonzero\"\n          ></path>\n          <polygon\n            id=\"Path\"\n            fill=\"#3A3A54\"\n            fill-rule=\"nonzero\"\n            points=\"13.4117647 8.19047619 13.4117647 2.49495695 18.9916921 8.19047619\"\n          ></polygon>\n          <path\n            d=\"M8.19428611,14.5497904 C7.83708404,14.5497904 7.56051173,14.685592 7.36456088,14.9571992 C7.16861003,15.2288064 7.07063608,15.6072952 7.07063608,16.0926769 C7.07063608,17.102684 7.44518234,17.60768 8.19428611,17.60768 C8.50862394,17.60768 8.88929358,17.5281612 9.33630645,17.3691212 L9.33630645,18.1746443 C8.96889861,18.3295534 8.55863267,18.4070067 8.10549633,18.4070067 C7.45436798,18.4070067 6.95633371,18.207177 6.61137857,17.8075117 C6.26642343,17.4078463 6.09394844,16.834175 6.09394844,16.0864806 C6.09394844,15.6155571 6.17865509,15.2029888 6.34807093,14.8487634 C6.51748677,14.494538 6.76089082,14.2229349 7.07829037,14.0339458 C7.39568992,13.8449567 7.76768478,13.7504636 8.19428611,13.7504636 C8.62905206,13.7504636 9.06585261,13.8568329 9.50470087,14.0695747 L9.1985292,14.8503125 C9.03115451,14.7697598 8.86276178,14.6995354 8.69334594,14.6396372 C8.5239301,14.579739 8.35757849,14.5497904 8.19428611,14.5497904 Z\"\n            id=\"Path\"\n            fill=\"#3A3A54\"\n            fill-rule=\"nonzero\"\n          ></path>\n          <path\n            d=\"M13.3487883,17.0871881 C13.3487883,17.4961481 13.2033582,17.8183541 12.9124937,18.0538158 C12.6216291,18.2892776 12.2169763,18.4070067 11.698523,18.4070067 C11.2208928,18.4070067 10.7983801,18.3161281 10.4309723,18.1343681 L10.4309723,17.2420964 C10.7330632,17.3784164 10.9887139,17.4744586 11.1979323,17.5302258 C11.4071507,17.5859931 11.598506,17.6138763 11.7720042,17.6138763 C11.980202,17.6138763 12.1399199,17.5736006 12.2511629,17.4930478 C12.3624058,17.4124951 12.4180264,17.2927006 12.4180264,17.1336606 C12.4180264,17.0448461 12.3935329,16.9658437 12.3445452,16.8966509 C12.2955575,16.8274582 12.2236079,16.7608483 12.1286942,16.6968192 C12.0337805,16.6327902 11.840384,16.5305517 11.5484989,16.3901008 C11.2749841,16.2599772 11.0698512,16.1350191 10.9330938,16.0152228 C10.7963364,15.8954264 10.6871363,15.7560104 10.6054901,15.5969704 C10.5238439,15.4379304 10.4830214,15.2520424 10.4830214,15.0393006 C10.4830214,14.6386025 10.6172254,14.3236254 10.8856372,14.09436 C11.154049,13.8650946 11.5250233,13.7504636 11.9985712,13.7504636 C12.2312629,13.7504636 12.4532351,13.7783469 12.6644946,13.8341141 C12.8757541,13.8898814 13.0967058,13.9683675 13.3273563,14.0695747 L13.0211846,14.8162326 C12.7823695,14.7170909 12.5848908,14.6478992 12.4287424,14.6086555 C12.2725941,14.5694119 12.1189995,14.5497904 11.9679541,14.5497904 C11.7883324,14.5497904 11.6505566,14.5921316 11.5546223,14.6768152 C11.458688,14.7614988 11.4107216,14.871999 11.4107216,15.0083189 C11.4107216,15.0930025 11.4301123,15.1668414 11.4688942,15.2298378 C11.5076762,15.2928341 11.5694202,15.3537641 11.6541281,15.4126296 C11.738836,15.471495 11.9393765,15.5773479 12.2557554,15.7301915 C12.6741921,15.932606 12.9609701,16.1355339 13.1160978,16.3389811 C13.2712256,16.5424283 13.3487883,16.7918282 13.3487883,17.0871881 Z\"\n            id=\"Path\"\n            fill=\"#3A3A54\"\n            fill-rule=\"nonzero\"\n          ></path>\n          <path\n            d=\"M17.1316414,13.8155251 L18.0899587,13.8155251 L16.5682855,18.3450434 L15.5334253,18.3450434 L14.0148138,13.8155251 L14.9731311,13.8155251 L15.8151032,16.5109293 C15.8620498,16.6699693 15.9105265,16.855341 15.9605348,17.0670501 C16.010543,17.2787591 16.0416702,17.4259205 16.0539171,17.5085387 C16.0763698,17.3185169 16.152912,16.9859838 16.2835459,16.5109293 L17.1316414,13.8155251 Z\"\n            id=\"Path\"\n            fill=\"#3A3A54\"\n            fill-rule=\"nonzero\"\n          ></path>\n        </g>\n\n        <g id=\"details\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <path\n            d=\"M10.6732855,10.8015782 L13.6469381,10.8015782 L13.6469381,18.2357097 L10.6732855,18.2357097 L10.6732855,10.8015782 Z M12,2.4 C6.7068,2.4 2.4,6.7068 2.4,12 C2.4,17.2932 6.7068,21.6 12,21.6 C17.2932,21.6 21.6,17.2932 21.6,12 C21.6,6.7068 17.2932,2.4 12,2.4 Z M12,24 C5.3832,24 0,18.618 0,12 C0,5.3844 5.3832,0 12,0 C18.6168,0 24,5.3832 24,12 C24,18.618 18.6168,24 12,24 Z M12.161209,9.27407786 C12.9896361,9.27407786 13.661209,8.60250498 13.661209,7.77407786 C13.661209,6.94565073 12.9896361,6.27407786 12.161209,6.27407786 C11.3327818,6.27407786 10.661209,6.94565073 10.661209,7.77407786 C10.661209,8.60250498 11.3327818,9.27407786 12.161209,9.27407786 Z\"\n            fill=\"#000000\"\n          ></path>\n        </g>\n      </defs>\n    </svg>\n  </iron-iconset-svg>\n`;\n\ndocument.head.appendChild(template.content);\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\n/*\n  Styles module to be used by action elements.\n\n  Custom property | Description | Default\n  ----------------|-------------|----------\n  `--nuxeo-action-button` | Mixin applied to the action element | { display: inline-block; }\n  `--nuxeo-action-button-label` | Mixin applied to action label | {}\n*/\nconst template = html`\n  <dom-module id=\"nuxeo-action-button-styles\">\n    <template>\n      <style>\n        :host {\n          display: inline-block;\n        }\n\n        .label {\n          @apply --nuxeo-action-button-label;\n        }\n\n        .action {\n          @apply --layout-horizontal;\n          @apply --layout-center;\n          cursor: pointer;\n          @apply --nuxeo-action-button;\n        }\n      </style>\n    </template>\n  </dom-module>\n`;\n\ndocument.head.appendChild(template.content);\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport 'nuxeo/nuxeo.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport './nuxeo-element.js';\n\n{\n  // A global map of clients with connectionId as key.\n  // This map is shared between all instances of nuxeo-connection.\n  const nxClients = {};\n\n  /**\n   * `nuxeo-connection` wraps a `nuxeo.Client`.\n   *\n   *     <nuxeo-connection\n   *       id=\"nx_connection\"\n   *       url=\"http://demo.nuxeo.com\"\n   *       username=\"Administrator\"\n   *       password=\"Administrator\">\n   *     </nuxeo-connection>\n   *\n   * Note: Elements that depend on a connectionId use `nx` as default.\n   *\n   * @memberof Nuxeo\n   */\n  class Connection extends Nuxeo.Element {\n    static get template() {\n      return html`\n        <style>\n          :host {\n            display: none;\n          }\n        </style>\n      `;\n    }\n\n    static get is() {\n      return 'nuxeo-connection';\n    }\n\n    static get properties() {\n      return {\n        /** A unique identifier for this connection. */\n        connectionId: {\n          type: String,\n          value: 'nx',\n        },\n\n        /** The base URL of the Nuxeo server. */\n        url: {\n          type: String,\n          value: '',\n          notify: true,\n        },\n\n        /** The repository name. */\n        repositoryName: {\n          type: String,\n          value: null,\n        },\n\n        /** The username. */\n        username: {\n          type: String,\n          value: null,\n        },\n\n        /** The password. */\n        password: {\n          type: String,\n          value: null,\n        },\n\n        /** The current user entity */\n        user: {\n          type: Object,\n          readOnly: true,\n          notify: true,\n        },\n\n        /** The platform version */\n        platformVersion: {\n          type: String,\n          readOnly: true,\n          notify: true,\n        },\n      };\n    }\n\n    /**\n     * Fired when the client is connected.\n     *\n     * @event connected\n     */\n\n    ready() {\n      super.ready();\n      this.connect().catch((error) => {\n        console.warn(`Nuxeo connection refused: ${error}`);\n      });\n    }\n\n    /**\n     * Connects nuxeo client.\n     */\n    connect() {\n      // Create the client if needed\n      // If we already have a client with the same connection info just keep it\n      const id = this.connectionId ? this.connectionId : Object.keys(nxClients)[0];\n      this.client = nxClients[id];\n      if (this.client) {\n        // if this instance does not have any properties set properties from the client\n        if (!this.url && !this.username && !this.password && !this.repositoryName) {\n          this.set('url', this.client._baseURL);\n          this.username = this.client._username;\n          this.password = this.client._password;\n          this.repositoryName = this.client._baseOptions.repositoryName;\n        }\n        // if properties match the existing client use it\n        if (\n          this.client._baseURL === this.url &&\n          this.client._username === this.username &&\n          this.client._password === this.password &&\n          this.client._baseOptions.repositoryName === this.repositoryName\n        ) {\n          // return the stored connection request promise and chain _handleConnected to update instance properties\n          return this.client._promise.then(this._handleConnected.bind(this));\n        }\n        // otherwise override the client with the new properties\n        this.client = null;\n      }\n      const options = {\n        baseURL: this.url,\n        schemas: ['*'],\n      };\n\n      if (this.username) {\n        options.auth = {\n          method: 'basic',\n          username: this.username,\n          password: this.password,\n        };\n      }\n\n      if (this.repositoryName) {\n        options.repositoryName = this.repositoryName;\n      }\n\n      // eslint-disable-next-line no-undef\n      nxClients[id] = this.client = this.client || new Nuxeo(options);\n\n      // share the connect promise between all instances (one per client)\n      this.client._promise = this.client.connect();\n\n      return this.client._promise.then(this._handleConnected.bind(this));\n    }\n\n    /**\n     *  Returns true if client is connected.\n     *  @type {Boolean}\n     */\n    get connected() {\n      return this.client && this.client.connected;\n    }\n\n    /**\n     * Returns true if there are active requests.\n     * @type {Boolean}\n     */\n    get active() {\n      return this.client && this.client._activeRequests > 0;\n    }\n\n    _handleConnected(nuxeo) {\n      if (this.client.connected) {\n        this._setUser(nuxeo.user);\n        this._setPlatformVersion(nuxeo.nuxeoVersion);\n        this.dispatchEvent(new CustomEvent('connected', { bubbles: true, composed: true }));\n      }\n      return nuxeo.user;\n    }\n\n    /**\n     * Returns a request object that allows REST requests to be executed on a Nuxeo Platform instance.\n     */\n    request() {\n      return this.connect().then(() => this.client.request());\n    }\n\n    /**\n     * Returns an operation object that allows operations to be executed on a Nuxeo Platform instance.\n     * @param {string} op The operation to be executed.\n     */\n    operation(op) {\n      return this.connect().then(() => this.client.operation(op));\n    }\n\n    /**\n     * Get the http resource.\n     * @param {string} url The url to be loaded.\n     */\n    http(url) {\n      return this.connect().then(() => this.client._http({ url }));\n    }\n\n    /**\n     * Returns an object that allows blobs to be uploaded to a Nuxeo Platform instance using the Batch Upload API.\n     */\n    batchUpload() {\n      return this.connect().then(() => this.client.batchUpload());\n    }\n  }\n\n  customElements.define(Connection.is, Connection);\n  Nuxeo.Connection = Connection;\n}\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport './nuxeo-element.js';\nimport './nuxeo-connection.js';\n\n{\n  /**\n   * `nuxeo-resource` allows managing REST on a Nuxeo server.\n   *\n   *     <nuxeo-resource auto\n   *         path=\"Document.Query\"\n   *         on-response=\"handleResponse\"></nuxeo-resource>\n   *\n   * With `auto` set to `true`, the GET method is executed whenever\n   * its `path` properties are changed.\n   *\n   * Note: The `params` attribute must be double quoted JSON.\n   *\n   * You can trigger a method explicitly by calling `get`, `post`, `put` or `delete` on the\n   * element.\n   *\n   * @memberof Nuxeo\n   */\n  class Resource extends Nuxeo.Element {\n    static get template() {\n      return html`\n        <style>\n          :host {\n            display: none;\n          }\n        </style>\n        <nuxeo-connection id=\"nx\" connection-id=\"{{connectionId}}\"></nuxeo-connection>\n      `;\n    }\n\n    static get is() {\n      return 'nuxeo-resource';\n    }\n\n    static get properties() {\n      return {\n        /** The id of a nuxeo-connection to use. */\n        connectionId: {\n          type: String,\n          value: '',\n        },\n\n        /** The success response status */\n        success: {\n          type: Boolean,\n          notify: true,\n        },\n\n        /** The error response */\n        error: {\n          type: Object,\n          notify: true,\n        },\n\n        /** If true, automatically execute the operation when either `path` or `params` changes. */\n        auto: {\n          type: Boolean,\n          value: false,\n        },\n\n        /** The HTTP method to use ('GET', 'POST', 'PUT', or 'DELETE'). Default is 'GET' */\n        method: {\n          type: String,\n          value: 'get',\n        },\n\n        /** The path of the resource. */\n        path: {\n          type: String,\n        },\n\n        /** The parameters to send. */\n        params: {\n          type: Object,\n          value: null,\n        },\n\n        /** The data to pass to the server. */\n        data: {\n          type: Object,\n          value: null,\n        },\n\n        /** The response from the server. */\n        response: {\n          type: Object,\n          value: null,\n          notify: true,\n        },\n\n        /** The `entity-type` of the resource. */\n        type: {\n          type: String,\n          value: '',\n        },\n\n        /** The headers of the request.\n         * 'Accept': 'text/plain,application/json' is already set by default.\n         */\n        headers: {\n          type: Object,\n          value: null,\n        },\n\n        /**\n         * The `content enricher` of the resource.\n         * Can be an object with entity type as keys or list or string with the entity type defined by\n         * `enrichers-entity`.\n         */\n        enrichers: {\n          type: Object,\n          value: {},\n        },\n\n        /** The `content enricher` entity-type of the resource. Default value for Nuxeo Document Model */\n        enrichersEntity: {\n          type: String,\n          value: 'document',\n        },\n\n        /** The `content type` of the request */\n        contentType: {\n          type: String,\n          value: 'application/json',\n        },\n\n        /**\n         * List of comma separated values of the document schemas to be returned.\n         * All document schemas are returned by default.\n         */\n        schemas: {\n          type: String,\n          value: '',\n        },\n\n        /**\n         * The delay in milliseconds to debounce the auto get call when path, params, etc. changes.\n         */\n        autoDelay: {\n          type: Number,\n          value: 300,\n        },\n\n        /**\n         * Active request count.\n         */\n        activeRequests: {\n          type: Number,\n          value: 0,\n          notify: true,\n          readOnly: true,\n        },\n\n        /**\n         * If true, documents changed by the call will be reindexed synchronously server side.\n         */\n        syncIndexing: Boolean,\n\n        /**\n         * True while requests are in flight.\n         */\n        loading: {\n          type: Boolean,\n          notify: true,\n          readOnly: true,\n          value: false,\n        },\n      };\n    }\n\n    static get observers() {\n      return [\n        '_autoGet(connectionId, auto, path, params, type, enrichers, enrichersEntity)',\n        '_isLoading(activeRequests)',\n      ];\n    }\n\n    /** Execute a 'GET' request */\n    get() {\n      this.method = 'get';\n      return this.execute();\n    }\n\n    /** Execute a 'POST' request */\n    post() {\n      this.method = 'post';\n      return this.execute();\n    }\n\n    /** Execute a 'PUT' request */\n    put() {\n      this.method = 'put';\n      return this.execute();\n    }\n\n    /** Execute a 'DELETE' request */\n    remove() {\n      this.method = 'delete';\n      return this.execute();\n    }\n\n    /** Execute the request */\n    execute() {\n      this._setActiveRequests(this.activeRequests + 1);\n      const options = { method: this.method || 'get' };\n\n      if (this.data && this.method !== 'get') {\n        options.body = this.data;\n      }\n\n      // Look up document schemas to be returned\n      if (this.schemas && this.schemas.length > 1) {\n        options.schemas = this.schemas.trim().split(/[\\s,]+/);\n      }\n      // Look up headers parameter\n      options.headers = this.headers || {};\n      // Force sync indexing\n      if (this.syncIndexing) {\n        options.headers.nx_es_sync = true;\n      }\n      // add support for plain text responses by default\n      options.headers.accept = 'text/plain,application/json';\n      // set default content-type\n      options.headers['Content-Type'] = this.contentType;\n      // Look up content enrichers parameter\n      if (this.enrichers) {\n        let enrich = {};\n        if (typeof this.enrichers === 'string') {\n          enrich[this.enrichersEntity] = this.enrichers;\n        } else {\n          enrich = this.enrichers;\n        }\n        Object.entries(enrich).forEach(([type, value]) => {\n          let v = value;\n          if (Array.isArray(value)) {\n            v = value.join(',');\n          }\n          options.headers[`enrichers-${type}`] = v;\n        });\n      }\n\n      // resolve with full response to skip default unmarshallers\n      options.resolveWithFullResponse = true;\n\n      const params = this.params || {};\n      return this.$.nx.request().then((request) => {\n        this._request = request;\n        return this._doExecute(params, options);\n      });\n    }\n\n    _autoGet() {\n      if (this.auto && this.path) {\n        this._debouncer = Debouncer.debounce(this._debouncer, timeOut.after(this.autoDelay), () => this.get());\n      }\n    }\n\n    _doExecute(params, options) {\n      return this._request\n        .path(this.path)\n        .queryParams(params)\n        .repositoryName(\n          this._request._baseOptions.repositoryName === 'default'\n            ? undefined\n            : this._request._baseOptions.repositoryName,\n        )\n        .execute(options)\n        .then((response) =>\n          response.text().then((text) => {\n            try {\n              return text ? JSON.parse(text) : {};\n            } catch (e) {\n              return { error: 'Invalid json' };\n            }\n          }),\n        )\n        .then((data) => {\n          this.dispatchEvent(\n            new CustomEvent('response', {\n              bubbles: true,\n              composed: true,\n              detail: {\n                response: data,\n              },\n            }),\n          );\n          this.response = data;\n          this.success = true;\n          this._setActiveRequests(this.activeRequests - 1);\n          return this.response;\n        })\n        .catch((error) => {\n          this.success = false;\n          this._setActiveRequests(this.activeRequests - 1);\n          if (error.response) {\n            if (error.response.status === 401) {\n              this.dispatchEvent(\n                new CustomEvent('unauthorized-request', {\n                  bubbles: true,\n                  composed: true,\n                  detail: error,\n                }),\n              );\n            }\n            return error.response.text().then((text) => {\n              if (text) {\n                try {\n                  this.error = JSON.parse(text);\n                  this.error.status = error.response.status;\n                  console.warn(`Resource request failed: ${this.error.message}`);\n                } catch (e) {\n                  this.error = { message: 'Invalid json', status: error.response.status };\n                }\n              } else {\n                this.error = { message: 'No message', status: error.response.status };\n              }\n              throw this.error;\n            });\n          }\n          throw error;\n        });\n    }\n\n    _isLoading() {\n      this._setLoading(this.activeRequests > 0);\n    }\n  }\n\n  customElements.define(Resource.is, Resource);\n  Nuxeo.Resource = Resource;\n}\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport './nuxeo-element.js';\nimport './nuxeo-resource.js';\n\n{\n  /**\n   * `nuxeo-page-provider` performs queries on the repository and provides paginated results.\n   *\n   *     <nuxeo-page-provider auto\n   *                          query=\"select * from Document\"\n   *                          page-size=\"5\"\n   *                          sort=\"dc:modified\">\n   *     </nuxeo-page-provider>\n   *\n   *     <nuxeo-page-provider auto page=\"1\"\n   *                          provider=\"default_search\"\n   *                          page-size=\"25\">\n   *     </nuxeo-page-provider>\n   *\n   *     <nuxeo-page-provider auto offset=\"2\"\n   *                          provider=\"default_search\"\n   *                          page-size=\"25\">\n   *     </nuxeo-page-provider>\n   *\n   * With `auto` set to `true`, results are fetched whenever\n   * the `provider`, `query`, `params`, `page` or `pageSize` properties are changed.\n   *\n   * When using current page `offset`, the `page` property is ignored.\n   *\n   * You can fetch results explicitly by calling `fetch` on the\n   * element.\n   *\n   * @memberof Nuxeo\n   * @demo demo/nuxeo-page-provider.html\n   */\n  class PageProvider extends Nuxeo.Element {\n    static get template() {\n      return html`\n        <style>\n          :host {\n            display: none;\n          }\n        </style>\n\n        <nuxeo-resource\n          id=\"nxResource\"\n          connection-id=\"[[connectionId]]\"\n          path=\"{{path}}\"\n          enrichers=\"{{enrichers}}\"\n          schemas=\"[[schemas]]\"\n          headers=\"{{headers}}\"\n        >\n        </nuxeo-resource>\n      `;\n    }\n\n    static get is() {\n      return 'nuxeo-page-provider';\n    }\n\n    static get properties() {\n      return {\n        /** The id of a nuxeo-connection to use. */\n        connectionId: {\n          type: String,\n          value: '',\n        },\n\n        /**\n         * If true, automatically execute the operation when either `provider` or `params` changes.\n         */\n        auto: {\n          type: Boolean,\n          value: false,\n        },\n\n        /**\n         * The delay in milliseconds to debounce the auto fetch call when provider, params, etc. changes.\n         */\n        autoDelay: {\n          type: Number,\n          value: 300,\n        },\n\n        /**\n         * The id of a page provider.\n         */\n        provider: {\n          type: String,\n          value: '',\n        },\n\n        /**\n         * The query.\n         */\n        query: {\n          type: String,\n        },\n\n        /**\n         * Computed path of the query endpoint to use.\n         */\n        path: {\n          type: String,\n          computed: '_computePath(provider, query)',\n        },\n\n        /**\n         * The query parameters.\n         */\n        params: {\n          type: Object,\n          value: {},\n        },\n\n        /**\n         * The number of results per page.\n         */\n        pageSize: {\n          type: Number,\n          value: -1,\n        },\n\n        /**\n         * The current page. Ignored when current page offset is set.\n         */\n        page: {\n          type: Number,\n          value: 1,\n        },\n\n        /**\n         * The current page offset.\n         */\n        offset: {\n          type: Number,\n          notify: true,\n        },\n\n        /**\n         * The current page entries.\n         */\n        currentPage: {\n          type: Array,\n          value: [],\n          notify: true,\n        },\n\n        /**\n         * Map of properties and direction 'asc' / 'desc'\n         */\n        sort: {\n          type: Object,\n          value: {},\n          notify: true,\n        },\n\n        /**\n         * Total number of pages.\n         */\n        numberOfPages: {\n          type: Number,\n          notify: true,\n        },\n\n        /**\n         * Total number of results.\n         */\n        resultsCount: {\n          type: Number,\n          notify: true,\n        },\n\n        /**\n         * Aggregations returned.\n         */\n        aggregations: {\n          type: Object,\n          value: {},\n          notify: true,\n        },\n\n        /**\n         * Quick filters state.\n         */\n        quickFilters: {\n          type: Array,\n          notify: true,\n        },\n\n        /**\n         * Returns true if a next page is available.\n         */\n        isNextPageAvailable: {\n          type: Boolean,\n          value: false,\n          notify: true,\n        },\n\n        /**\n         * Current page's size\n         */\n        currentPageSize: {\n          type: Number,\n          notify: true,\n        },\n\n        /**\n         * The `content enricher` of the resource.\n         * Can be an object with entity type as keys or list or string (which defaults to `document` entity type).\n         */\n        enrichers: {\n          type: Object,\n          value: {},\n        },\n\n        /**\n         * List of comma separated values of the document schemas to be returned.\n         * All document schemas are returned by default.\n         */\n        schemas: {\n          type: String,\n        },\n\n        /**\n         * The headers of the request.\n         * 'Accept': 'text/plain,application/json' is already set by default.\n         */\n        headers: {\n          type: Object,\n          value: null,\n        },\n\n        /**\n         * Fetch the aggregate bucket's key if it matches a user\n         * or directory entry and translate directory label.\n         */\n        fetchAggregates: {\n          type: Boolean,\n          value: false,\n          observer: '_fetchAggregatesChanged',\n        },\n\n        /**\n         * True while requests are in flight.\n         */\n        loading: {\n          type: Boolean,\n          notify: true,\n          readOnly: true,\n        },\n\n        /**\n         * If `true`, aggregagtes from page provider definition will not be computed.\n         */\n        skipAggregates: Boolean,\n      };\n    }\n\n    static get observers() {\n      return ['_autoFetch(auto, provider, query, params.*, pageSize, page, sort)'];\n    }\n\n    /**\n     * Fired when the current page is fetched.\n     *\n     * @event update\n     */\n\n    /**\n     * Fired if an error occurs when fetching the current page.\n     *\n     * @event error\n     */\n\n    ready() {\n      super.ready();\n      this.$.nxResource.addEventListener('loading-changed', () => {\n        this._setLoading(this.$.nxResource.loading);\n      });\n    }\n\n    /**\n     * Fetch the currentPage.\n     *\n     * @method fetch\n     * @param {Object} options\n     *   The options of the fetch:\n     *   - \"skipAggregates\" to do not compute aggregations (boolean)\n     */\n    fetch(options) {\n      if (!this.headers) {\n        this.headers = {};\n      }\n      if (this.skipAggregates || (options && options.skipAggregates)) {\n        this.headers.skipAggregates = 'true';\n      } else {\n        delete this.headers.skipAggregates;\n      }\n\n      const params = this._params;\n      // move named parameters\n      if (params.namedParameters) {\n        Object.assign(params, params.namedParameters);\n        delete params.namedParameters;\n      }\n      this.$.nxResource.params = params;\n      return this.$.nxResource\n        .execute()\n        .then((response) => {\n          this.currentPage = response.entries.slice(0);\n          this.numberOfPages = response.numberOfPages;\n          this.resultsCount = response.resultsCount;\n          if (!options || !options.skipAggregates) {\n            this.aggregations = response.aggregations;\n          }\n          this.quickFilters = response.quickFilters;\n          this.isNextPageAvailable = response.isNextPageAvailable;\n          this.currentPageSize = response.currentPageSize;\n          this.dispatchEvent(\n            new CustomEvent('update', {\n              bubbles: true,\n              composed: true,\n            }),\n          );\n          return response;\n        })\n        .catch((error) => {\n          this.dispatchEvent(\n            new CustomEvent('error', {\n              bubbles: true,\n              composed: true,\n              detail: {\n                error,\n              },\n            }),\n          );\n          throw error;\n        });\n    }\n\n    get _params() {\n      const params = {\n        currentPageIndex: this.page - 1,\n        offset: this.offset,\n        pageSize: this.pageSize,\n      };\n\n      // do not add empty sort info, to be able to fallback to default sort defined in page providers\n      const sortKeys = this._sortKeys;\n      if (sortKeys.length > 0) {\n        params.sortBy = this._sortKeys.join(',');\n        params.sortOrder = this._sortValues.join(',');\n      }\n\n      if (this.query) {\n        params.query = this.query;\n      }\n\n      if (this.params.queryParams) {\n        // these should've simply been passed as an array instead\n        params.queryParams = this.params.queryParams;\n      } else if (Array.isArray(this.params)) {\n        params.queryParams = this.params;\n      } else {\n        const namedParams = {};\n        Object.keys(this.params).forEach((key) => {\n          if (typeof this.params[key] === 'string') {\n            namedParams[key] = this.params[key];\n          } else if (this.params[key] != null) {\n            namedParams[key] = JSON.stringify(this.params[key]);\n          }\n        }, this);\n        params.namedParameters = namedParams;\n      }\n\n      // Append quick filters if any\n      if (this.quickFilters) {\n        const retainedFilters = [];\n        for (let i = 0; i < this.quickFilters.length; i++) {\n          if (this.quickFilters[i].active === true) {\n            retainedFilters.push(this.quickFilters[i].name);\n          }\n        }\n        params.quickFilters = retainedFilters.join(',');\n      }\n      return params;\n    }\n\n    get _sortKeys() {\n      return Object.keys(this.sort);\n    }\n\n    get _sortValues() {\n      return this._sortKeys.map((k) => this.sort[k]);\n    }\n\n    _autoFetch() {\n      // Reset the page if the query changes\n      if (\n        this.$.nxResource.params &&\n        this.query &&\n        this.query.length === 0 &&\n        this.query !== this.$.nxResource.params.query\n      ) {\n        this.page = 1;\n      }\n      if (this.auto && (this.query || this.provider)) {\n        // debounce in case of multiple param changes\n\n        this._debouncer = Debouncer.debounce(this._debouncer, timeOut.after(this.autoDelay), () => this.fetch());\n      }\n    }\n\n    _computePath(provider, query) {\n      let path = '';\n      if (query) {\n        path = '/search/lang/NXQL/execute';\n      } else if (provider) {\n        path = `/search/pp/${provider}/execute`;\n      }\n      return path;\n    }\n\n    _fetchAggregatesChanged() {\n      if (this.headers === null) {\n        this.headers = {};\n      }\n      if (this.fetchAggregates === true) {\n        this.headers['X-NXfetch.aggregate'] = 'key';\n      } else {\n        delete this.headers['X-NXfetch.aggregate'];\n      }\n    }\n  }\n\n  customElements.define(PageProvider.is, PageProvider);\n  Nuxeo.PageProvider = PageProvider;\n}\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport './nuxeo-element.js';\nimport './nuxeo-connection.js';\nimport './nuxeo-page-provider.js';\n\n{\n  /**\n   * `nuxeo-operation` allows calling an operation on a Nuxeo server.\n   *\n   *     <nuxeo-operation auto\n   *                      op=\"Document.Query\"\n   *                      params='{\"query\": \"select * from Document\"}'\n   *                      on-response=\"handleResponse\"\n   *                      enrichers=\"documentURL, preview\"></nuxeo-operation>\n   *\n   * With `auto` set to `true`, the operation is executed whenever\n   * its `url` or `params` properties are changed.\n   *\n   * Note: The `params` attribute must be double quoted JSON.\n   *\n   * You can trigger an operation explicitly by calling `execute` on the\n   * element.\n   *\n   * @memberof Nuxeo\n   */\n  class Operation extends Nuxeo.Element {\n    static get template() {\n      return html`\n        <style>\n          :host {\n            display: none;\n          }\n        </style>\n        <nuxeo-connection id=\"nx\" connection-id=\"{{connectionId}}\"></nuxeo-connection>\n      `;\n    }\n\n    static get is() {\n      return 'nuxeo-operation';\n    }\n\n    static get properties() {\n      return {\n        /** The id of a nuxeo-connection to use. */\n        connectionId: {\n          type: String,\n          value: '',\n        },\n\n        /** The success response status */\n        success: {\n          type: Boolean,\n          notify: true,\n        },\n\n        /** The error response status */\n        error: {\n          type: String,\n          notify: true,\n        },\n\n        /** The id the operation to call. */\n        op: {\n          type: String,\n          value: '',\n        },\n\n        /** The parameters to send. */\n        params: {\n          type: Object,\n          value: {},\n        },\n\n        /** The operation input. */\n        input: {\n          type: Object,\n        },\n\n        /** If true, automatically execute the operation when either `op` or `params` changes. */\n        auto: {\n          type: Boolean,\n          value: false,\n        },\n\n        /** The response from the server. */\n        response: {\n          type: Object,\n          value: null,\n          notify: true,\n        },\n\n        /** The headers of the request. */\n        headers: {\n          type: Object,\n          value: null,\n        },\n\n        /**\n         * The `content enricher` of the resource.\n         * Can be an object with entity type as keys or list or string with the entity type defined by\n         * `enrichers-entity`.\n         */\n        enrichers: {\n          type: Object,\n          value: {},\n        },\n\n        /** The `content enricher` entity-type of the resource. Default value for Nuxeo Document Model */\n        enrichersEntity: {\n          type: String,\n          value: 'document',\n        },\n\n        /**\n         * List of comma separated values of the document schemas to be returned.\n         * All document schemas are returned by default.\n         */\n        schemas: {\n          type: String,\n          value: '',\n        },\n\n        /**\n         * Active request count.\n         */\n        activeRequests: {\n          type: Number,\n          value: 0,\n          notify: true,\n          readOnly: true,\n        },\n\n        /**\n         * If true, documents changed by the call will be reindexed synchronously server side.\n         */\n        syncIndexing: Boolean,\n\n        /**\n         * True while requests are in flight.\n         */\n        loading: {\n          type: Boolean,\n          notify: true,\n          readOnly: true,\n        },\n\n        /**\n         * If true, execute the operation asynchronously.\n         */\n        async: {\n          type: Boolean,\n          value: false,\n        },\n\n        /**\n         * Poll interval in ms.\n         */\n        pollInterval: {\n          type: Number,\n          value: 1000,\n        },\n      };\n    }\n\n    static get observers() {\n      return ['_autoExecute(op, params, enrichers, enrichersEntity)', '_isLoading(activeRequests)'];\n    }\n\n    /**\n     * Fired when the operation returns with no errors.\n     *\n     * @event response\n     */\n    execute() {\n      this._setActiveRequests(this.activeRequests + 1);\n\n      const params = !this.params || typeof this.params === 'object' ? this.params : JSON.parse(this.params);\n\n      let { input } = this;\n\n      // support page provider as input to operations\n      // relies on parameters naming convention until provider marshaller is available\n      if (input instanceof Nuxeo.PageProvider) {\n        params.providerName = input.provider;\n        Object.assign(params, input._params);\n        input = undefined;\n      }\n\n      const options = {};\n      // Look up document schemas to be returned\n      if (this.schemas && this.schemas.length > 1) {\n        options.schemas = this.schemas.trim().split(/[\\s,]+/);\n      }\n      options.headers = this.headers || {};\n      // Force sync indexing\n      if (this.syncIndexing) {\n        options.headers.nx_es_sync = true;\n      }\n      // Look up content enrichers parameter\n      if (this.enrichers) {\n        let enrich = {};\n        if (typeof this.enrichers === 'string') {\n          enrich[this.enrichersEntity] = this.enrichers;\n        } else {\n          enrich = this.enrichers;\n        }\n        Object.entries(enrich).forEach(([type, value]) => {\n          let v = value;\n          if (Array.isArray(value)) {\n            v = value.join(',');\n          }\n          options.headers[`enrichers-${type}`] = v;\n        });\n      }\n      return this.$.nx.operation(this.op).then((operation) => {\n        this._operation = operation;\n        return this._doExecute(input, params, options);\n      });\n    }\n\n    _autoExecute() {\n      if (this.auto) {\n        this.execute();\n      }\n    }\n\n    _doExecute(input, params, options) {\n      if (params.context) {\n        this._operation = this._operation.context(params.context);\n      }\n\n      if (this.async) {\n        options.url = `${this._operation._computeRequestURL()}/@async`;\n        options.resolveWithFullResponse = true;\n      }\n\n      let promise = this._operation\n        .params(params)\n        .input(input)\n        .execute(options);\n\n      if (this.async) {\n        promise = promise.then((res) => {\n          if (res.status === 202) {\n            this.dispatchEvent(\n              new CustomEvent('poll-start', {\n                bubbles: true,\n                composed: true,\n              }),\n            );\n            return this._poll(res.headers.get('location'));\n          }\n          return res;\n        });\n      }\n\n      return promise\n        .then((data) => {\n          this.dispatchEvent(\n            new CustomEvent('response', {\n              bubbles: true,\n              composed: true,\n              detail: {\n                response: data,\n              },\n            }),\n          );\n          this.response = data;\n          this.success = true;\n          this._setActiveRequests(this.activeRequests - 1);\n          return this.response;\n        })\n        .catch((error) => {\n          if (error.response.status === 401) {\n            this.dispatchEvent(\n              new CustomEvent('unauthorized-request', {\n                bubbles: true,\n                composed: true,\n                detail: error,\n              }),\n            );\n          }\n          this.success = false;\n          this.error = error;\n          console.warn(`Operation request failed: ${error}`);\n          this._setActiveRequests(this.activeRequests - 1);\n          throw error;\n        });\n    }\n\n    _poll(url) {\n      return new Promise((resolve) => {\n        const fn = () => {\n          this.$.nx.http(url).then((res) => {\n            // 303 - see other (for result)\n            if (res.redirected) {\n              resolve(res);\n            } else {\n              window.setTimeout(() => fn(), this.pollInterval, url);\n            }\n          });\n        };\n        fn();\n      });\n    }\n\n    _isLoading() {\n      this._setLoading(this.activeRequests > 0);\n    }\n  }\n\n  customElements.define(Operation.is, Operation);\n  Nuxeo.Operation = Operation;\n}\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport { IronFormElementBehavior } from '@polymer/iron-form-element-behavior/iron-form-element-behavior.js';\nimport { IronValidatableBehavior } from '@polymer/iron-validatable-behavior/iron-validatable-behavior.js';\nimport '@nuxeo/nuxeo-elements/nuxeo-element.js';\nimport '@nuxeo/nuxeo-elements/nuxeo-operation.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\n\n/**\n * @license\n * Selectivity.js 3.0.5 <https://arendjr.github.io/selectivity/>\n * Copyright (c) 2014-2016 Arend van Beelen jr.\n *           (c) 2016 Speakap BV\n * Available under MIT license <https://github.com/arendjr/selectivity/blob/master/LICENSE>\n */\n(function (f) { if (typeof exports === 'object' && typeof module !== 'undefined') { module.exports = f(); } else if (typeof define === 'function' && define.amd) { define([], f); } else { let g; if (typeof window !== 'undefined') { g = window; } else if (typeof global !== 'undefined') { g = global; } else if (typeof self !== 'undefined') { g = self; } else { g = this; }g.selectivity = f(); } }(() => {\n  let define,\n    module,\n    exports; return (function e(t, n, r) { function s(o, u) { if (!n[o]) { if (!t[o]) { const a = typeof require === 'function' && require; if (!u && a) return a(o, !0); if (i) return i(o, !0); const f = new Error(`Cannot find module '${o}'`); throw (f.code = 'MODULE_NOT_FOUND', f); } const l = n[o] = {exports: {}}; t[o][0].call(l.exports, (e) => { const n = t[o][1][e]; return s(n || e); }, l, l.exports, e, t, n, r); } return n[o].exports; } var i = typeof require === 'function' && require; for (let o = 0; o < r.length; o++)s(r[o]); return s; }({\n    1: [function (_dereq_, module, exports) {\n      const root = _dereq_(36);\n\n      /** Built-in value references. */\n      const Symbol = root.Symbol;\n\n      module.exports = Symbol;\n\n    }, {36: 36}],\n    2: [function (_dereq_, module, exports) {\n      /**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\n      function apply(func, thisArg, args) {\n        switch (args.length) {\n          case 0: return func.call(thisArg);\n          case 1: return func.call(thisArg, args[0]);\n          case 2: return func.call(thisArg, args[0], args[1]);\n          case 3: return func.call(thisArg, args[0], args[1], args[2]);\n        }\n        return func.apply(thisArg, args);\n      }\n\n      module.exports = apply;\n\n    }, {}],\n    3: [function (_dereq_, module, exports) {\n      let baseTimes = _dereq_(15),\n        isArguments = _dereq_(46),\n        isArray = _dereq_(47),\n        isBuffer = _dereq_(49),\n        isIndex = _dereq_(27),\n        isTypedArray = _dereq_(56);\n\n      /** Used for built-in method references. */\n      const objectProto = Object.prototype;\n\n      /** Used to check objects for own properties. */\n      const hasOwnProperty = objectProto.hasOwnProperty;\n\n      /**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\n      function arrayLikeKeys(value, inherited) {\n        let isArr = isArray(value),\n          isArg = !isArr && isArguments(value),\n          isBuff = !isArr && !isArg && isBuffer(value),\n          isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n          skipIndexes = isArr || isArg || isBuff || isType,\n          result = skipIndexes ? baseTimes(value.length, String) : [],\n          length = result.length;\n\n        for (const key in value) {\n          if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n        // Safari 9 has enumerable `arguments.length` in strict mode.\n          (key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) || // Skip index properties.\n           isIndex(key, length))\n        ))) {\n            result.push(key);\n          }\n        }\n        return result;\n      }\n\n      module.exports = arrayLikeKeys;\n\n    }, {\n      15: 15, 27: 27, 46: 46, 47: 47, 49: 49, 56: 56,\n    }],\n    4: [function (_dereq_, module, exports) {\n      /**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\n      function arrayMap(array, iteratee) {\n        let index = -1,\n          length = array == null ? 0 : array.length,\n          result = Array(length);\n\n        while (++index < length) {\n          result[index] = iteratee(array[index], index, array);\n        }\n        return result;\n      }\n\n      module.exports = arrayMap;\n\n    }, {}],\n    5: [function (_dereq_, module, exports) {\n      let baseAssignValue = _dereq_(6),\n        eq = _dereq_(43);\n\n      /** Used for built-in method references. */\n      const objectProto = Object.prototype;\n\n      /** Used to check objects for own properties. */\n      const hasOwnProperty = objectProto.hasOwnProperty;\n\n      /**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\n      function assignValue(object, key, value) {\n        const objValue = object[key];\n        if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n          baseAssignValue(object, key, value);\n        }\n      }\n\n      module.exports = assignValue;\n\n    }, {43: 43, 6: 6}],\n    6: [function (_dereq_, module, exports) {\n      const defineProperty = _dereq_(21);\n\n      /**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\n      function baseAssignValue(object, key, value) {\n        if (key == '__proto__' && defineProperty) {\n          defineProperty(object, key, {\n            configurable: true,\n            enumerable: true,\n            value,\n            writable: true,\n          });\n        } else {\n          object[key] = value;\n        }\n      }\n\n      module.exports = baseAssignValue;\n\n    }, {21: 21}],\n    7: [function (_dereq_, module, exports) {\n      let Symbol = _dereq_(1),\n        getRawTag = _dereq_(25),\n        objectToString = _dereq_(33);\n\n      /** `Object#toString` result references. */\n      let nullTag = '[object Null]',\n        undefinedTag = '[object Undefined]';\n\n      /** Built-in value references. */\n      const symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n      /**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\n      function baseGetTag(value) {\n        if (value == null) {\n          return value === undefined ? undefinedTag : nullTag;\n        }\n        return (symToStringTag && symToStringTag in Object(value))\n          ? getRawTag(value)\n          : objectToString(value);\n      }\n\n      module.exports = baseGetTag;\n\n    }, {1: 1, 25: 25, 33: 33}],\n    8: [function (_dereq_, module, exports) {\n      let baseGetTag = _dereq_(7),\n        isObjectLike = _dereq_(53);\n\n      /** `Object#toString` result references. */\n      const argsTag = '[object Arguments]';\n\n      /**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\n      function baseIsArguments(value) {\n        return isObjectLike(value) && baseGetTag(value) == argsTag;\n      }\n\n      module.exports = baseIsArguments;\n\n    }, {53: 53, 7: 7}],\n    9: [function (_dereq_, module, exports) {\n      let isFunction = _dereq_(50),\n        isMasked = _dereq_(29),\n        isObject = _dereq_(52),\n        toSource = _dereq_(39);\n\n      /**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\n      const reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n      /** Used to detect host constructors (Safari). */\n      const reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n      /** Used for built-in method references. */\n      let funcProto = Function.prototype,\n        objectProto = Object.prototype;\n\n      /** Used to resolve the decompiled source of functions. */\n      const funcToString = funcProto.toString;\n\n      /** Used to check objects for own properties. */\n      const hasOwnProperty = objectProto.hasOwnProperty;\n\n      /** Used to detect if a method is native. */\n      const reIsNative = RegExp(`^${\n        funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n          .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?')}$`);\n\n      /**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\n      function baseIsNative(value) {\n        if (!isObject(value) || isMasked(value)) {\n          return false;\n        }\n        const pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n        return pattern.test(toSource(value));\n      }\n\n      module.exports = baseIsNative;\n\n    }, {\n      29: 29, 39: 39, 50: 50, 52: 52,\n    }],\n    10: [function (_dereq_, module, exports) {\n      let baseGetTag = _dereq_(7),\n        isLength = _dereq_(51),\n        isObjectLike = _dereq_(53);\n\n      /** `Object#toString` result references. */\n      let argsTag = '[object Arguments]',\n        arrayTag = '[object Array]',\n        boolTag = '[object Boolean]',\n        dateTag = '[object Date]',\n        errorTag = '[object Error]',\n        funcTag = '[object Function]',\n        mapTag = '[object Map]',\n        numberTag = '[object Number]',\n        objectTag = '[object Object]',\n        regexpTag = '[object RegExp]',\n        setTag = '[object Set]',\n        stringTag = '[object String]',\n        weakMapTag = '[object WeakMap]';\n\n      let arrayBufferTag = '[object ArrayBuffer]',\n        dataViewTag = '[object DataView]',\n        float32Tag = '[object Float32Array]',\n        float64Tag = '[object Float64Array]',\n        int8Tag = '[object Int8Array]',\n        int16Tag = '[object Int16Array]',\n        int32Tag = '[object Int32Array]',\n        uint8Tag = '[object Uint8Array]',\n        uint8ClampedTag = '[object Uint8ClampedArray]',\n        uint16Tag = '[object Uint16Array]',\n        uint32Tag = '[object Uint32Array]';\n\n      /** Used to identify `toStringTag` values of typed arrays. */\n      const typedArrayTags = {};\n      typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\n      typedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n      /**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\n      function baseIsTypedArray(value) {\n        return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n      }\n\n      module.exports = baseIsTypedArray;\n\n    }, {51: 51, 53: 53, 7: 7}],\n    11: [function (_dereq_, module, exports) {\n      let isPrototype = _dereq_(30),\n        nativeKeys = _dereq_(31);\n\n      /** Used for built-in method references. */\n      const objectProto = Object.prototype;\n\n      /** Used to check objects for own properties. */\n      const hasOwnProperty = objectProto.hasOwnProperty;\n\n      /**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\n      function baseKeys(object) {\n        if (!isPrototype(object)) {\n          return nativeKeys(object);\n        }\n        const result = [];\n        for (const key in Object(object)) {\n          if (hasOwnProperty.call(object, key) && key != 'constructor') {\n            result.push(key);\n          }\n        }\n        return result;\n      }\n\n      module.exports = baseKeys;\n\n    }, {30: 30, 31: 31}],\n    12: [function (_dereq_, module, exports) {\n      /**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\n      function basePropertyOf(object) {\n        return function (key) {\n          return object == null ? undefined : object[key];\n        };\n      }\n\n      module.exports = basePropertyOf;\n\n    }, {}],\n    13: [function (_dereq_, module, exports) {\n      let identity = _dereq_(45),\n        overRest = _dereq_(35),\n        setToString = _dereq_(37);\n\n      /**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\n      function baseRest(func, start) {\n        return setToString(overRest(func, start, identity), `${func}`);\n      }\n\n      module.exports = baseRest;\n\n    }, {35: 35, 37: 37, 45: 45}],\n    14: [function (_dereq_, module, exports) {\n      let constant = _dereq_(41),\n        defineProperty = _dereq_(21),\n        identity = _dereq_(45);\n\n      /**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\n      const baseSetToString = !defineProperty ? identity : function (func, string) {\n        return defineProperty(func, 'toString', {\n          configurable: true,\n          enumerable: false,\n          value: constant(string),\n          writable: true,\n        });\n      };\n\n      module.exports = baseSetToString;\n\n    }, {21: 21, 41: 41, 45: 45}],\n    15: [function (_dereq_, module, exports) {\n      /**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\n      function baseTimes(n, iteratee) {\n        let index = -1,\n          result = Array(n);\n\n        while (++index < n) {\n          result[index] = iteratee(index);\n        }\n        return result;\n      }\n\n      module.exports = baseTimes;\n\n    }, {}],\n    16: [function (_dereq_, module, exports) {\n      let Symbol = _dereq_(1),\n        arrayMap = _dereq_(4),\n        isArray = _dereq_(47),\n        isSymbol = _dereq_(55);\n\n      /** Used as references for various `Number` constants. */\n      const INFINITY = 1 / 0;\n\n      /** Used to convert symbols to primitives and strings. */\n      let symbolProto = Symbol ? Symbol.prototype : undefined,\n        symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n      /**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\n      function baseToString(value) {\n        // Exit early for strings to avoid a performance hit in some environments.\n        if (typeof value === 'string') {\n          return value;\n        }\n        if (isArray(value)) {\n          // Recursively convert values (susceptible to call stack limits).\n          return `${arrayMap(value, baseToString)}`;\n        }\n        if (isSymbol(value)) {\n          return symbolToString ? symbolToString.call(value) : '';\n        }\n        const result = (`${value}`);\n        return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n      }\n\n      module.exports = baseToString;\n\n    }, {\n      1: 1, 4: 4, 47: 47, 55: 55,\n    }],\n    17: [function (_dereq_, module, exports) {\n      /**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\n      function baseUnary(func) {\n        return function (value) {\n          return func(value);\n        };\n      }\n\n      module.exports = baseUnary;\n\n    }, {}],\n    18: [function (_dereq_, module, exports) {\n      let assignValue = _dereq_(5),\n        baseAssignValue = _dereq_(6);\n\n      /**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\n      function copyObject(source, props, object, customizer) {\n        const isNew = !object;\n        object || (object = {});\n\n        let index = -1,\n          length = props.length;\n\n        while (++index < length) {\n          const key = props[index];\n\n          let newValue = customizer\n            ? customizer(object[key], source[key], key, object, source)\n            : undefined;\n\n          if (newValue === undefined) {\n            newValue = source[key];\n          }\n          if (isNew) {\n            baseAssignValue(object, key, newValue);\n          } else {\n            assignValue(object, key, newValue);\n          }\n        }\n        return object;\n      }\n\n      module.exports = copyObject;\n\n    }, {5: 5, 6: 6}],\n    19: [function (_dereq_, module, exports) {\n      const root = _dereq_(36);\n\n      /** Used to detect overreaching core-js shims. */\n      const coreJsData = root['__core-js_shared__'];\n\n      module.exports = coreJsData;\n\n    }, {36: 36}],\n    20: [function (_dereq_, module, exports) {\n      let baseRest = _dereq_(13),\n        isIterateeCall = _dereq_(28);\n\n      /**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\n      function createAssigner(assigner) {\n        return baseRest((object, sources) => {\n          let index = -1,\n            length = sources.length,\n            customizer = length > 1 ? sources[length - 1] : undefined,\n            guard = length > 2 ? sources[2] : undefined;\n\n          customizer = (assigner.length > 3 && typeof customizer === 'function')\n            ? (length--, customizer)\n            : undefined;\n\n          if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n            customizer = length < 3 ? undefined : customizer;\n            length = 1;\n          }\n          object = Object(object);\n          while (++index < length) {\n            const source = sources[index];\n            if (source) {\n              assigner(object, source, index, customizer);\n            }\n          }\n          return object;\n        });\n      }\n\n      module.exports = createAssigner;\n\n    }, {13: 13, 28: 28}],\n    21: [function (_dereq_, module, exports) {\n      const getNative = _dereq_(24);\n\n      const defineProperty = (function () {\n        try {\n          const func = getNative(Object, 'defineProperty');\n          func({}, '', {});\n          return func;\n        } catch (e) {}\n      }());\n\n      module.exports = defineProperty;\n\n    }, {24: 24}],\n    22: [function (_dereq_, module, exports) {\n      const basePropertyOf = _dereq_(12);\n\n      /** Used to map characters to HTML entities. */\n      const htmlEscapes = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#39;',\n      };\n\n      /**\n * Used by `_.escape` to convert characters to HTML entities.\n *\n * @private\n * @param {string} chr The matched character to escape.\n * @returns {string} Returns the escaped character.\n */\n      const escapeHtmlChar = basePropertyOf(htmlEscapes);\n\n      module.exports = escapeHtmlChar;\n\n    }, {12: 12}],\n    23: [function (_dereq_, module, exports) {\n      (function (global) {\n        /** Detect free variable `global` from Node.js. */\n        const freeGlobal = typeof global === 'object' && global && global.Object === Object && global;\n\n        module.exports = freeGlobal;\n\n      }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {});\n    }, {}],\n    24: [function (_dereq_, module, exports) {\n      let baseIsNative = _dereq_(9),\n        getValue = _dereq_(26);\n\n      /**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\n      function getNative(object, key) {\n        const value = getValue(object, key);\n        return baseIsNative(value) ? value : undefined;\n      }\n\n      module.exports = getNative;\n\n    }, {26: 26, 9: 9}],\n    25: [function (_dereq_, module, exports) {\n      const Symbol = _dereq_(1);\n\n      /** Used for built-in method references. */\n      const objectProto = Object.prototype;\n\n      /** Used to check objects for own properties. */\n      const hasOwnProperty = objectProto.hasOwnProperty;\n\n      /**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n      const nativeObjectToString = objectProto.toString;\n\n      /** Built-in value references. */\n      const symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n      /**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\n      function getRawTag(value) {\n        let isOwn = hasOwnProperty.call(value, symToStringTag),\n          tag = value[symToStringTag];\n\n        try {\n          value[symToStringTag] = undefined;\n          var unmasked = true;\n        } catch (e) {}\n\n        const result = nativeObjectToString.call(value);\n        if (unmasked) {\n          if (isOwn) {\n            value[symToStringTag] = tag;\n          } else {\n            delete value[symToStringTag];\n          }\n        }\n        return result;\n      }\n\n      module.exports = getRawTag;\n\n    }, {1: 1}],\n    26: [function (_dereq_, module, exports) {\n      /**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\n      function getValue(object, key) {\n        return object == null ? undefined : object[key];\n      }\n\n      module.exports = getValue;\n\n    }, {}],\n    27: [function (_dereq_, module, exports) {\n      /** Used as references for various `Number` constants. */\n      const MAX_SAFE_INTEGER = 9007199254740991;\n\n      /** Used to detect unsigned integer values. */\n      const reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n      /**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\n      function isIndex(value, length) {\n        length = length == null ? MAX_SAFE_INTEGER : length;\n        return !!length &&\n    (typeof value === 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n      }\n\n      module.exports = isIndex;\n\n    }, {}],\n    28: [function (_dereq_, module, exports) {\n      let eq = _dereq_(43),\n        isArrayLike = _dereq_(48),\n        isIndex = _dereq_(27),\n        isObject = _dereq_(52);\n\n      /**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\n      function isIterateeCall(value, index, object) {\n        if (!isObject(object)) {\n          return false;\n        }\n        const type = typeof index;\n        if (type == 'number'\n          ? (isArrayLike(object) && isIndex(index, object.length))\n          : (type == 'string' && index in object)\n        ) {\n          return eq(object[index], value);\n        }\n        return false;\n      }\n\n      module.exports = isIterateeCall;\n\n    }, {\n      27: 27, 43: 43, 48: 48, 52: 52,\n    }],\n    29: [function (_dereq_, module, exports) {\n      const coreJsData = _dereq_(19);\n\n      /** Used to detect methods masquerading as native. */\n      const maskSrcKey = (function () {\n        const uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n        return uid ? (`Symbol(src)_1.${uid}`) : '';\n      }());\n\n      /**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\n      function isMasked(func) {\n        return !!maskSrcKey && (maskSrcKey in func);\n      }\n\n      module.exports = isMasked;\n\n    }, {19: 19}],\n    30: [function (_dereq_, module, exports) {\n      /** Used for built-in method references. */\n      const objectProto = Object.prototype;\n\n      /**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\n      function isPrototype(value) {\n        let Ctor = value && value.constructor,\n          proto = (typeof Ctor === 'function' && Ctor.prototype) || objectProto;\n\n        return value === proto;\n      }\n\n      module.exports = isPrototype;\n\n    }, {}],\n    31: [function (_dereq_, module, exports) {\n      const overArg = _dereq_(34);\n\n      /* Built-in method references for those with the same name as other `lodash` methods. */\n      const nativeKeys = overArg(Object.keys, Object);\n\n      module.exports = nativeKeys;\n\n    }, {34: 34}],\n    32: [function (_dereq_, module, exports) {\n      const freeGlobal = _dereq_(23);\n\n      /** Detect free variable `exports`. */\n      const freeExports = typeof exports === 'object' && exports && !exports.nodeType && exports;\n\n      /** Detect free variable `module`. */\n      const freeModule = freeExports && typeof module === 'object' && module && !module.nodeType && module;\n\n      /** Detect the popular CommonJS extension `module.exports`. */\n      const moduleExports = freeModule && freeModule.exports === freeExports;\n\n      /** Detect free variable `process` from Node.js. */\n      const freeProcess = moduleExports && freeGlobal.process;\n\n      /** Used to access faster Node.js helpers. */\n      const nodeUtil = (function () {\n        try {\n          return freeProcess && freeProcess.binding && freeProcess.binding('util');\n        } catch (e) {}\n      }());\n\n      module.exports = nodeUtil;\n\n    }, {23: 23}],\n    33: [function (_dereq_, module, exports) {\n      /** Used for built-in method references. */\n      const objectProto = Object.prototype;\n\n      /**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n      const nativeObjectToString = objectProto.toString;\n\n      /**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\n      function objectToString(value) {\n        return nativeObjectToString.call(value);\n      }\n\n      module.exports = objectToString;\n\n    }, {}],\n    34: [function (_dereq_, module, exports) {\n      /**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\n      function overArg(func, transform) {\n        return function (arg) {\n          return func(transform(arg));\n        };\n      }\n\n      module.exports = overArg;\n\n    }, {}],\n    35: [function (_dereq_, module, exports) {\n      const apply = _dereq_(2);\n\n      /* Built-in method references for those with the same name as other `lodash` methods. */\n      const nativeMax = Math.max;\n\n      /**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\n      function overRest(func, start, transform) {\n        start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n        return function () {\n          let args = arguments,\n            index = -1,\n            length = nativeMax(args.length - start, 0),\n            array = Array(length);\n\n          while (++index < length) {\n            array[index] = args[start + index];\n          }\n          index = -1;\n          const otherArgs = Array(start + 1);\n          while (++index < start) {\n            otherArgs[index] = args[index];\n          }\n          otherArgs[start] = transform(array);\n          return apply(func, this, otherArgs);\n        };\n      }\n\n      module.exports = overRest;\n\n    }, {2: 2}],\n    36: [function (_dereq_, module, exports) {\n      const freeGlobal = _dereq_(23);\n\n      /** Detect free variable `self`. */\n      const freeSelf = typeof self === 'object' && self && self.Object === Object && self;\n\n      /** Used as a reference to the global object. */\n      const root = freeGlobal || freeSelf || Function('return this')();\n\n      module.exports = root;\n\n    }, {23: 23}],\n    37: [function (_dereq_, module, exports) {\n      let baseSetToString = _dereq_(14),\n        shortOut = _dereq_(38);\n\n      /**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\n      const setToString = shortOut(baseSetToString);\n\n      module.exports = setToString;\n\n    }, {14: 14, 38: 38}],\n    38: [function (_dereq_, module, exports) {\n      /** Used to detect hot functions by number of calls within a span of milliseconds. */\n      let HOT_COUNT = 800,\n        HOT_SPAN = 16;\n\n      /* Built-in method references for those with the same name as other `lodash` methods. */\n      const nativeNow = Date.now;\n\n      /**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\n      function shortOut(func) {\n        let count = 0,\n          lastCalled = 0;\n\n        return function () {\n          let stamp = nativeNow(),\n            remaining = HOT_SPAN - (stamp - lastCalled);\n\n          lastCalled = stamp;\n          if (remaining > 0) {\n            if (++count >= HOT_COUNT) {\n              return arguments[0];\n            }\n          } else {\n            count = 0;\n          }\n          return func(...arguments);\n        };\n      }\n\n      module.exports = shortOut;\n\n    }, {}],\n    39: [function (_dereq_, module, exports) {\n      /** Used for built-in method references. */\n      const funcProto = Function.prototype;\n\n      /** Used to resolve the decompiled source of functions. */\n      const funcToString = funcProto.toString;\n\n      /**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\n      function toSource(func) {\n        if (func != null) {\n          try {\n            return funcToString.call(func);\n          } catch (e) {}\n          try {\n            return (`${func}`);\n          } catch (e) {}\n        }\n        return '';\n      }\n\n      module.exports = toSource;\n\n    }, {}],\n    40: [function (_dereq_, module, exports) {\n      let assignValue = _dereq_(5),\n        copyObject = _dereq_(18),\n        createAssigner = _dereq_(20),\n        isArrayLike = _dereq_(48),\n        isPrototype = _dereq_(30),\n        keys = _dereq_(57);\n\n      /** Used for built-in method references. */\n      const objectProto = Object.prototype;\n\n      /** Used to check objects for own properties. */\n      const hasOwnProperty = objectProto.hasOwnProperty;\n\n      /**\n * Assigns own enumerable string keyed properties of source objects to the\n * destination object. Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assignIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assign({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3 }\n */\n      const assign = createAssigner((object, source) => {\n        if (isPrototype(source) || isArrayLike(source)) {\n          copyObject(source, keys(source), object);\n          return;\n        }\n        for (const key in source) {\n          if (hasOwnProperty.call(source, key)) {\n            assignValue(object, key, source[key]);\n          }\n        }\n      });\n\n      module.exports = assign;\n\n    }, {\n      18: 18, 20: 20, 30: 30, 48: 48, 5: 5, 57: 57,\n    }],\n    41: [function (_dereq_, module, exports) {\n      /**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\n      function constant(value) {\n        return function () {\n          return value;\n        };\n      }\n\n      module.exports = constant;\n\n    }, {}],\n    42: [function (_dereq_, module, exports) {\n      let isObject = _dereq_(52),\n        now = _dereq_(58),\n        toNumber = _dereq_(60);\n\n      /** Error message constants. */\n      const FUNC_ERROR_TEXT = 'Expected a function';\n\n      /* Built-in method references for those with the same name as other `lodash` methods. */\n      let nativeMax = Math.max,\n        nativeMin = Math.min;\n\n      /**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\n      function debounce(func, wait, options) {\n        let lastArgs,\n          lastThis,\n          maxWait,\n          result,\n          timerId,\n          lastCallTime,\n          lastInvokeTime = 0,\n          leading = false,\n          maxing = false,\n          trailing = true;\n\n        if (typeof func !== 'function') {\n          throw new TypeError(FUNC_ERROR_TEXT);\n        }\n        wait = toNumber(wait) || 0;\n        if (isObject(options)) {\n          leading = !!options.leading;\n          maxing = 'maxWait' in options;\n          maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n          trailing = 'trailing' in options ? !!options.trailing : trailing;\n        }\n\n        function invokeFunc(time) {\n          let args = lastArgs,\n            thisArg = lastThis;\n\n          lastArgs = lastThis = undefined;\n          lastInvokeTime = time;\n          result = func.apply(thisArg, args);\n          return result;\n        }\n\n        function leadingEdge(time) {\n          // Reset any `maxWait` timer.\n          lastInvokeTime = time;\n          // Start the timer for the trailing edge.\n          timerId = setTimeout(timerExpired, wait);\n          // Invoke the leading edge.\n          return leading ? invokeFunc(time) : result;\n        }\n\n        function remainingWait(time) {\n          let timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime,\n            result = wait - timeSinceLastCall;\n\n          return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n        }\n\n        function shouldInvoke(time) {\n          let timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime;\n\n          // Either this is the first call, activity has stopped and we're at the\n          // trailing edge, the system time has gone backwards and we're treating\n          // it as the trailing edge, or we've hit the `maxWait` limit.\n          return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n        }\n\n        function timerExpired() {\n          const time = now();\n          if (shouldInvoke(time)) {\n            return trailingEdge(time);\n          }\n          // Restart the timer.\n          timerId = setTimeout(timerExpired, remainingWait(time));\n        }\n\n        function trailingEdge(time) {\n          timerId = undefined;\n\n          // Only invoke if we have `lastArgs` which means `func` has been\n          // debounced at least once.\n          if (trailing && lastArgs) {\n            return invokeFunc(time);\n          }\n          lastArgs = lastThis = undefined;\n          return result;\n        }\n\n        function cancel() {\n          if (timerId !== undefined) {\n            clearTimeout(timerId);\n          }\n          lastInvokeTime = 0;\n          lastArgs = lastCallTime = lastThis = timerId = undefined;\n        }\n\n        function flush() {\n          return timerId === undefined ? result : trailingEdge(now());\n        }\n\n        function debounced() {\n          let time = now(),\n            isInvoking = shouldInvoke(time);\n\n          lastArgs = arguments;\n          lastThis = this;\n          lastCallTime = time;\n\n          if (isInvoking) {\n            if (timerId === undefined) {\n              return leadingEdge(lastCallTime);\n            }\n            if (maxing) {\n              // Handle invocations in a tight loop.\n              timerId = setTimeout(timerExpired, wait);\n              return invokeFunc(lastCallTime);\n            }\n          }\n          if (timerId === undefined) {\n            timerId = setTimeout(timerExpired, wait);\n          }\n          return result;\n        }\n        debounced.cancel = cancel;\n        debounced.flush = flush;\n        return debounced;\n      }\n\n      module.exports = debounce;\n\n    }, {52: 52, 58: 58, 60: 60}],\n    43: [function (_dereq_, module, exports) {\n      /**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\n      function eq(value, other) {\n        return value === other || (value !== value && other !== other);\n      }\n\n      module.exports = eq;\n\n    }, {}],\n    44: [function (_dereq_, module, exports) {\n      let escapeHtmlChar = _dereq_(22),\n        toString = _dereq_(61);\n\n      /** Used to match HTML entities and HTML characters. */\n      let reUnescapedHtml = /[&<>\"']/g,\n        reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n      /**\n * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n * corresponding HTML entities.\n *\n * **Note:** No other characters are escaped. To escape additional\n * characters use a third-party library like [_he_](https://mths.be/he).\n *\n * Though the \">\" character is escaped for symmetry, characters like\n * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n * unless they're part of a tag or unquoted attribute value. See\n * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n * (under \"semi-related fun fact\") for more details.\n *\n * When working with HTML you should always\n * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n * XSS vectors.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escape('fred, barney, & pebbles');\n * // => 'fred, barney, &amp; pebbles'\n */\n      function escape(string) {\n        string = toString(string);\n        return (string && reHasUnescapedHtml.test(string))\n          ? string.replace(reUnescapedHtml, escapeHtmlChar)\n          : string;\n      }\n\n      module.exports = escape;\n\n    }, {22: 22, 61: 61}],\n    45: [function (_dereq_, module, exports) {\n      /**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\n      function identity(value) {\n        return value;\n      }\n\n      module.exports = identity;\n\n    }, {}],\n    46: [function (_dereq_, module, exports) {\n      let baseIsArguments = _dereq_(8),\n        isObjectLike = _dereq_(53);\n\n      /** Used for built-in method references. */\n      const objectProto = Object.prototype;\n\n      /** Used to check objects for own properties. */\n      const hasOwnProperty = objectProto.hasOwnProperty;\n\n      /** Built-in value references. */\n      const propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n      /**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\n      const isArguments = baseIsArguments(function () { return arguments; }()) ? baseIsArguments : function (value) {\n        return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n      };\n\n      module.exports = isArguments;\n\n    }, {53: 53, 8: 8}],\n    47: [function (_dereq_, module, exports) {\n      /**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\n      const isArray = Array.isArray;\n\n      module.exports = isArray;\n\n    }, {}],\n    48: [function (_dereq_, module, exports) {\n      let isFunction = _dereq_(50),\n        isLength = _dereq_(51);\n\n      /**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\n      function isArrayLike(value) {\n        return value != null && isLength(value.length) && !isFunction(value);\n      }\n\n      module.exports = isArrayLike;\n\n    }, {50: 50, 51: 51}],\n    49: [function (_dereq_, module, exports) {\n      let root = _dereq_(36),\n        stubFalse = _dereq_(59);\n\n      /** Detect free variable `exports`. */\n      const freeExports = typeof exports === 'object' && exports && !exports.nodeType && exports;\n\n      /** Detect free variable `module`. */\n      const freeModule = freeExports && typeof module === 'object' && module && !module.nodeType && module;\n\n      /** Detect the popular CommonJS extension `module.exports`. */\n      const moduleExports = freeModule && freeModule.exports === freeExports;\n\n      /** Built-in value references. */\n      const Buffer = moduleExports ? root.Buffer : undefined;\n\n      /* Built-in method references for those with the same name as other `lodash` methods. */\n      const nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n      /**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\n      const isBuffer = nativeIsBuffer || stubFalse;\n\n      module.exports = isBuffer;\n\n    }, {36: 36, 59: 59}],\n    50: [function (_dereq_, module, exports) {\n      let baseGetTag = _dereq_(7),\n        isObject = _dereq_(52);\n\n      /** `Object#toString` result references. */\n      let asyncTag = '[object AsyncFunction]',\n        funcTag = '[object Function]',\n        genTag = '[object GeneratorFunction]',\n        proxyTag = '[object Proxy]';\n\n      /**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\n      function isFunction(value) {\n        if (!isObject(value)) {\n          return false;\n        }\n        // The use of `Object#toString` avoids issues with the `typeof` operator\n        // in Safari 9 which returns 'object' for typed arrays and other constructors.\n        const tag = baseGetTag(value);\n        return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n      }\n\n      module.exports = isFunction;\n\n    }, {52: 52, 7: 7}],\n    51: [function (_dereq_, module, exports) {\n      /** Used as references for various `Number` constants. */\n      const MAX_SAFE_INTEGER = 9007199254740991;\n\n      /**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\n      function isLength(value) {\n        return typeof value === 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n      }\n\n      module.exports = isLength;\n\n    }, {}],\n    52: [function (_dereq_, module, exports) {\n      /**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\n      function isObject(value) {\n        const type = typeof value;\n        return value != null && (type == 'object' || type == 'function');\n      }\n\n      module.exports = isObject;\n\n    }, {}],\n    53: [function (_dereq_, module, exports) {\n      /**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\n      function isObjectLike(value) {\n        return value != null && typeof value === 'object';\n      }\n\n      module.exports = isObjectLike;\n\n    }, {}],\n    54: [function (_dereq_, module, exports) {\n      let baseGetTag = _dereq_(7),\n        isArray = _dereq_(47),\n        isObjectLike = _dereq_(53);\n\n      /** `Object#toString` result references. */\n      const stringTag = '[object String]';\n\n      /**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\n      function isString(value) {\n        return typeof value === 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n      }\n\n      module.exports = isString;\n\n    }, {47: 47, 53: 53, 7: 7}],\n    55: [function (_dereq_, module, exports) {\n      let baseGetTag = _dereq_(7),\n        isObjectLike = _dereq_(53);\n\n      /** `Object#toString` result references. */\n      const symbolTag = '[object Symbol]';\n\n      /**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\n      function isSymbol(value) {\n        return typeof value === 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n      }\n\n      module.exports = isSymbol;\n\n    }, {53: 53, 7: 7}],\n    56: [function (_dereq_, module, exports) {\n      let baseIsTypedArray = _dereq_(10),\n        baseUnary = _dereq_(17),\n        nodeUtil = _dereq_(32);\n\n      /* Node.js helper references. */\n      const nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n      /**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\n      const isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n      module.exports = isTypedArray;\n\n    }, {10: 10, 17: 17, 32: 32}],\n    57: [function (_dereq_, module, exports) {\n      let arrayLikeKeys = _dereq_(3),\n        baseKeys = _dereq_(11),\n        isArrayLike = _dereq_(48);\n\n      /**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\n      function keys(object) {\n        return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n      }\n\n      module.exports = keys;\n\n    }, {11: 11, 3: 3, 48: 48}],\n    58: [function (_dereq_, module, exports) {\n      const root = _dereq_(36);\n\n      /**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\n      const now = function () {\n        return root.Date.now();\n      };\n\n      module.exports = now;\n\n    }, {36: 36}],\n    59: [function (_dereq_, module, exports) {\n      /**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\n      function stubFalse() {\n        return false;\n      }\n\n      module.exports = stubFalse;\n\n    }, {}],\n    60: [function (_dereq_, module, exports) {\n      let isObject = _dereq_(52),\n        isSymbol = _dereq_(55);\n\n      /** Used as references for various `Number` constants. */\n      const NAN = 0 / 0;\n\n      /** Used to match leading and trailing whitespace. */\n      const reTrim = /^\\s+|\\s+$/g;\n\n      /** Used to detect bad signed hexadecimal string values. */\n      const reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n      /** Used to detect binary string values. */\n      const reIsBinary = /^0b[01]+$/i;\n\n      /** Used to detect octal string values. */\n      const reIsOctal = /^0o[0-7]+$/i;\n\n      /** Built-in method references without a dependency on `root`. */\n      const freeParseInt = parseInt;\n\n      /**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\n      function toNumber(value) {\n        if (typeof value === 'number') {\n          return value;\n        }\n        if (isSymbol(value)) {\n          return NAN;\n        }\n        if (isObject(value)) {\n          const other = typeof value.valueOf === 'function' ? value.valueOf() : value;\n          value = isObject(other) ? (`${other}`) : other;\n        }\n        if (typeof value !== 'string') {\n          return value === 0 ? value : +value;\n        }\n        value = value.replace(reTrim, '');\n        const isBinary = reIsBinary.test(value);\n        return (isBinary || reIsOctal.test(value))\n          ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n          : (reIsBadHex.test(value) ? NAN : +value);\n      }\n\n      module.exports = toNumber;\n\n    }, {52: 52, 55: 55}],\n    61: [function (_dereq_, module, exports) {\n      const baseToString = _dereq_(16);\n\n      /**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\n      function toString(value) {\n        return value == null ? '' : baseToString(value);\n      }\n\n      module.exports = toString;\n\n    }, {16: 16}],\n    62: [function (_dereq_, module, exports) {\n\n\n      const assign = _dereq_(40);\n\n      const EventListener = _dereq_(63);\n      const getItemSelector = _dereq_(79);\n      const matchesSelector = _dereq_(81);\n      const parseElement = _dereq_(82);\n      const removeElement = _dereq_(83);\n      const stopPropagation = _dereq_(84);\n      const toggleClass = _dereq_(85);\n\n      const Selectivity = _dereq_(76);\n\n      const HIGHLIGHT_CLASS = 'highlight';\n      const HIGHLIGHT_SELECTOR = `.${HIGHLIGHT_CLASS}`;\n      const LOAD_MORE_SELECTOR = '.selectivity-load-more';\n      const RESULT_ITEM_SELECTOR = '.selectivity-result-item';\n\n      const SCROLL_EVENTS = ['scroll', 'touchend', 'touchmove'];\n\n      function findClosestElementMatchingSelector(el, selector) {\n        while (el && !matchesSelector(el, selector)) {\n          el = el.parentElement;\n        }\n        return el || null;\n      }\n\n      /**\n * Selectivity Dropdown Constructor.\n *\n * @param selectivity Selectivity instance to which the dropdown belongs.\n * @param options Options object. Should have the following properties:\n *                highlightFirstItem - Set to false if you don't want the first item to be\n *                                     automatically highlighted (optional).\n *                items - Array of items to display.\n *                position - Callback for positioning the dropdown.\n *                query - Callback to fetch the items to display.\n *                showSearchInput - Boolean whether a search input should be shown.\n */\n      function SelectivityDropdown(selectivity, options) {\n        this.el = parseElement(selectivity.template('dropdown', {\n          dropdownCssClass: selectivity.options.dropdownCssClass,\n          searchInputPlaceholder: selectivity.options.searchInputPlaceholder,\n          showSearchInput: options.showSearchInput,\n        }));\n\n        /**\n     * DOM element to add the results to.\n     */\n        this.resultsContainer = this.$('.selectivity-results-container');\n\n        /**\n     * Boolean indicating whether more results are available than currently displayed in the\n     * dropdown.\n     */\n        this.hasMore = false;\n\n        /**\n     * The currently highlighted result item.\n     */\n        this.highlightedResult = null;\n\n        /**\n     * Boolean whether the load more link is currently highlighted.\n     */\n        this.loadMoreHighlighted = false;\n\n        /**\n     * Options passed to the dropdown constructor.\n     */\n        this.options = options;\n\n        /**\n     * The results displayed in the dropdown.\n     */\n        this.results = [];\n\n        /**\n     * Selectivity instance.\n     */\n        this.selectivity = selectivity;\n\n        this._closed = false;\n        this._lastMousePosition = {};\n\n        this.close = this.close.bind(this);\n        this.position = this.position.bind(this);\n\n        if (selectivity.options.closeOnSelect !== false) {\n          selectivity.events.on('selectivity-selecting', this.close);\n        }\n\n        this.addToDom();\n        this.showLoading();\n\n        if (options.showSearchInput) {\n          selectivity.initInput(this.$('.selectivity-search-input'));\n          selectivity.focus();\n        }\n\n        const events = {};\n        events[`click ${LOAD_MORE_SELECTOR}`] = this._loadMoreClicked;\n        events[`click ${RESULT_ITEM_SELECTOR}`] = this._resultClicked;\n        events[`mouseenter ${LOAD_MORE_SELECTOR}`] = this._loadMoreHovered;\n        events[`mouseenter ${RESULT_ITEM_SELECTOR}`] = this._resultHovered;\n\n        this.events = new EventListener(this.el, this);\n        this.events.on(events);\n\n        this._attachScrollListeners();\n        this._suppressWheel();\n\n        setTimeout(this.triggerOpen.bind(this), 1);\n      }\n\n      /**\n * Methods.\n */\n      assign(SelectivityDropdown.prototype, {\n        /**\n     * Convenience shortcut for this.el.querySelector(selector).\n     */\n        $(selector) {\n          return this.el.querySelector(selector);\n        },\n\n        /**\n     * Adds the dropdown to the DOM.\n     */\n        addToDom() {\n          this.selectivity.el.appendChild(this.el);\n        },\n\n        /**\n     * Closes the dropdown.\n     */\n        close() {\n          if (!this._closed) {\n            this._closed = true;\n\n            removeElement(this.el);\n\n            this.selectivity.events.off('selectivity-selecting', this.close);\n\n            this.triggerClose();\n\n            this._removeScrollListeners();\n          }\n        },\n\n        /**\n     * Highlights a result item.\n     *\n     * @param item The item to highlight.\n     * @param options Optional options object that may contain the following property:\n     *                reason - The reason why the result item is being highlighted. Possible\n     *                         values: 'current_value', 'first_result', 'hovered'.\n     */\n        highlight(item, options) {\n          toggleClass(this.$(HIGHLIGHT_SELECTOR), HIGHLIGHT_CLASS, false);\n          toggleClass(this.$(getItemSelector(RESULT_ITEM_SELECTOR, item.id)), HIGHLIGHT_CLASS, true);\n\n          this.highlightedResult = item;\n          this.loadMoreHighlighted = false;\n\n          this.selectivity.triggerEvent('selectivity-highlight', {\n            item,\n            id: item.id,\n            reason: (options && options.reason) || 'unspecified',\n          });\n        },\n\n        /**\n     * Highlights the load more link.\n     *\n     * @param item The item to highlight.\n     */\n        highlightLoadMore() {\n          toggleClass(this.$(HIGHLIGHT_SELECTOR), HIGHLIGHT_CLASS, false);\n          toggleClass(this.$(LOAD_MORE_SELECTOR), HIGHLIGHT_CLASS, true);\n\n          this.highlightedResult = null;\n          this.loadMoreHighlighted = true;\n        },\n\n        /**\n     * Loads a follow-up page with results after a search.\n     *\n     * This method should only be called after a call to search() when the callback has indicated\n     * more results are available.\n     */\n        loadMore() {\n          removeElement(this.$(LOAD_MORE_SELECTOR));\n          this.resultsContainer.innerHTML += this.selectivity.template('loading');\n\n          this.options.query({\n            callback: function (response) {\n              if (response && response.results) {\n                this._showResults(Selectivity.processItems(response.results), {\n                  add: true,\n                  hasMore: !!response.more,\n                });\n              } else {\n                throw new Error('callback must be passed a response object');\n              }\n            }.bind(this),\n            error: this._showResults.bind(this, [], { add: true }),\n            offset: this.results.length,\n            selectivity: this.selectivity,\n            term: this.term,\n          });\n        },\n\n        /**\n     * Positions the dropdown inside the DOM.\n     */\n        position() {\n          const position = this.options.position;\n          if (position) {\n            position(this.el, this.selectivity.el);\n          }\n\n          this._scrolled();\n        },\n\n        /**\n     * Renders an array of result items.\n     *\n     * @param items Array of result items.\n     *\n     * @return HTML-formatted string to display the result items.\n     */\n        renderItems(items) {\n          const selectivity = this.selectivity;\n          return items\n            .map(function (item) {\n              let result = selectivity.template(item.id ? 'resultItem' : 'resultLabel', item);\n              if (item.children) {\n                result += selectivity.template('resultChildren', {\n                  childrenHtml: this.renderItems(item.children),\n                });\n              }\n              return result;\n            }, this)\n            .join('');\n        },\n\n        /**\n     * Searches for results based on the term given.\n     *\n     * If an items array has been passed with the options to the Selectivity instance, a local\n     * search will be performed among those items. Otherwise, the query function specified in the\n     * options will be used to perform the search. If neither is defined, nothing happens.\n     *\n     * @param term Term to search for.\n     */\n        search(term) {\n          this.term = term;\n\n          this.options.query({\n            callback: function (response) {\n              if (response && response.results) {\n                if (this.options.items) {\n                  term = Selectivity.transformText(term);\n                  const matcher = this.selectivity.options.matcher || Selectivity.matcher;\n                  this._showResults(\n                    this.options.items\n                      .map((item) => matcher(item, term))\n                      .filter((item) => !!item),\n                    { term },\n                  );\n                } else {\n                  this._showResults(Selectivity.processItems(response.results), {\n                    hasMore: !!response.more,\n                    term,\n                  });\n                }\n              } else {\n                throw new Error('callback must be passed a response object');\n              }\n            }.bind(this),\n            error: this.showError.bind(this),\n            offset: 0,\n            selectivity: this.selectivity,\n            term,\n          });\n        },\n\n        /**\n     * Selects the highlighted item.\n     */\n        selectHighlight() {\n          if (this.highlightedResult) {\n            this.selectItem(this.highlightedResult.id);\n          } else if (this.loadMoreHighlighted) {\n            this.loadMore();\n          }\n        },\n\n        /**\n     * Selects the item with the given ID.\n     *\n     * @param id ID of the item to select.\n     */\n        selectItem(id) {\n          const item = Selectivity.findNestedById(this.results, id);\n          if (item && !item.disabled && item.selectable !== false) {\n            const options = { id, item };\n            if (this.selectivity.triggerEvent('selectivity-selecting', options)) {\n              this.selectivity.triggerEvent('selectivity-selected', options);\n            }\n          }\n        },\n\n        /**\n     * Shows an error message.\n     *\n     * @param message Error message to display.\n     * @param options Options object. May contain the following property:\n     *                escape - Set to false to disable HTML-escaping of the message. Useful if you\n     *                         want to set raw HTML as the message, but may open you up to XSS\n     *                         attacks if you're not careful with escaping user input.\n     */\n        showError(message, options) {\n          this.resultsContainer.innerHTML = this.selectivity.template('error', {\n            escape: !options || options.escape !== false,\n            message,\n          });\n\n          this.hasMore = false;\n          this.results = [];\n\n          this.highlightedResult = null;\n          this.loadMoreHighlighted = false;\n\n          this.position();\n        },\n\n        /**\n     * Shows a loading indicator in the dropdown.\n     */\n        showLoading() {\n          this.resultsContainer.innerHTML = this.selectivity.template('loading');\n\n          this.hasMore = false;\n          this.results = [];\n\n          this.highlightedResult = null;\n          this.loadMoreHighlighted = false;\n\n          this.position();\n        },\n\n        /**\n     * Shows the results from a search query.\n     *\n     * @param results Array of result items.\n     * @param options Options object. May contain the following properties:\n     *                add - True if the results should be added to any already shown results.\n     *                dropdown - The dropdown instance for which the results are meant.\n     *                hasMore - Boolean whether more results can be fetched using the query()\n     *                          function.\n     *                term - The search term for which the results are displayed.\n     */\n        showResults(results, options) {\n          if (options.add) {\n            removeElement(this.$('.selectivity-loading'));\n          } else {\n            this.resultsContainer.innerHTML = '';\n          }\n\n          const filteredResults = this.selectivity.filterResults(results);\n          let resultsHtml = this.renderItems(filteredResults);\n          if (options.hasMore) {\n            resultsHtml += this.selectivity.template('loadMore');\n          } else if (!resultsHtml && !options.add) {\n            resultsHtml = this.selectivity.template('noResults', { term: options.term });\n          }\n          this.resultsContainer.innerHTML += resultsHtml;\n\n          this.results = options.add ? this.results.concat(results) : results;\n\n          this.hasMore = options.hasMore;\n\n          const value = this.selectivity.getValue();\n          if (value && !Array.isArray(value)) {\n            const item = Selectivity.findNestedById(results, value);\n            if (item) {\n              this.highlight(item, { reason: 'current_value' });\n            }\n          } else if (\n            this.options.highlightFirstItem !== false &&\n            (!options.add || this.loadMoreHighlighted)\n          ) {\n            this._highlightFirstItem(filteredResults);\n          }\n\n          this.position();\n        },\n\n        /**\n     * Triggers the 'selectivity-close' event.\n     */\n        triggerClose() {\n          this.selectivity.triggerEvent('selectivity-close');\n        },\n\n        /**\n     * Triggers the 'selectivity-open' event.\n     */\n        triggerOpen() {\n          this.selectivity.triggerEvent('selectivity-open');\n        },\n\n        /**\n     * @private\n     */\n        _attachScrollListeners() {\n          for (let i = 0; i < SCROLL_EVENTS.length; i++) {\n            window.addEventListener(SCROLL_EVENTS[i], this.position, true);\n          }\n          window.addEventListener('resize', this.position);\n        },\n\n        /**\n     * @private\n     */\n        _highlightFirstItem(results) {\n          function findFirstItem(results) {\n            for (let i = 0, length = results.length; i < length; i++) {\n              const result = results[i];\n              if (result.id) {\n                return result;\n              } else if (result.children) {\n                const item = findFirstItem(result.children);\n                if (item) {\n                  return item;\n                }\n              }\n            }\n          }\n\n          const firstItem = findFirstItem(results);\n          if (firstItem) {\n            this.highlight(firstItem, { reason: 'first_result' });\n          } else {\n            this.highlightedResult = null;\n            this.loadMoreHighlighted = false;\n          }\n        },\n\n        /**\n     * @private\n     */\n        _loadMoreClicked(event) {\n          this.loadMore();\n\n          stopPropagation(event);\n        },\n\n        /**\n     * @private\n     */\n        _loadMoreHovered(event) {\n          if (\n            event.screenX === undefined ||\n            event.screenX !== this._lastMousePosition.x ||\n            event.screenY === undefined ||\n            event.screenY !== this._lastMousePosition.y\n          ) {\n            this.highlightLoadMore();\n\n            this._recordMousePosition(event);\n          }\n        },\n\n        /**\n     * @private\n     */\n        _recordMousePosition(event) {\n          this._lastMousePosition = { x: event.screenX, y: event.screenY };\n        },\n\n        /**\n     * @private\n     */\n        _removeScrollListeners() {\n          for (let i = 0; i < SCROLL_EVENTS.length; i++) {\n            window.removeEventListener(SCROLL_EVENTS[i], this.position, true);\n          }\n          window.removeEventListener('resize', this.position);\n        },\n\n        /**\n     * @private\n     */\n        _resultClicked(event) {\n          this.selectItem(this.selectivity.getRelatedItemId(event));\n\n          stopPropagation(event);\n        },\n\n        /**\n     * @private\n     */\n        _resultHovered(event) {\n          if (\n            !event.screenX ||\n            event.screenX !== this._lastMousePosition.x ||\n            !event.screenY ||\n            event.screenY !== this._lastMousePosition.y\n          ) {\n            const id = this.selectivity.getRelatedItemId(event);\n            const item = Selectivity.findNestedById(this.results, id);\n            if (item && !item.disabled) {\n              this.highlight(item, { reason: 'hovered' });\n            }\n\n            this._recordMousePosition(event);\n          }\n        },\n\n        /**\n     * @private\n     */\n        _scrolled() {\n          const el = this.$(LOAD_MORE_SELECTOR);\n          if (el && el.offsetTop - this.resultsContainer.scrollTop < this.el.clientHeight) {\n            this.loadMore();\n          }\n        },\n\n        /**\n     * @private\n     */\n        _showResults(results, options) {\n          this.showResults(results, assign({ dropdown: this }, options));\n        },\n\n        /**\n     * @private\n     */\n        _suppressWheel() {\n          const suppressWheelSelector = this.selectivity.options.suppressWheelSelector;\n          if (suppressWheelSelector === null) {\n            return;\n          }\n\n          const selector = suppressWheelSelector || '.selectivity-results-container';\n          this.events.on('wheel', selector, (event) => {\n            // Thanks to Troy Alford:\n            // http://stackoverflow.com/questions/5802467/prevent-scrolling-of-parent-element\n\n            const delta = event.deltaMode === 0 ? event.deltaY : event.deltaY * 40;\n            const el = findClosestElementMatchingSelector(event.target, selector);\n            const height = el.clientHeight;\n            const scrollHeight = el.scrollHeight;\n            const scrollTop = el.scrollTop;\n\n            function prevent() {\n              stopPropagation(event);\n              event.preventDefault();\n            }\n\n            if (scrollHeight > height) {\n              if (delta < -scrollTop) {\n                // Scrolling up, but this will take us past the top.\n                el.scrollTop = 0;\n                prevent();\n              } else if (delta > scrollHeight - height - scrollTop) {\n                // Scrolling down, but this will take us past the bottom.\n                el.scrollTop = scrollHeight;\n                prevent();\n              }\n            }\n          });\n        },\n      });\n\n      module.exports = Selectivity.Dropdown = SelectivityDropdown;\n\n    }, {\n      40: 40, 63: 63, 76: 76, 79: 79, 81: 81, 82: 82, 83: 83, 84: 84, 85: 85,\n    }],\n    63: [function (_dereq_, module, exports) {\n\n\n      const assign = _dereq_(40);\n      const isString = _dereq_(54);\n\n      const matchesSelector = _dereq_(81);\n\n      const CAPTURED_EVENTS = ['blur', 'focus', 'mouseenter', 'mouseleave', 'scroll'];\n\n      /**\n * Listens to events dispatched to an element or its children.\n *\n * @param el The element to listen to.\n * @param context Optional context in which to execute the callbacks.\n */\n      function EventListener(el, context) {\n        this.context = context || null;\n\n        this.el = el;\n\n        this.events = {};\n\n        this._onEvent = this._onEvent.bind(this);\n      }\n\n      assign(EventListener.prototype, {\n        /**\n     * Destructor.\n     *\n     * Removes all event listeners and cleans up all references.\n     */\n        destruct() {\n          Object.keys(this.events).forEach(function (eventName) {\n            const useCapture = CAPTURED_EVENTS.indexOf(eventName) > -1;\n            this.el.removeEventListener(eventName, this._onEvent, useCapture);\n          }, this);\n\n          this.context = null;\n          this.el = null;\n          this.events = null;\n        },\n\n        /**\n     * Stops listening to an event.\n     *\n     * The arguments are the same as for on(), but when no callback is given, all callbacks for the\n     * given event and class are discarded.\n     */\n        off(eventName, selector, callback) {\n          if (!isString(selector)) {\n            callback = selector;\n            selector = '';\n          }\n\n          if (callback) {\n            let events = this.events[eventName];\n            if (events) {\n              events = events[selector];\n              if (events) {\n                for (let i = 0; i < events.length; i++) {\n                  if (events[i] === callback) {\n                    events.splice(i, 1);\n                    i--;\n                  }\n                }\n              }\n            }\n          } else {\n            this.events[eventName][selector] = [];\n          }\n        },\n\n        /**\n     * Starts listening to an event.\n     *\n     * @param eventName Name of the event to listen to, in lower-case.\n     * @param selector Optional CSS selector. If given, only events inside a child element matching\n     *                 the selector are caught.\n     * @param callback Callback to invoke when the event is caught.\n     *\n     * Alternatively, the arguments may be provided using a map to start listening to multiple\n     * events at once. Here, the keys of the map are eventNames and the values are callbacks.\n     * Selectors may be specified by separating them from the event name with a space. For example:\n     *\n     *     .on({\n     *         'blur': this._blurred,\n     *         'click .some-input': this._inputClicked,\n     *     })\n     */\n        on(eventName, selector, callback) {\n          if (!isString(eventName)) {\n            const eventsMap = eventName;\n            for (const key in eventsMap) {\n              if (eventsMap.hasOwnProperty(key)) {\n                const split = key.split(' ');\n                if (split.length > 1) {\n                  this.on(split[0], split[1], eventsMap[key]);\n                } else {\n                  this.on(split[0], eventsMap[key]);\n                }\n              }\n            }\n            return;\n          }\n\n          if (!isString(selector)) {\n            callback = selector;\n            selector = '';\n          }\n\n          if (!this.events.hasOwnProperty(eventName)) {\n            const useCapture = CAPTURED_EVENTS.indexOf(eventName) > -1;\n            this.el.addEventListener(eventName, this._onEvent, useCapture);\n\n            this.events[eventName] = {};\n          }\n\n          if (!this.events[eventName].hasOwnProperty(selector)) {\n            this.events[eventName][selector] = [];\n          }\n\n          if (this.events[eventName][selector].indexOf(callback) < 0) {\n            this.events[eventName][selector].push(callback);\n          }\n        },\n\n        _onEvent(event) {\n          let isPropagationStopped = false;\n          const stopPropagation = event.stopPropagation;\n          event.stopPropagation = function () {\n            stopPropagation.call(event);\n            isPropagationStopped = true;\n          };\n\n          const context = this.context;\n          function callAll(callbacks) {\n            for (let i = 0; i < callbacks.length; i++) {\n              callbacks[i].call(context, event);\n            }\n          }\n\n          let target = event.target;\n          const events = this.events[event.type.toLowerCase()];\n          while (target && target !== this.el && !isPropagationStopped) {\n            for (const selector in events) {\n              if (\n                selector &&\n                    events.hasOwnProperty(selector) &&\n                    matchesSelector(target, selector)\n              ) {\n                callAll(events[selector]);\n              }\n            }\n            target = target.parentElement;\n          }\n\n          if (!isPropagationStopped && events.hasOwnProperty('')) {\n            callAll(events['']);\n          }\n        },\n      });\n\n      module.exports = EventListener;\n\n    }, {40: 40, 54: 54, 81: 81}],\n    64: [function (_dereq_, module, exports) {\n\n\n      const assign = _dereq_(40);\n\n      const MultipleInput = _dereq_(65);\n      const Selectivity = _dereq_(76);\n\n      function isValidEmail(email) {\n        const atIndex = email.indexOf('@');\n        if (atIndex === -1 || email.indexOf(' ') > -1) {\n          return false; // email needs to have an '@', and may not contain any spaces\n        }\n\n        const dotIndex = email.lastIndexOf('.');\n        if (dotIndex === -1) {\n          // no dot is fine, as long as the '@' is followed by at least two more characters\n          return atIndex < email.length - 2;\n        }\n\n        // but if there is a dot after the '@', it must be followed by at least two more characters\n        return dotIndex > atIndex ? dotIndex < email.length - 2 : true;\n      }\n\n      function lastWord(token, length) {\n        length = length === undefined ? token.length : length;\n        for (let i = length - 1; i >= 0; i--) {\n          if (/\\s/.test(token[i])) {\n            return token.slice(i + 1, length);\n          }\n        }\n        return token.slice(0, length);\n      }\n\n      function stripEnclosure(token, enclosure) {\n        if (token.charAt(0) === enclosure[0] && token.slice(-1) === enclosure[1]) {\n          return token.slice(1, -1).trim();\n        } else {\n          return token.trim();\n        }\n      }\n\n      function createEmailItem(token) {\n        let email = lastWord(token);\n        let name = token.slice(0, -email.length).trim();\n        if (isValidEmail(email)) {\n          email = stripEnclosure(stripEnclosure(email, '()'), '<>');\n          name = stripEnclosure(name, '\"\"').trim() || email;\n          return { id: email, text: name };\n        } else {\n          return token.trim() ? { id: token, text: token } : null;\n        }\n      }\n\n      function emailTokenizer(input, selection, createToken) {\n        function hasToken(input) {\n          if (input) {\n            for (let i = 0, length = input.length; i < length; i++) {\n              switch (input[i]) {\n                case ';':\n                case ',':\n                case '\\n':\n                  return true;\n                case ' ':\n                case '\\t':\n                  if (isValidEmail(lastWord(input, i))) {\n                    return true;\n                  }\n                  break;\n                case '\"':\n                  do {\n                    i++;\n                  } while (i < length && input[i] !== '\"');\n                  break;\n                default:\n                  continue;\n              }\n            }\n          }\n          return false;\n        }\n\n        function takeToken(input) {\n          for (let i = 0, length = input.length; i < length; i++) {\n            switch (input[i]) {\n              case ';':\n              case ',':\n              case '\\n':\n                return { term: input.slice(0, i), input: input.slice(i + 1) };\n              case ' ':\n              case '\\t':\n                if (isValidEmail(lastWord(input, i))) {\n                  return { term: input.slice(0, i), input: input.slice(i + 1) };\n                }\n                break;\n              case '\"':\n                do {\n                  i++;\n                } while (i < length && input[i] !== '\"');\n                break;\n              default:\n                continue;\n            }\n          }\n          return {};\n        }\n\n        while (hasToken(input)) {\n          const token = takeToken(input);\n          if (token.term) {\n            const item = createEmailItem(token.term);\n            if (item && !(item.id && Selectivity.findById(selection, item.id))) {\n              createToken(item);\n            }\n          }\n          input = token.input;\n        }\n\n        return input;\n      }\n\n      /**\n * EmailInput Constructor.\n *\n * @param options Options object. Accepts all options from the MultipleInput Constructor.\n */\n      function EmailInput(options) {\n        MultipleInput.call(\n          this,\n          assign(\n            {\n              createTokenItem: createEmailItem,\n              showDropdown: false,\n              tokenizer: emailTokenizer,\n            },\n            options,\n          ),\n        );\n\n        this.events.on('blur', function () {\n          const input = this.input;\n          if (input && isValidEmail(lastWord(input.value))) {\n            this.add(createEmailItem(input.value));\n          }\n        });\n      }\n\n      Selectivity.inherits(EmailInput, MultipleInput);\n\n      module.exports = Selectivity.Inputs.Email = EmailInput;\n\n    }, {40: 40, 65: 65, 76: 76}],\n    65: [function (_dereq_, module, exports) {\n\n\n      const assign = _dereq_(40);\n      const isString = _dereq_(54);\n\n      const Selectivity = _dereq_(76);\n      const getItemSelector = _dereq_(79);\n      const getKeyCode = _dereq_(80);\n      const parseElement = _dereq_(82);\n      const removeElement = _dereq_(83);\n      const stopPropagation = _dereq_(84);\n      const toggleClass = _dereq_(85);\n\n      const KEY_BACKSPACE = 8;\n      const KEY_DELETE = 46;\n      const KEY_ENTER = 13;\n\n      const INPUT_SELECTOR = '.selectivity-multiple-input';\n      const SELECTED_ITEM_SELECTOR = '.selectivity-multiple-selected-item';\n\n      const hasTouch = 'ontouchstart' in window;\n\n      /**\n * MultipleInput Constructor.\n */\n      function MultipleInput(options) {\n        Selectivity.call(\n          this,\n          assign(\n            {\n              // dropdowns for multiple-value inputs should open below the select box,\n              // unless there is not enough space below, but there is space enough above, then it should\n              // open upwards\n              positionDropdown(el, selectEl) {\n                const rect = selectEl.getBoundingClientRect();\n                const dropdownHeight = el.clientHeight;\n                const openUpwards =\n                        rect.bottom + dropdownHeight > window.innerHeight &&\n                        rect.top - dropdownHeight > 0;\n\n                assign(el.style, {\n                  left: `${rect.left}px`,\n                  top: `${openUpwards ? rect.top - dropdownHeight : rect.bottom}px`,\n                  width: `${rect.width}px`,\n                });\n              },\n\n              showSearchInputInDropdown: false,\n            },\n            options,\n          ),\n        );\n\n        this._reset();\n\n        const events = {\n          change: this.rerenderSelection,\n          click: this._clicked,\n          'selectivity-selected': this._resultSelected,\n        };\n        events[`change ${INPUT_SELECTOR}`] = stopPropagation;\n        events[`click ${SELECTED_ITEM_SELECTOR}`] = this._itemClicked;\n        events[`click ${SELECTED_ITEM_SELECTOR}-remove`] = this._itemRemoveClicked;\n        events[`keydown ${INPUT_SELECTOR}`] = this._keyHeld;\n        events[`keyup ${INPUT_SELECTOR}`] = this._keyReleased;\n        events[`paste ${INPUT_SELECTOR}`] = this._onPaste;\n\n        this.events.on(events);\n      }\n\n      /**\n * Methods.\n */\n      var callSuper = Selectivity.inherits(MultipleInput, Selectivity, {\n        /**\n     * Adds an item to the selection, if it's not selected yet.\n     *\n     * @param item The item to add. May be an item with 'id' and 'text' properties or just an ID.\n     */\n        add(item) {\n          const itemIsId = Selectivity.isValidId(item);\n          const id = itemIsId ? item : this.validateItem(item) && item.id;\n\n          if (this._value.indexOf(id) === -1) {\n            this._value.push(id);\n\n            if (itemIsId && this.options.initSelection) {\n              this.options.initSelection(\n                [id],\n                (data) => {\n                  if (this._value.indexOf(id) > -1) {\n                    item = this.validateItem(data[0]);\n                    this._data.push(item);\n\n                    this.triggerChange({ added: item });\n                  }\n                },\n              );\n            } else {\n              if (itemIsId) {\n                item = this.getItemForId(id);\n              }\n              this._data.push(item);\n\n              this.triggerChange({ added: item });\n            }\n          }\n\n          this.input.value = '';\n          this._updateInputWidth();\n        },\n\n        /**\n     * Clears the data and value.\n     */\n        clear() {\n          this.setData([]);\n        },\n\n        /**\n     * @inherit\n     */\n        filterResults(results) {\n          results = results.map(function (item) {\n            const result = {\n              id: item.id,\n              text: item.text,\n              item: item.item,\n            };\n            if (item.children) {\n              result.children = this.filterResults(item.children);\n            }\n            return result;\n          }, this);\n\n          return results.filter(function (item) {\n            return !Selectivity.findById(this._data, item.id);\n          }, this);\n        },\n\n        /**\n     * Returns the correct data for a given value.\n     *\n     * @param value The value to get the data for. Should be an array of IDs.\n     *\n     * @return The corresponding data. Will be an array of objects with 'id' and 'text' properties.\n     *         Note that if no items are defined, this method assumes the text labels will be equal\n     *         to the IDs.\n     */\n        getDataForValue(value) {\n          return value.map(this.getItemForId, this).filter((item) => !!item);\n        },\n\n        /**\n     * Returns the correct value for the given data.\n     *\n     * @param data The data to get the value for. Should be an array of objects with 'id' and 'text'\n     *             properties.\n     *\n     * @return The corresponding value. Will be an array of IDs.\n     */\n        getValueForData(data) {\n          return data.map((item) => item.id);\n        },\n\n        /**\n     * Removes an item from the selection, if it is selected.\n     *\n     * @param item The item to remove. May be an item with 'id' and 'text' properties or just an ID.\n     */\n        remove(item) {\n          const id = item.id || item;\n\n          let removedItem;\n          let index = Selectivity.findIndexById(this._data, id);\n          if (index > -1) {\n            removedItem = this._data[index];\n            this._data.splice(index, 1);\n          }\n\n          if (this._value[index] !== id) {\n            index = this._value.indexOf(id);\n          }\n          if (index > -1) {\n            this._value.splice(index, 1);\n          }\n\n          if (removedItem) {\n            this.triggerChange({ removed: removedItem });\n          }\n\n          if (id === this._highlightedItemId) {\n            this._highlightedItemId = null;\n          }\n\n          this._updateInputWidth();\n        },\n\n        /**\n     * Re-renders the selection.\n     *\n     * Normally the UI is automatically updated whenever the selection changes, but you may want to\n     * call this method explicitly if you've updated the selection with the triggerChange option set\n     * to false.\n     */\n        rerenderSelection(event) {\n          event = event || {};\n\n          if (event.added) {\n            this._renderSelectedItem(event.added);\n\n            this._scrollToBottom();\n          } else if (event.removed) {\n            removeElement(this.$(getItemSelector(SELECTED_ITEM_SELECTOR, event.removed.id)));\n          } else {\n            this._forEachSelectedItem(removeElement);\n\n            this._data.forEach(this._renderSelectedItem, this);\n\n            this._updateInputWidth();\n          }\n\n          if (event.added || event.removed) {\n            if (this.dropdown) {\n              this.dropdown.showResults(this.filterResults(this.dropdown.results), {\n                hasMore: this.dropdown.hasMore,\n              });\n            }\n\n            if (!hasTouch) {\n              this.focus();\n            }\n          }\n\n          this.positionDropdown();\n\n          this._updatePlaceholder();\n        },\n\n        /**\n     * @inherit\n     */\n        search(term) {\n          if (this.options.tokenizer) {\n            term = this.options.tokenizer(term, this._data, this.add.bind(this), this.options);\n\n            if (isString(term) && term !== this.input.value) {\n              this.input.value = term;\n            }\n          }\n\n          this._updateInputWidth();\n\n          if (this.dropdown) {\n            callSuper(this, 'search', term);\n          }\n        },\n\n        /**\n     * @inherit\n     */\n        setOptions(options) {\n          const wasEnabled = this.enabled;\n\n          callSuper(this, 'setOptions', options);\n\n          if (wasEnabled !== this.enabled) {\n            this._reset();\n          }\n        },\n\n        /**\n     * Validates data to set. Throws an exception if the data is invalid.\n     *\n     * @param data The data to validate. Should be an array of objects with 'id' and 'text'\n     *             properties.\n     *\n     * @return The validated data. This may differ from the input data.\n     */\n        validateData(data) {\n          if (data === null) {\n            return [];\n          } else if (Array.isArray(data)) {\n            return data.map(this.validateItem, this);\n          } else {\n            throw new Error('Data for MultiSelectivity instance should be an array');\n          }\n        },\n\n        /**\n     * Validates a value to set. Throws an exception if the value is invalid.\n     *\n     * @param value The value to validate. Should be an array of IDs.\n     *\n     * @return The validated value. This may differ from the input value.\n     */\n        validateValue(value) {\n          if (value === null) {\n            return [];\n          } else if (Array.isArray(value)) {\n            if (value.every(Selectivity.isValidId)) {\n              return value;\n            } else {\n              throw new Error('Value contains invalid IDs');\n            }\n          } else {\n            throw new Error('Value for MultiSelectivity instance should be an array');\n          }\n        },\n\n        /**\n     * @private\n     */\n        _backspacePressed() {\n          if (this.options.backspaceHighlightsBeforeDelete) {\n            if (this._highlightedItemId) {\n              this._deletePressed();\n            } else if (this._value.length) {\n              this._highlightItem(this._value.slice(-1)[0]);\n            }\n          } else if (this._value.length) {\n            this.remove(this._value.slice(-1)[0]);\n          }\n        },\n\n        /**\n     * @private\n     */\n        _clicked(event) {\n          if (this.enabled) {\n            if (this.options.showDropdown !== false) {\n              this.open();\n            } else {\n              this.focus();\n            }\n\n            stopPropagation(event);\n          }\n        },\n\n        /**\n     * @private\n     */\n        _createToken() {\n          const term = this.input.value;\n          const createTokenItem = this.options.createTokenItem;\n\n          if (term && createTokenItem) {\n            const item = createTokenItem(term);\n            if (item) {\n              this.add(item);\n            }\n          }\n        },\n\n        /**\n     * @private\n     */\n        _deletePressed() {\n          if (this._highlightedItemId) {\n            this.remove(this._highlightedItemId);\n          }\n        },\n\n        /**\n     * @private\n     */\n        _forEachSelectedItem(callback) {\n          Array.prototype.forEach.call(this.el.querySelectorAll(SELECTED_ITEM_SELECTOR), callback);\n        },\n\n        /**\n     * @private\n     */\n        _highlightItem(id) {\n          this._highlightedItemId = id;\n\n          this._forEachSelectedItem((el) => {\n            toggleClass(el, 'highlighted', el.getAttribute('data-item-id') === id);\n          });\n\n          if (!hasTouch) {\n            this.focus();\n          }\n        },\n\n        /**\n     * @private\n     */\n        _itemClicked(event) {\n          if (this.enabled) {\n            this._highlightItem(this.getRelatedItemId(event));\n          }\n        },\n\n        /**\n     * @private\n     */\n        _itemRemoveClicked(event) {\n          this.remove(this.getRelatedItemId(event));\n\n          stopPropagation(event);\n        },\n\n        /**\n     * @private\n     */\n        _keyHeld(event) {\n          this._originalValue = this.input.value;\n\n          if (getKeyCode(event) === KEY_ENTER && !event.ctrlKey) {\n            event.preventDefault();\n          }\n        },\n\n        /**\n     * @private\n     */\n        _keyReleased(event) {\n          const inputHadText = !!this._originalValue;\n          const keyCode = getKeyCode(event);\n\n          if (keyCode === KEY_ENTER && !event.ctrlKey) {\n            this._createToken();\n          } else if (keyCode === KEY_BACKSPACE && !inputHadText) {\n            this._backspacePressed();\n          } else if (keyCode === KEY_DELETE && !inputHadText) {\n            this._deletePressed();\n          }\n        },\n\n        /**\n     * @private\n     */\n        _onPaste() {\n          setTimeout(\n            () => {\n              this.search(this.input.value);\n\n              this._createToken();\n            },\n            10,\n          );\n        },\n\n        /**\n     * @private\n     */\n        _renderSelectedItem(item) {\n          const el = parseElement(this.template(\n            'multipleSelectedItem',\n            assign(\n              {\n                highlighted: item.id === this._highlightedItemId,\n                removable: !this.options.readOnly,\n              },\n              item,\n            ),\n          ));\n\n          this.input.parentNode.insertBefore(el, this.input);\n        },\n\n        /**\n     * @private\n     */\n        _reset() {\n          this.el.innerHTML = this.template('multipleSelectInput', { enabled: this.enabled });\n\n          this._highlightedItemId = null;\n\n          this.initInput(this.$(INPUT_SELECTOR));\n\n          this.rerenderSelection();\n        },\n\n        /**\n     * @private\n     */\n        _resultSelected(event) {\n          if (this._value.indexOf(event.id) === -1) {\n            this.add(event.item);\n          } else {\n            this.remove(event.item);\n          }\n        },\n\n        /**\n     * @private\n     */\n        _scrollToBottom() {\n          const inputContainer = this.$(`${INPUT_SELECTOR}-container`);\n          inputContainer.scrollTop = inputContainer.clientHeight;\n        },\n\n        /**\n     * @private\n     */\n        _updateInputWidth() {\n          const inputContent =\n            this.input.value || (!this._data.length && this.options.placeholder) || '';\n          this.input.setAttribute('size', inputContent.length + 2);\n\n          this.positionDropdown();\n        },\n\n        /**\n     * @private\n     */\n        _updatePlaceholder() {\n          const placeholder = (!this._data.length && this.options.placeholder) || '';\n          if (this.enabled) {\n            this.input.setAttribute('placeholder', placeholder);\n          } else {\n            this.$('.selectivity-placeholder').textContent = placeholder;\n          }\n        },\n      });\n\n      module.exports = Selectivity.Inputs.Multiple = MultipleInput;\n\n    }, {\n      40: 40, 54: 54, 76: 76, 79: 79, 80: 80, 82: 82, 83: 83, 84: 84, 85: 85,\n    }],\n    66: [function (_dereq_, module, exports) {\n\n\n      const assign = _dereq_(40);\n\n      const Selectivity = _dereq_(76);\n      const stopPropagation = _dereq_(84);\n\n      /**\n * SingleInput Constructor.\n */\n      function SingleInput(options) {\n        Selectivity.call(\n          this,\n          assign(\n            {\n              // Dropdowns for single-value inputs should open below the select box, unless there\n              // is not enough space below, in which case the dropdown should be moved up just\n              // enough so it fits in the window, but never so much that it reaches above the top.\n              positionDropdown(el, selectEl) {\n                const rect = selectEl.getBoundingClientRect();\n                const dropdownTop = rect.bottom;\n\n                const deltaUp = Math.min(\n                  Math.max(dropdownTop + el.clientHeight - window.innerHeight, 0),\n                  rect.top + rect.height,\n                );\n\n                assign(el.style, {\n                  left: `${rect.left}px`,\n                  top: `${dropdownTop - deltaUp}px`,\n                  width: `${rect.width}px`,\n                });\n              },\n            },\n            options,\n          ),\n        );\n\n        this.el.innerHTML = this.template('singleSelectInput', this.options);\n\n        this.rerenderSelection();\n\n        if (options.showSearchInputInDropdown === false) {\n          this.initInput(this.$('.selectivity-single-select-input'), { search: false });\n        }\n\n        this.events.on({\n          change: this.rerenderSelection,\n          click: this._clicked,\n          'click .selectivity-search-input': stopPropagation,\n          'click .selectivity-single-selected-item-remove': this._itemRemoveClicked,\n          'focus .selectivity-single-select-input': this._focused,\n          'selectivity-selected': this._resultSelected,\n        });\n      }\n\n      /**\n * Methods.\n */\n      var callSuper = Selectivity.inherits(SingleInput, Selectivity, {\n        /**\n     * Clears the data and value.\n     */\n        clear() {\n          this.setData(null);\n        },\n\n        /**\n     * @inherit\n     *\n     * @param options Optional options object. May contain the following property:\n     *                keepFocus - If true, the focus will remain on the input.\n     */\n        close(options) {\n          this._closing = true;\n\n          callSuper(this, 'close');\n\n          if (options && options.keepFocus && this.input) {\n            this.input.focus();\n          }\n\n          this._closing = false;\n        },\n\n        /**\n     * Returns the correct data for a given value.\n     *\n     * @param value The value to get the data for. Should be an ID.\n     *\n     * @return The corresponding data. Will be an object with 'id' and 'text' properties. Note that\n     *         if no items are defined, this method assumes the text label will be equal to the ID.\n     */\n        getDataForValue(value) {\n          return this.getItemForId(value);\n        },\n\n        /**\n     * Returns the correct value for the given data.\n     *\n     * @param data The data to get the value for. Should be an object with 'id' and 'text'\n     *             properties or null.\n     *\n     * @return The corresponding value. Will be an ID or null.\n     */\n        getValueForData(data) {\n          return data ? data.id : null;\n        },\n\n        /**\n     * Re-renders the selection.\n     *\n     * Normally the UI is automatically updated whenever the selection changes, but you may want to\n     * call this method explicitly if you've updated the selection with the triggerChange option set\n     * to false.\n     */\n        rerenderSelection() {\n          const template = this._data ? 'singleSelectedItem' : 'singleSelectPlaceholder';\n          const options = this._data\n            ? assign(\n              {\n                removable: this.options.allowClear && !this.options.readOnly,\n              },\n              this._data,\n            )\n            : { placeholder: this.options.placeholder };\n\n          this.el.querySelector('input').value = this._value;\n          this.$('.selectivity-single-result-container').innerHTML = this.template(template, options);\n        },\n\n        /**\n     * Validates data to set. Throws an exception if the data is invalid.\n     *\n     * @param data The data to validate. Should be an object with 'id' and 'text' properties or null\n     *             to indicate no item is selected.\n     *\n     * @return The validated data. This may differ from the input data.\n     */\n        validateData(data) {\n          return data === null ? data : this.validateItem(data);\n        },\n\n        /**\n     * Validates a value to set. Throws an exception if the value is invalid.\n     *\n     * @param value The value to validate. Should be null or a valid ID.\n     *\n     * @return The validated value. This may differ from the input value.\n     */\n        validateValue(value) {\n          if (value === null || Selectivity.isValidId(value)) {\n            return value;\n          } else {\n            throw new Error('Value for SingleSelectivity instance should be a valid ID or null');\n          }\n        },\n\n        /**\n     * @private\n     */\n        _clicked() {\n          if (this.enabled) {\n            if (this.dropdown) {\n              this.close({ keepFocus: true });\n            } else if (this.options.showDropdown !== false) {\n              this.open();\n            }\n          }\n        },\n\n        /**\n     * @private\n     */\n        _focused() {\n          if (\n            this.enabled &&\n            !this._closing &&\n            !this._opening &&\n            this.options.showDropdown !== false\n          ) {\n            this.open();\n          }\n        },\n\n        /**\n     * @private\n     */\n        _itemRemoveClicked(event) {\n          this.setData(null);\n\n          stopPropagation(event);\n        },\n\n        /**\n     * @private\n     */\n        _resultSelected(event) {\n          this.setData(event.item);\n\n          this.close({ keepFocus: true });\n        },\n      });\n\n      module.exports = Selectivity.Inputs.Single = SingleInput;\n\n    }, {40: 40, 76: 76, 84: 84}],\n    67: [function (_dereq_, module, exports) {\n\n\n      const escape = _dereq_(44);\n\n      const Selectivity = _dereq_(76);\n\n      /**\n * Localizable elements of the Selectivity Templates.\n *\n * Be aware that these strings are added straight to the HTML output of the templates, so any\n * non-safe strings should be escaped.\n */\n      module.exports = Selectivity.Locale = {\n        loading: 'Loading...',\n        loadMore: 'Load more...',\n        noResults: 'No results found',\n\n        ajaxError(term) {\n          if (term) {\n            return `Failed to fetch results for <b>${escape(term)}</b>`;\n          } else {\n            return 'Failed to fetch results';\n          }\n        },\n\n        needMoreCharacters(numCharacters) {\n          return `Enter ${numCharacters} more characters to search`;\n        },\n\n        noResultsForTerm(term) {\n          return `No results for <b>${escape(term)}</b>`;\n        },\n      };\n\n    }, {44: 44, 76: 76}],\n    68: [function (_dereq_, module, exports) {\n\n\n      const debounce = _dereq_(42);\n\n      const Selectivity = _dereq_(76);\n      const Locale = _dereq_(67);\n\n      function addUrlParam(url, key, value) {\n        return `${url + (url.indexOf('?') > -1 ? '&' : '?') + key}=${encodeURIComponent(value)}`;\n      }\n\n      function pick(object, keys) {\n        const result = {};\n        keys.forEach((key) => {\n          if (object[key] !== undefined) {\n            result[key] = object[key];\n          }\n        });\n        return result;\n      }\n\n      function doFetch(ajax, queryOptions) {\n        const fetch = ajax.fetch || window.fetch;\n        const term = queryOptions.term;\n\n        let url = typeof ajax.url === 'function' ? ajax.url(queryOptions) : ajax.url;\n        if (ajax.params) {\n          const params = ajax.params(term, queryOptions.offset || 0);\n          for (const key in params) {\n            if (params.hasOwnProperty(key)) {\n              url = addUrlParam(url, key, params[key]);\n            }\n          }\n        }\n\n        const init = pick(ajax, [\n          'body',\n          'cache',\n          'credentials',\n          'headers',\n          'integrity',\n          'method',\n          'mode',\n          'redirect',\n          'referrer',\n          'referrerPolicy',\n        ]);\n\n        fetch(url, init, queryOptions)\n          .then((response) => {\n            if (response.ok) {\n              return response.json();\n            } else if (Array.isArray(response) || response.results) {\n              return response;\n            } else {\n              throw new Error('Unexpected AJAX response');\n            }\n          })\n          .then((response) => {\n            if (Array.isArray(response)) {\n              queryOptions.callback({ results: response, more: false });\n            } else {\n              queryOptions.callback({ results: response.results, more: !!response.more });\n            }\n          })\n          .catch((error) => {\n            const formatError = ajax.formatError || Locale.ajaxError;\n            queryOptions.error(formatError(term, error), { escape: false });\n          });\n      }\n\n      /**\n * Option listener that implements a convenience query function for performing AJAX requests.\n */\n      Selectivity.OptionListeners.unshift((selectivity, options) => {\n        const ajax = options.ajax;\n        if (ajax && ajax.url) {\n          const fetch = ajax.quietMillis ? debounce(doFetch, ajax.quietMillis) : doFetch;\n\n          options.query = function (queryOptions) {\n            const numCharsNeeded = ajax.minimumInputLength - queryOptions.term.length;\n            if (numCharsNeeded > 0) {\n              queryOptions.error(Locale.needMoreCharacters(numCharsNeeded));\n              return;\n            }\n\n            fetch(ajax, queryOptions);\n          };\n        }\n      });\n\n    }, {42: 42, 67: 67, 76: 76}],\n    69: [function (_dereq_, module, exports) {\n\n\n      const Selectivity = _dereq_(76);\n\n      let latestQueryNum = 0;\n\n      /**\n * Option listener that will discard any callbacks from the query function if another query has\n * been called afterwards. This prevents responses from remote sources arriving out-of-order.\n */\n      Selectivity.OptionListeners.push((selectivity, options) => {\n        const query = options.query;\n        if (query && !query._async) {\n          options.query = function (queryOptions) {\n            latestQueryNum++;\n            const queryNum = latestQueryNum;\n\n            const callback = queryOptions.callback;\n            const error = queryOptions.error;\n            queryOptions.callback = function () {\n              if (queryNum === latestQueryNum) {\n                callback(...arguments);\n              }\n            };\n            queryOptions.error = function () {\n              if (queryNum === latestQueryNum) {\n                error(...arguments);\n              }\n            };\n            query(queryOptions);\n          };\n          options.query._async = true;\n        }\n      });\n\n    }, {76: 76}],\n    70: [function (_dereq_, module, exports) {\n\n\n      const DIACRITICS = {\n        '\\u24B6': 'A',\n        Ａ: 'A',\n        À: 'A',\n        Á: 'A',\n        Â: 'A',\n        Ầ: 'A',\n        Ấ: 'A',\n        Ẫ: 'A',\n        Ẩ: 'A',\n        Ã: 'A',\n        Ā: 'A',\n        Ă: 'A',\n        Ằ: 'A',\n        Ắ: 'A',\n        Ẵ: 'A',\n        Ẳ: 'A',\n        Ȧ: 'A',\n        Ǡ: 'A',\n        Ä: 'A',\n        Ǟ: 'A',\n        Ả: 'A',\n        Å: 'A',\n        Ǻ: 'A',\n        Ǎ: 'A',\n        Ȁ: 'A',\n        Ȃ: 'A',\n        Ạ: 'A',\n        Ậ: 'A',\n        Ặ: 'A',\n        Ḁ: 'A',\n        Ą: 'A',\n        Ⱥ: 'A',\n        Ɐ: 'A',\n        Ꜳ: 'AA',\n        Æ: 'AE',\n        Ǽ: 'AE',\n        Ǣ: 'AE',\n        Ꜵ: 'AO',\n        Ꜷ: 'AU',\n        Ꜹ: 'AV',\n        Ꜻ: 'AV',\n        Ꜽ: 'AY',\n        '\\u24B7': 'B',\n        Ｂ: 'B',\n        Ḃ: 'B',\n        Ḅ: 'B',\n        Ḇ: 'B',\n        Ƀ: 'B',\n        Ƃ: 'B',\n        Ɓ: 'B',\n        '\\u24B8': 'C',\n        Ｃ: 'C',\n        Ć: 'C',\n        Ĉ: 'C',\n        Ċ: 'C',\n        Č: 'C',\n        Ç: 'C',\n        Ḉ: 'C',\n        Ƈ: 'C',\n        Ȼ: 'C',\n        Ꜿ: 'C',\n        '\\u24B9': 'D',\n        Ｄ: 'D',\n        Ḋ: 'D',\n        Ď: 'D',\n        Ḍ: 'D',\n        Ḑ: 'D',\n        Ḓ: 'D',\n        Ḏ: 'D',\n        Đ: 'D',\n        Ƌ: 'D',\n        Ɗ: 'D',\n        Ɖ: 'D',\n        Ꝺ: 'D',\n        Ǳ: 'DZ',\n        Ǆ: 'DZ',\n        ǲ: 'Dz',\n        ǅ: 'Dz',\n        '\\u24BA': 'E',\n        Ｅ: 'E',\n        È: 'E',\n        É: 'E',\n        Ê: 'E',\n        Ề: 'E',\n        Ế: 'E',\n        Ễ: 'E',\n        Ể: 'E',\n        Ẽ: 'E',\n        Ē: 'E',\n        Ḕ: 'E',\n        Ḗ: 'E',\n        Ĕ: 'E',\n        Ė: 'E',\n        Ë: 'E',\n        Ẻ: 'E',\n        Ě: 'E',\n        Ȅ: 'E',\n        Ȇ: 'E',\n        Ẹ: 'E',\n        Ệ: 'E',\n        Ȩ: 'E',\n        Ḝ: 'E',\n        Ę: 'E',\n        Ḙ: 'E',\n        Ḛ: 'E',\n        Ɛ: 'E',\n        Ǝ: 'E',\n        '\\u24BB': 'F',\n        Ｆ: 'F',\n        Ḟ: 'F',\n        Ƒ: 'F',\n        Ꝼ: 'F',\n        '\\u24BC': 'G',\n        Ｇ: 'G',\n        Ǵ: 'G',\n        Ĝ: 'G',\n        Ḡ: 'G',\n        Ğ: 'G',\n        Ġ: 'G',\n        Ǧ: 'G',\n        Ģ: 'G',\n        Ǥ: 'G',\n        Ɠ: 'G',\n        Ꞡ: 'G',\n        Ᵹ: 'G',\n        Ꝿ: 'G',\n        '\\u24BD': 'H',\n        Ｈ: 'H',\n        Ĥ: 'H',\n        Ḣ: 'H',\n        Ḧ: 'H',\n        Ȟ: 'H',\n        Ḥ: 'H',\n        Ḩ: 'H',\n        Ḫ: 'H',\n        Ħ: 'H',\n        Ⱨ: 'H',\n        Ⱶ: 'H',\n        Ɥ: 'H',\n        '\\u24BE': 'I',\n        Ｉ: 'I',\n        Ì: 'I',\n        Í: 'I',\n        Î: 'I',\n        Ĩ: 'I',\n        Ī: 'I',\n        Ĭ: 'I',\n        İ: 'I',\n        Ï: 'I',\n        Ḯ: 'I',\n        Ỉ: 'I',\n        Ǐ: 'I',\n        Ȉ: 'I',\n        Ȋ: 'I',\n        Ị: 'I',\n        Į: 'I',\n        Ḭ: 'I',\n        Ɨ: 'I',\n        '\\u24BF': 'J',\n        Ｊ: 'J',\n        Ĵ: 'J',\n        Ɉ: 'J',\n        '\\u24C0': 'K',\n        Ｋ: 'K',\n        Ḱ: 'K',\n        Ǩ: 'K',\n        Ḳ: 'K',\n        Ķ: 'K',\n        Ḵ: 'K',\n        Ƙ: 'K',\n        Ⱪ: 'K',\n        Ꝁ: 'K',\n        Ꝃ: 'K',\n        Ꝅ: 'K',\n        Ꞣ: 'K',\n        '\\u24C1': 'L',\n        Ｌ: 'L',\n        Ŀ: 'L',\n        Ĺ: 'L',\n        Ľ: 'L',\n        Ḷ: 'L',\n        Ḹ: 'L',\n        Ļ: 'L',\n        Ḽ: 'L',\n        Ḻ: 'L',\n        Ł: 'L',\n        Ƚ: 'L',\n        Ɫ: 'L',\n        Ⱡ: 'L',\n        Ꝉ: 'L',\n        Ꝇ: 'L',\n        Ꞁ: 'L',\n        Ǉ: 'LJ',\n        ǈ: 'Lj',\n        '\\u24C2': 'M',\n        Ｍ: 'M',\n        Ḿ: 'M',\n        Ṁ: 'M',\n        Ṃ: 'M',\n        Ɱ: 'M',\n        Ɯ: 'M',\n        '\\u24C3': 'N',\n        Ｎ: 'N',\n        Ǹ: 'N',\n        Ń: 'N',\n        Ñ: 'N',\n        Ṅ: 'N',\n        Ň: 'N',\n        Ṇ: 'N',\n        Ņ: 'N',\n        Ṋ: 'N',\n        Ṉ: 'N',\n        Ƞ: 'N',\n        Ɲ: 'N',\n        Ꞑ: 'N',\n        Ꞥ: 'N',\n        Ǌ: 'NJ',\n        ǋ: 'Nj',\n        '\\u24C4': 'O',\n        Ｏ: 'O',\n        Ò: 'O',\n        Ó: 'O',\n        Ô: 'O',\n        Ồ: 'O',\n        Ố: 'O',\n        Ỗ: 'O',\n        Ổ: 'O',\n        Õ: 'O',\n        Ṍ: 'O',\n        Ȭ: 'O',\n        Ṏ: 'O',\n        Ō: 'O',\n        Ṑ: 'O',\n        Ṓ: 'O',\n        Ŏ: 'O',\n        Ȯ: 'O',\n        Ȱ: 'O',\n        Ö: 'O',\n        Ȫ: 'O',\n        Ỏ: 'O',\n        Ő: 'O',\n        Ǒ: 'O',\n        Ȍ: 'O',\n        Ȏ: 'O',\n        Ơ: 'O',\n        Ờ: 'O',\n        Ớ: 'O',\n        Ỡ: 'O',\n        Ở: 'O',\n        Ợ: 'O',\n        Ọ: 'O',\n        Ộ: 'O',\n        Ǫ: 'O',\n        Ǭ: 'O',\n        Ø: 'O',\n        Ǿ: 'O',\n        Ɔ: 'O',\n        Ɵ: 'O',\n        Ꝋ: 'O',\n        Ꝍ: 'O',\n        Ƣ: 'OI',\n        Ꝏ: 'OO',\n        Ȣ: 'OU',\n        '\\u24C5': 'P',\n        Ｐ: 'P',\n        Ṕ: 'P',\n        Ṗ: 'P',\n        Ƥ: 'P',\n        Ᵽ: 'P',\n        Ꝑ: 'P',\n        Ꝓ: 'P',\n        Ꝕ: 'P',\n        '\\u24C6': 'Q',\n        Ｑ: 'Q',\n        Ꝗ: 'Q',\n        Ꝙ: 'Q',\n        Ɋ: 'Q',\n        '\\u24C7': 'R',\n        Ｒ: 'R',\n        Ŕ: 'R',\n        Ṙ: 'R',\n        Ř: 'R',\n        Ȑ: 'R',\n        Ȓ: 'R',\n        Ṛ: 'R',\n        Ṝ: 'R',\n        Ŗ: 'R',\n        Ṟ: 'R',\n        Ɍ: 'R',\n        Ɽ: 'R',\n        Ꝛ: 'R',\n        Ꞧ: 'R',\n        Ꞃ: 'R',\n        '\\u24C8': 'S',\n        Ｓ: 'S',\n        ẞ: 'S',\n        Ś: 'S',\n        Ṥ: 'S',\n        Ŝ: 'S',\n        Ṡ: 'S',\n        Š: 'S',\n        Ṧ: 'S',\n        Ṣ: 'S',\n        Ṩ: 'S',\n        Ș: 'S',\n        Ş: 'S',\n        Ȿ: 'S',\n        Ꞩ: 'S',\n        Ꞅ: 'S',\n        '\\u24C9': 'T',\n        Ｔ: 'T',\n        Ṫ: 'T',\n        Ť: 'T',\n        Ṭ: 'T',\n        Ț: 'T',\n        Ţ: 'T',\n        Ṱ: 'T',\n        Ṯ: 'T',\n        Ŧ: 'T',\n        Ƭ: 'T',\n        Ʈ: 'T',\n        Ⱦ: 'T',\n        Ꞇ: 'T',\n        Ꜩ: 'TZ',\n        '\\u24CA': 'U',\n        Ｕ: 'U',\n        Ù: 'U',\n        Ú: 'U',\n        Û: 'U',\n        Ũ: 'U',\n        Ṹ: 'U',\n        Ū: 'U',\n        Ṻ: 'U',\n        Ŭ: 'U',\n        Ü: 'U',\n        Ǜ: 'U',\n        Ǘ: 'U',\n        Ǖ: 'U',\n        Ǚ: 'U',\n        Ủ: 'U',\n        Ů: 'U',\n        Ű: 'U',\n        Ǔ: 'U',\n        Ȕ: 'U',\n        Ȗ: 'U',\n        Ư: 'U',\n        Ừ: 'U',\n        Ứ: 'U',\n        Ữ: 'U',\n        Ử: 'U',\n        Ự: 'U',\n        Ụ: 'U',\n        Ṳ: 'U',\n        Ų: 'U',\n        Ṷ: 'U',\n        Ṵ: 'U',\n        Ʉ: 'U',\n        '\\u24CB': 'V',\n        Ｖ: 'V',\n        Ṽ: 'V',\n        Ṿ: 'V',\n        Ʋ: 'V',\n        Ꝟ: 'V',\n        Ʌ: 'V',\n        Ꝡ: 'VY',\n        '\\u24CC': 'W',\n        Ｗ: 'W',\n        Ẁ: 'W',\n        Ẃ: 'W',\n        Ŵ: 'W',\n        Ẇ: 'W',\n        Ẅ: 'W',\n        Ẉ: 'W',\n        Ⱳ: 'W',\n        '\\u24CD': 'X',\n        Ｘ: 'X',\n        Ẋ: 'X',\n        Ẍ: 'X',\n        '\\u24CE': 'Y',\n        Ｙ: 'Y',\n        Ỳ: 'Y',\n        Ý: 'Y',\n        Ŷ: 'Y',\n        Ỹ: 'Y',\n        Ȳ: 'Y',\n        Ẏ: 'Y',\n        Ÿ: 'Y',\n        Ỷ: 'Y',\n        Ỵ: 'Y',\n        Ƴ: 'Y',\n        Ɏ: 'Y',\n        Ỿ: 'Y',\n        '\\u24CF': 'Z',\n        Ｚ: 'Z',\n        Ź: 'Z',\n        Ẑ: 'Z',\n        Ż: 'Z',\n        Ž: 'Z',\n        Ẓ: 'Z',\n        Ẕ: 'Z',\n        Ƶ: 'Z',\n        Ȥ: 'Z',\n        Ɀ: 'Z',\n        Ⱬ: 'Z',\n        Ꝣ: 'Z',\n        '\\u24D0': 'a',\n        ａ: 'a',\n        ẚ: 'a',\n        à: 'a',\n        á: 'a',\n        â: 'a',\n        ầ: 'a',\n        ấ: 'a',\n        ẫ: 'a',\n        ẩ: 'a',\n        ã: 'a',\n        ā: 'a',\n        ă: 'a',\n        ằ: 'a',\n        ắ: 'a',\n        ẵ: 'a',\n        ẳ: 'a',\n        ȧ: 'a',\n        ǡ: 'a',\n        ä: 'a',\n        ǟ: 'a',\n        ả: 'a',\n        å: 'a',\n        ǻ: 'a',\n        ǎ: 'a',\n        ȁ: 'a',\n        ȃ: 'a',\n        ạ: 'a',\n        ậ: 'a',\n        ặ: 'a',\n        ḁ: 'a',\n        ą: 'a',\n        ⱥ: 'a',\n        ɐ: 'a',\n        ꜳ: 'aa',\n        æ: 'ae',\n        ǽ: 'ae',\n        ǣ: 'ae',\n        ꜵ: 'ao',\n        ꜷ: 'au',\n        ꜹ: 'av',\n        ꜻ: 'av',\n        ꜽ: 'ay',\n        '\\u24D1': 'b',\n        ｂ: 'b',\n        ḃ: 'b',\n        ḅ: 'b',\n        ḇ: 'b',\n        ƀ: 'b',\n        ƃ: 'b',\n        ɓ: 'b',\n        '\\u24D2': 'c',\n        ｃ: 'c',\n        ć: 'c',\n        ĉ: 'c',\n        ċ: 'c',\n        č: 'c',\n        ç: 'c',\n        ḉ: 'c',\n        ƈ: 'c',\n        ȼ: 'c',\n        ꜿ: 'c',\n        ↄ: 'c',\n        '\\u24D3': 'd',\n        ｄ: 'd',\n        ḋ: 'd',\n        ď: 'd',\n        ḍ: 'd',\n        ḑ: 'd',\n        ḓ: 'd',\n        ḏ: 'd',\n        đ: 'd',\n        ƌ: 'd',\n        ɖ: 'd',\n        ɗ: 'd',\n        ꝺ: 'd',\n        ǳ: 'dz',\n        ǆ: 'dz',\n        '\\u24D4': 'e',\n        ｅ: 'e',\n        è: 'e',\n        é: 'e',\n        ê: 'e',\n        ề: 'e',\n        ế: 'e',\n        ễ: 'e',\n        ể: 'e',\n        ẽ: 'e',\n        ē: 'e',\n        ḕ: 'e',\n        ḗ: 'e',\n        ĕ: 'e',\n        ė: 'e',\n        ë: 'e',\n        ẻ: 'e',\n        ě: 'e',\n        ȅ: 'e',\n        ȇ: 'e',\n        ẹ: 'e',\n        ệ: 'e',\n        ȩ: 'e',\n        ḝ: 'e',\n        ę: 'e',\n        ḙ: 'e',\n        ḛ: 'e',\n        ɇ: 'e',\n        ɛ: 'e',\n        ǝ: 'e',\n        '\\u24D5': 'f',\n        ｆ: 'f',\n        ḟ: 'f',\n        ƒ: 'f',\n        ꝼ: 'f',\n        '\\u24D6': 'g',\n        ｇ: 'g',\n        ǵ: 'g',\n        ĝ: 'g',\n        ḡ: 'g',\n        ğ: 'g',\n        ġ: 'g',\n        ǧ: 'g',\n        ģ: 'g',\n        ǥ: 'g',\n        ɠ: 'g',\n        ꞡ: 'g',\n        ᵹ: 'g',\n        ꝿ: 'g',\n        '\\u24D7': 'h',\n        ｈ: 'h',\n        ĥ: 'h',\n        ḣ: 'h',\n        ḧ: 'h',\n        ȟ: 'h',\n        ḥ: 'h',\n        ḩ: 'h',\n        ḫ: 'h',\n        ẖ: 'h',\n        ħ: 'h',\n        ⱨ: 'h',\n        ⱶ: 'h',\n        ɥ: 'h',\n        ƕ: 'hv',\n        '\\u24D8': 'i',\n        ｉ: 'i',\n        ì: 'i',\n        í: 'i',\n        î: 'i',\n        ĩ: 'i',\n        ī: 'i',\n        ĭ: 'i',\n        ï: 'i',\n        ḯ: 'i',\n        ỉ: 'i',\n        ǐ: 'i',\n        ȉ: 'i',\n        ȋ: 'i',\n        ị: 'i',\n        į: 'i',\n        ḭ: 'i',\n        ɨ: 'i',\n        ı: 'i',\n        '\\u24D9': 'j',\n        ｊ: 'j',\n        ĵ: 'j',\n        ǰ: 'j',\n        ɉ: 'j',\n        '\\u24DA': 'k',\n        ｋ: 'k',\n        ḱ: 'k',\n        ǩ: 'k',\n        ḳ: 'k',\n        ķ: 'k',\n        ḵ: 'k',\n        ƙ: 'k',\n        ⱪ: 'k',\n        ꝁ: 'k',\n        ꝃ: 'k',\n        ꝅ: 'k',\n        ꞣ: 'k',\n        '\\u24DB': 'l',\n        ｌ: 'l',\n        ŀ: 'l',\n        ĺ: 'l',\n        ľ: 'l',\n        ḷ: 'l',\n        ḹ: 'l',\n        ļ: 'l',\n        ḽ: 'l',\n        ḻ: 'l',\n        ſ: 'l',\n        ł: 'l',\n        ƚ: 'l',\n        ɫ: 'l',\n        ⱡ: 'l',\n        ꝉ: 'l',\n        ꞁ: 'l',\n        ꝇ: 'l',\n        ǉ: 'lj',\n        '\\u24DC': 'm',\n        ｍ: 'm',\n        ḿ: 'm',\n        ṁ: 'm',\n        ṃ: 'm',\n        ɱ: 'm',\n        ɯ: 'm',\n        '\\u24DD': 'n',\n        ｎ: 'n',\n        ǹ: 'n',\n        ń: 'n',\n        ñ: 'n',\n        ṅ: 'n',\n        ň: 'n',\n        ṇ: 'n',\n        ņ: 'n',\n        ṋ: 'n',\n        ṉ: 'n',\n        ƞ: 'n',\n        ɲ: 'n',\n        ŉ: 'n',\n        ꞑ: 'n',\n        ꞥ: 'n',\n        ǌ: 'nj',\n        '\\u24DE': 'o',\n        ｏ: 'o',\n        ò: 'o',\n        ó: 'o',\n        ô: 'o',\n        ồ: 'o',\n        ố: 'o',\n        ỗ: 'o',\n        ổ: 'o',\n        õ: 'o',\n        ṍ: 'o',\n        ȭ: 'o',\n        ṏ: 'o',\n        ō: 'o',\n        ṑ: 'o',\n        ṓ: 'o',\n        ŏ: 'o',\n        ȯ: 'o',\n        ȱ: 'o',\n        ö: 'o',\n        ȫ: 'o',\n        ỏ: 'o',\n        ő: 'o',\n        ǒ: 'o',\n        ȍ: 'o',\n        ȏ: 'o',\n        ơ: 'o',\n        ờ: 'o',\n        ớ: 'o',\n        ỡ: 'o',\n        ở: 'o',\n        ợ: 'o',\n        ọ: 'o',\n        ộ: 'o',\n        ǫ: 'o',\n        ǭ: 'o',\n        ø: 'o',\n        ǿ: 'o',\n        ɔ: 'o',\n        ꝋ: 'o',\n        ꝍ: 'o',\n        ɵ: 'o',\n        ƣ: 'oi',\n        ȣ: 'ou',\n        ꝏ: 'oo',\n        '\\u24DF': 'p',\n        ｐ: 'p',\n        ṕ: 'p',\n        ṗ: 'p',\n        ƥ: 'p',\n        ᵽ: 'p',\n        ꝑ: 'p',\n        ꝓ: 'p',\n        ꝕ: 'p',\n        '\\u24E0': 'q',\n        ｑ: 'q',\n        ɋ: 'q',\n        ꝗ: 'q',\n        ꝙ: 'q',\n        '\\u24E1': 'r',\n        ｒ: 'r',\n        ŕ: 'r',\n        ṙ: 'r',\n        ř: 'r',\n        ȑ: 'r',\n        ȓ: 'r',\n        ṛ: 'r',\n        ṝ: 'r',\n        ŗ: 'r',\n        ṟ: 'r',\n        ɍ: 'r',\n        ɽ: 'r',\n        ꝛ: 'r',\n        ꞧ: 'r',\n        ꞃ: 'r',\n        '\\u24E2': 's',\n        ｓ: 's',\n        ß: 's',\n        ś: 's',\n        ṥ: 's',\n        ŝ: 's',\n        ṡ: 's',\n        š: 's',\n        ṧ: 's',\n        ṣ: 's',\n        ṩ: 's',\n        ș: 's',\n        ş: 's',\n        ȿ: 's',\n        ꞩ: 's',\n        ꞅ: 's',\n        ẛ: 's',\n        '\\u24E3': 't',\n        ｔ: 't',\n        ṫ: 't',\n        ẗ: 't',\n        ť: 't',\n        ṭ: 't',\n        ț: 't',\n        ţ: 't',\n        ṱ: 't',\n        ṯ: 't',\n        ŧ: 't',\n        ƭ: 't',\n        ʈ: 't',\n        ⱦ: 't',\n        ꞇ: 't',\n        ꜩ: 'tz',\n        '\\u24E4': 'u',\n        ｕ: 'u',\n        ù: 'u',\n        ú: 'u',\n        û: 'u',\n        ũ: 'u',\n        ṹ: 'u',\n        ū: 'u',\n        ṻ: 'u',\n        ŭ: 'u',\n        ü: 'u',\n        ǜ: 'u',\n        ǘ: 'u',\n        ǖ: 'u',\n        ǚ: 'u',\n        ủ: 'u',\n        ů: 'u',\n        ű: 'u',\n        ǔ: 'u',\n        ȕ: 'u',\n        ȗ: 'u',\n        ư: 'u',\n        ừ: 'u',\n        ứ: 'u',\n        ữ: 'u',\n        ử: 'u',\n        ự: 'u',\n        ụ: 'u',\n        ṳ: 'u',\n        ų: 'u',\n        ṷ: 'u',\n        ṵ: 'u',\n        ʉ: 'u',\n        '\\u24E5': 'v',\n        ｖ: 'v',\n        ṽ: 'v',\n        ṿ: 'v',\n        ʋ: 'v',\n        ꝟ: 'v',\n        ʌ: 'v',\n        ꝡ: 'vy',\n        '\\u24E6': 'w',\n        ｗ: 'w',\n        ẁ: 'w',\n        ẃ: 'w',\n        ŵ: 'w',\n        ẇ: 'w',\n        ẅ: 'w',\n        ẘ: 'w',\n        ẉ: 'w',\n        ⱳ: 'w',\n        '\\u24E7': 'x',\n        ｘ: 'x',\n        ẋ: 'x',\n        ẍ: 'x',\n        '\\u24E8': 'y',\n        ｙ: 'y',\n        ỳ: 'y',\n        ý: 'y',\n        ŷ: 'y',\n        ỹ: 'y',\n        ȳ: 'y',\n        ẏ: 'y',\n        ÿ: 'y',\n        ỷ: 'y',\n        ẙ: 'y',\n        ỵ: 'y',\n        ƴ: 'y',\n        ɏ: 'y',\n        ỿ: 'y',\n        '\\u24E9': 'z',\n        ｚ: 'z',\n        ź: 'z',\n        ẑ: 'z',\n        ż: 'z',\n        ž: 'z',\n        ẓ: 'z',\n        ẕ: 'z',\n        ƶ: 'z',\n        ȥ: 'z',\n        ɀ: 'z',\n        ⱬ: 'z',\n        ꝣ: 'z',\n        Ά: '\\u0391',\n        Έ: '\\u0395',\n        Ή: '\\u0397',\n        Ί: '\\u0399',\n        Ϊ: '\\u0399',\n        Ό: '\\u039F',\n        Ύ: '\\u03A5',\n        Ϋ: '\\u03A5',\n        Ώ: '\\u03A9',\n        ά: '\\u03B1',\n        έ: '\\u03B5',\n        ή: '\\u03B7',\n        ί: '\\u03B9',\n        ϊ: '\\u03B9',\n        ΐ: '\\u03B9',\n        ό: '\\u03BF',\n        ύ: '\\u03C5',\n        ϋ: '\\u03C5',\n        ΰ: '\\u03C5',\n        ω: '\\u03C9',\n        ς: '\\u03C3',\n      };\n\n      const Selectivity = _dereq_(76);\n      const previousTransform = Selectivity.transformText;\n\n      /**\n * Extended version of the transformText() function that simplifies diacritics to their latin1\n * counterparts.\n *\n * Note that if all query functions fetch their results from a remote server, you may not need this\n * function, because it makes sense to remove diacritics server-side in such cases.\n */\n      Selectivity.transformText = function (string) {\n        let result = '';\n        for (let i = 0, length = string.length; i < length; i++) {\n          const character = string[i];\n          result += DIACRITICS[character] || character;\n        }\n        return previousTransform(result);\n      };\n\n    }, {76: 76}],\n    71: [function (_dereq_, module, exports) {\n\n\n      const Selectivity = _dereq_(76);\n      const findResultItem = _dereq_(78);\n      const getKeyCode = _dereq_(80);\n\n      const KEY_BACKSPACE = 8;\n      const KEY_DOWN_ARROW = 40;\n      const KEY_ENTER = 13;\n      const KEY_ESCAPE = 27;\n      const KEY_TAB = 9;\n      const KEY_UP_ARROW = 38;\n\n      /**\n * Search input listener providing keyboard support for navigating the dropdown.\n */\n      function listener(selectivity, input) {\n        let keydownCanceled = false;\n        let closeSubmenu = null;\n\n        /**\n     * Moves a dropdown's highlight to the next or previous result item.\n     *\n     * @param delta Either 1 to move to the next item, or -1 to move to the previous item.\n     */\n        function moveHighlight(dropdown, delta) {\n          const results = dropdown.results;\n          if (!results.length) {\n            return;\n          }\n\n          const resultItems = [].slice.call(dropdown.el.querySelectorAll('.selectivity-result-item'));\n\n          function scrollToHighlight() {\n            let el;\n            if (dropdown.highlightedResult) {\n              el = findResultItem(resultItems, dropdown.highlightedResult.id);\n            } else if (dropdown.loadMoreHighlighted) {\n              el = dropdown.$('.selectivity-load-more');\n            }\n\n            if (el && el.scrollIntoView) {\n              el.scrollIntoView(delta < 0);\n            }\n          }\n\n          if (dropdown.submenu) {\n            moveHighlight(dropdown.submenu, delta);\n            return;\n          }\n\n          const defaultIndex = delta > 0 ? 0 : resultItems.length - 1;\n          let index = defaultIndex;\n          const highlightedResult = dropdown.highlightedResult;\n          if (highlightedResult) {\n            const highlightedResultItem = findResultItem(resultItems, highlightedResult.id);\n            index = resultItems.indexOf(highlightedResultItem) + delta;\n            if (delta > 0 ? index >= resultItems.length : index < 0) {\n              if (dropdown.hasMore) {\n                dropdown.highlightLoadMore();\n                scrollToHighlight();\n                return;\n              } else {\n                index = defaultIndex;\n              }\n            }\n          }\n\n          const resultItem = resultItems[index];\n          const result = Selectivity.findNestedById(results, selectivity.getRelatedItemId(resultItem));\n          if (result) {\n            dropdown.highlight(result, { delay: !!result.submenu });\n            scrollToHighlight();\n          }\n        }\n\n        function keyHeld(event) {\n          const dropdown = selectivity.dropdown;\n          if (dropdown) {\n            const keyCode = getKeyCode(event);\n            if (keyCode === KEY_BACKSPACE) {\n              if (!input.value) {\n                if (dropdown.submenu) {\n                  let submenu = dropdown.submenu;\n                  while (submenu.submenu) {\n                    submenu = submenu.submenu;\n                  }\n                  closeSubmenu = submenu;\n                }\n\n                event.preventDefault();\n                keydownCanceled = true;\n              }\n            } else if (keyCode === KEY_DOWN_ARROW) {\n              moveHighlight(dropdown, 1);\n            } else if (keyCode === KEY_UP_ARROW) {\n              moveHighlight(dropdown, -1);\n            } else if (keyCode === KEY_TAB) {\n              setTimeout(() => {\n                selectivity.close();\n              }, 1);\n            } else if (keyCode === KEY_ENTER) {\n              event.preventDefault(); // don't submit forms on keydown\n            }\n          }\n        }\n\n        function keyReleased(event) {\n          function open() {\n            if (selectivity.options.showDropdown !== false) {\n              selectivity.open();\n            }\n          }\n\n          const dropdown = selectivity.dropdown;\n          const keyCode = getKeyCode(event);\n          if (keydownCanceled) {\n            event.preventDefault();\n            keydownCanceled = false;\n\n            if (closeSubmenu) {\n              closeSubmenu.close();\n              selectivity.focus();\n              closeSubmenu = null;\n            }\n          } else if (keyCode === KEY_BACKSPACE) {\n            if (!dropdown && selectivity.options.allowClear) {\n              selectivity.clear();\n            }\n          } else if (keyCode === KEY_ENTER && !event.ctrlKey) {\n            if (dropdown) {\n              dropdown.selectHighlight();\n            } else if (selectivity.options.showDropdown !== false) {\n              open();\n            }\n\n            event.preventDefault();\n          } else if (keyCode === KEY_ESCAPE) {\n            selectivity.close();\n\n            event.preventDefault();\n          } else if (keyCode === KEY_DOWN_ARROW || keyCode === KEY_UP_ARROW) {\n            // handled in keyHeld() because the response feels faster and it works with repeated\n            // events if the user holds the key for a longer period\n            // still, we issue an open() call here in case the dropdown was not yet open...\n            open();\n\n            event.preventDefault();\n          } else {\n            open();\n          }\n        }\n\n        input.addEventListener('keydown', keyHeld);\n        input.addEventListener('keyup', keyReleased);\n      }\n\n      Selectivity.InputListeners.push(listener);\n\n    }, {76: 76, 78: 78, 80: 80}],\n    72: [function (_dereq_, module, exports) {\n\n\n      const Selectivity = _dereq_(76);\n\n      const allowedOptions = {\n        allowClear: 'boolean',\n        backspaceHighlightsBeforeDelete: 'boolean',\n        closeOnSelect: 'boolean',\n        createTokenItem: 'function',\n        dropdown: 'function|null',\n        initSelection: 'function|null',\n        inputListeners: 'array',\n        items: 'array|null',\n        matcher: 'function|null',\n        placeholder: 'string',\n        positionDropdown: 'function|null',\n        query: 'function|null',\n        readOnly: 'boolean',\n        removeOnly: 'boolean',\n        shouldOpenSubmenu: 'function',\n        showSearchInputInDropdown: 'boolean',\n        suppressWheelSelector: 'string|null',\n        tabIndex: 'number',\n        templates: 'object',\n        tokenizer: 'function',\n      };\n\n      /**\n * Option listener that validates the options being set. This is useful during debugging to quickly\n * get notified if you're passing invalid options.\n */\n      Selectivity.OptionListeners.unshift((selectivity, options) => {\n        for (const key in options) {\n          if (!options.hasOwnProperty(key)) {\n            continue;\n          }\n\n          var value = options[key];\n          const type = allowedOptions[key];\n          if (\n            type &&\n            !type.split('|').some((type) => {\n              if (type === 'null') {\n                return value === null;\n              } else if (type === 'array') {\n                return Array.isArray(value);\n              } else {\n                return value !== null && value !== undefined && typeof value === type;\n              }\n            })\n          ) {\n            throw new Error(`${key} must be of type ${type}`);\n          }\n        }\n      });\n\n    }, {76: 76}],\n    73: [function (_dereq_, module, exports) {\n\n\n      const Dropdown = _dereq_(62);\n      const Selectivity = _dereq_(76);\n\n      const findResultItem = _dereq_(78);\n\n      /**\n * Extended dropdown that supports submenus.\n */\n      function SubmenuPlugin(selectivity, options) {\n        /**\n     * Optional parent dropdown menu from which this dropdown was opened.\n     */\n        this.parentMenu = options.parentMenu;\n\n        Dropdown.call(this, selectivity, options);\n\n        this._closeSubmenuTimeout = 0;\n\n        this._openSubmenuTimeout = 0;\n      }\n\n      var callSuper = Selectivity.inherits(SubmenuPlugin, Dropdown, {\n        /**\n     * @inherit\n     */\n        close() {\n          if (this.submenu) {\n            this.submenu.close();\n          }\n\n          callSuper(this, 'close');\n\n          if (this.parentMenu) {\n            this.parentMenu.submenu = null;\n            this.parentMenu = null;\n          }\n\n          clearTimeout(this._closeSubmenuTimeout);\n          clearTimeout(this._openSubmenuTimeout);\n        },\n\n        /**\n     * @inherit\n     *\n     * @param options Optional options object. May contain the following properties:\n     *                delay - If true, indicates any submenu should not be opened until after some\n     *                        delay.\n     *                openSubmenu - If false, no submenu will be automatically opened for the\n     *                              highlighted item.\n     *                reason - The reason why the result item is being highlighted. See\n     *                         Dropdown#highlight().\n     */\n        highlight(item, options) {\n          options = options || {};\n          const reason = options.reason || 'unspecified';\n\n          if (options.delay) {\n            callSuper(this, 'highlight', item);\n\n            clearTimeout(this._openSubmenuTimeout);\n            this._openSubmenuTimeout = setTimeout(this._doHighlight.bind(this, item, reason), 300);\n          } else if (this.submenu) {\n            if (this.highlightedResult && this.highlightedResult.id === item.id) {\n              this._doHighlight(item, reason);\n            } else {\n              clearTimeout(this._closeSubmenuTimeout);\n              this._closeSubmenuTimeout = setTimeout(\n                this._closeSubmenuAndHighlight.bind(this, item, reason),\n                100,\n              );\n            }\n          } else {\n            if (this.parentMenu && this.parentMenu._closeSubmenuTimeout) {\n              clearTimeout(this.parentMenu._closeSubmenuTimeout);\n              this.parentMenu._closeSubmenuTimeout = 0;\n            }\n\n            if (options.openSubmenu === false) {\n              callSuper(this, 'highlight', item);\n            } else {\n              this._doHighlight(item, reason);\n            }\n          }\n        },\n\n        /**\n     * @inherit\n     */\n        search(term) {\n          if (this.submenu) {\n            const searchInput = this.$('.selectivity-search-input');\n            if (searchInput && searchInput === document.activeElement) {\n              this.submenu.close();\n            } else {\n              this.submenu.search(term);\n              return;\n            }\n          }\n\n          callSuper(this, 'search', term);\n        },\n\n        /**\n     * @inherit\n     */\n        selectHighlight() {\n          if (this.submenu) {\n            this.submenu.selectHighlight();\n          } else {\n            callSuper(this, 'selectHighlight');\n          }\n        },\n\n        /**\n     * @inherit\n     */\n        showResults(results, options) {\n        // makes sure any result item with a submenu that's not explicitly\n        // set as selectable becomes unselectable\n          function setSelectable(item) {\n            if (item.children) {\n              item.children.forEach(setSelectable);\n            }\n            if (item.submenu) {\n              item.selectable = !!item.selectable;\n            }\n          }\n\n          if (this.submenu && options.dropdown !== this) {\n            this.submenu.showResults(results, options);\n          } else {\n            results.forEach(setSelectable);\n            callSuper(this, 'showResults', results, options);\n          }\n        },\n\n        /**\n     * @inherit\n     */\n        triggerClose() {\n          if (this.parentMenu) {\n            this.selectivity.triggerEvent('selectivity-close-submenu');\n          } else {\n            callSuper(this, 'triggerClose');\n          }\n        },\n\n        /**\n     * @inherit\n     */\n        triggerOpen() {\n          if (this.parentMenu) {\n            this.selectivity.triggerEvent('selectivity-open-submenu');\n          } else {\n            callSuper(this, 'triggerOpen');\n          }\n        },\n\n        /**\n     * @private\n     */\n        _closeSubmenuAndHighlight(item, reason) {\n          if (this.submenu) {\n            this.submenu.close();\n          }\n\n          this._doHighlight(item, reason);\n        },\n\n        /**\n     * @private\n     */\n        _doHighlight(item, reason) {\n          callSuper(this, 'highlight', item);\n\n          const options = this.selectivity.options;\n          if (\n            !item.submenu ||\n            this.submenu ||\n            (options.shouldOpenSubmenu && options.shouldOpenSubmenu(item, reason) === false)\n          ) {\n            return;\n          }\n\n          const Dropdown = options.dropdown || Selectivity.Dropdown;\n          if (Dropdown) {\n            const resultItems = this.el.querySelectorAll('.selectivity-result-item');\n            const resultItem = findResultItem(resultItems, item.id);\n            const dropdownEl = this.el;\n\n            this.submenu = new Dropdown(this.selectivity, {\n              highlightFirstItem: !item.selectable,\n              items: item.submenu.items || null,\n              parentMenu: this,\n              position(el, selectEl) {\n                if (item.submenu.positionDropdown) {\n                  item.submenu.positionDropdown(el, selectEl, resultItem, dropdownEl);\n                } else {\n                  const rect = dropdownEl.getBoundingClientRect();\n                  let left = rect.right;\n                  const width = rect.width;\n                  if (left + width > document.body.clientWidth && rect.left - width > 0) {\n                    // Open the submenu on the left-hand side if there's no sufficient\n                    // space on the right side.\n                    // Use a little margin to prevent awkward-looking overlaps.\n                    left = rect.left - width + 10;\n                  }\n\n                  // Move the submenu up so it fits in the window, if necessary and possible.\n                  const submenuTop = resultItem.getBoundingClientRect().top;\n                  const deltaUp = Math.min(\n                    Math.max(submenuTop + el.clientHeight - window.innerHeight, 0),\n                    rect.top + rect.height,\n                  );\n\n                  el.style.left = `${left}px`;\n                  el.style.top = `${submenuTop - deltaUp}px`;\n                  el.style.width = `${width}px`;\n                }\n              },\n              query: item.submenu.query || null,\n              showSearchInput: item.submenu.showSearchInput,\n            });\n\n            this.submenu.search('');\n          }\n        },\n      });\n\n      Selectivity.Dropdown = SubmenuPlugin;\n\n      module.exports = SubmenuPlugin;\n\n    }, {62: 62, 76: 76, 78: 78}],\n    74: [function (_dereq_, module, exports) {\n\n\n      const assign = _dereq_(40);\n\n      const Selectivity = _dereq_(76);\n\n      function defaultTokenizer(input, selection, createToken, options) {\n        const createTokenItem =\n        options.createTokenItem ||\n        function (token) {\n          return token ? { id: token, text: token } : null;\n        };\n\n        const separators = options.tokenSeparators;\n\n        function hasToken(input) {\n          return input\n            ? separators.some((separator) => input.indexOf(separator) > -1)\n            : false;\n        }\n\n        function takeToken(input) {\n          for (let i = 0, length = input.length; i < length; i++) {\n            if (separators.indexOf(input[i]) > -1) {\n              return { term: input.slice(0, i), input: input.slice(i + 1) };\n            }\n          }\n          return {};\n        }\n\n        while (hasToken(input)) {\n          const token = takeToken(input);\n          if (token.term) {\n            const item = createTokenItem(token.term);\n            if (item && !Selectivity.findById(selection, item.id)) {\n              createToken(item);\n            }\n          }\n          input = token.input;\n        }\n\n        return input;\n      }\n\n      /**\n * Option listener that provides a default tokenizer which is used when the tokenSeparators option\n * is specified.\n *\n * @param options Options object. In addition to the options supported in the multi-input\n *                implementation, this may contain the following property:\n *                tokenSeparators - Array of string separators which are used to separate the search\n *                                  string into tokens. If specified and the tokenizer property is\n *                                  not set, the tokenizer property will be set to a function which\n *                                  splits the search term into tokens separated by any of the given\n *                                  separators. The tokens will be converted into selectable items\n *                                  using the 'createTokenItem' function. The default tokenizer also\n *                                  filters out already selected items.\n */\n      Selectivity.OptionListeners.push((selectivity, options) => {\n        if (options.tokenSeparators) {\n          options.allowedTypes = assign({ tokenSeparators: 'array' }, options.allowedTypes);\n\n          options.tokenizer = options.tokenizer || defaultTokenizer;\n        }\n      });\n\n    }, {40: 40, 76: 76}],\n    75: [function (_dereq_, module, exports) {\n      _dereq_(62); _dereq_(64); _dereq_(65); _dereq_(66); _dereq_(67); _dereq_(68); _dereq_(69); _dereq_(70); _dereq_(71); _dereq_(72); _dereq_(73); _dereq_(74); _dereq_(77); window.Selectivity = _dereq_(76);\n    }, {\n      62: 62, 64: 64, 65: 65, 66: 66, 67: 67, 68: 68, 69: 69, 70: 70, 71: 71, 72: 72, 73: 73, 74: 74, 76: 76, 77: 77,\n    }],\n    76: [function (_dereq_, module, exports) {\n\n\n      const assign = _dereq_(40);\n      const isString = _dereq_(54);\n\n      const EventListener = _dereq_(63);\n      const toggleClass = _dereq_(85);\n\n      /**\n * Selectivity Base Constructor.\n *\n * You will never use this constructor directly. Instead, you use $(selector).selectivity(options)\n * to create an instance of either MultipleSelectivity or SingleSelectivity. This class defines all\n * functionality that is common between both.\n *\n * @param options Options object. Accepts the same options as the setOptions method(), in addition\n *                to the following ones:\n *                data - Initial selection data to set. This should be an array of objects with 'id'\n *                       and 'text' properties. This option is mutually exclusive with 'value'.\n *                element - The DOM element to which to attach the Selectivity instance. This\n *                          property is set by the API wrapper.\n *                value - Initial value to set. This should be an array of IDs. This property is\n *                        mutually exclusive with 'data'.\n */\n      function Selectivity(options) {\n        /**\n     * Reference to the currently open dropdown.\n     */\n        this.dropdown = null;\n\n        /**\n     * DOM element to which this instance is attached.\n     */\n        this.el = options.element;\n\n        /**\n     * Whether the input is enabled.\n     *\n     * This is false when the option readOnly is false or the option removeOnly is false.\n     */\n        this.enabled = !options.readOnly && !options.removeOnly;\n\n        /**\n     * DOM element for the input.\n     *\n     * May be null as long as there is no visible input. It is set by initInput().\n     */\n        this.input = null;\n\n        /**\n     * Array of items from which to select. If set, this will be an array of objects with 'id' and\n     * 'text' properties.\n     *\n     * If given, all items are expected to be available locally and all selection operations operate\n     * on this local array only. If null, items are not available locally, and a query function\n     * should be provided to fetch remote data.\n     */\n        this.items = null;\n\n        /**\n     * Options passed to the Selectivity instance or set through setOptions().\n     */\n        this.options = {};\n\n        /**\n     * Mapping of templates.\n     *\n     * Custom templates can be specified in the options object.\n     */\n        this.templates = assign({}, Selectivity.Templates);\n\n        /**\n     * The last used search term.\n     */\n        this.term = '';\n\n        this.setOptions(options);\n\n        if (options.value) {\n          this.setValue(options.value, { triggerChange: false });\n        } else {\n          this.setData(options.data || null, { triggerChange: false });\n        }\n\n        this.el.setAttribute('tabindex', options.tabIndex || 0);\n\n        this.events = new EventListener(this.el, this);\n        this.events.on({\n          blur: this._blur,\n          mouseenter: this._mouseenter,\n          mouseleave: this._mouseleave,\n          'selectivity-close': this._closed,\n        });\n      }\n\n      /**\n * Methods.\n */\n      assign(Selectivity.prototype, {\n        /**\n     * Convenience shortcut for this.el.querySelector(selector).\n     */\n        $(selector) {\n          return this.el.querySelector(selector);\n        },\n\n        /**\n     * Closes the dropdown.\n     */\n        close() {\n          this._clearCloseTimeout();\n\n          if (this.dropdown) {\n            this.dropdown.close();\n            this.dropdown = null;\n          }\n        },\n\n        /**\n     * Destroys the Selectivity instance.\n     */\n        destroy() {\n          this.events.destruct();\n\n          const el = this.el;\n          while (el.firstChild) {\n            el.removeChild(el.firstChild);\n          }\n          el.selectivity = null;\n        },\n\n        /**\n     * Filters the results to be displayed in the dropdown.\n     *\n     * The default implementation simply returns the results unfiltered, but the MultipleSelectivity\n     * class overrides this method to filter out any items that have already been selected.\n     *\n     * @param results Array of items with 'id' and 'text' properties.\n     *\n     * @return The filtered array.\n     */\n        filterResults(results) {\n          return results;\n        },\n\n        /**\n     * Applies focus to the input.\n     */\n        focus() {\n          this._clearCloseTimeout();\n\n          this._focusing = true;\n\n          if (this.input) {\n            this.input.focus();\n          }\n\n          this._focusing = false;\n        },\n\n        /**\n     * Returns the selection data.\n     */\n        getData() {\n          return this._data;\n        },\n\n        /**\n     * Returns the correct item for a given ID.\n     *\n     * @param id The ID to get the item for.\n     *\n     * @return The corresponding item. Will be an object with 'id' and 'text' properties or null if\n     *         the item cannot be found. Note that if no items are defined, this method assumes the\n     *         text labels will be equal to the IDs.\n     */\n        getItemForId(id) {\n          const items = this.items;\n          if (items) {\n            return Selectivity.findNestedById(items, id);\n          } else if (id === null) {\n            return null;\n          } else {\n            return { id, text: `${id}` };\n          }\n        },\n\n        /**\n     * Returns the item ID related to an element or event target.\n     *\n     * @param elementOrEvent The DOM element or event to get the item ID for.\n     *\n     * @return Item ID or null if no ID could be found.\n     */\n        getRelatedItemId(elementOrEvent) {\n          let el = elementOrEvent.target || elementOrEvent;\n          while (el) {\n            if (el.hasAttribute('data-item-id')) {\n              break;\n            }\n            el = el.parentNode;\n          }\n\n          if (!el) {\n            return null;\n          }\n\n          const id = el.getAttribute('data-item-id');\n\n          // IDs can be either numbers or strings, but attribute values are always strings, so we\n          // will have to find out whether the item ID ought to be a number or string ourselves.\n          if (Selectivity.findById(this._data || [], id)) {\n            return id;\n          } else {\n            let dropdown = this.dropdown;\n            while (dropdown) {\n              if (Selectivity.findNestedById(dropdown.results, id)) {\n                return id;\n              }\n              // FIXME: reference to submenu plugin doesn't belong in base\n              dropdown = dropdown.submenu;\n            }\n            const number = parseInt(id, 10);\n            return `${number}` === id ? number : id;\n          }\n        },\n\n        /**\n     * Returns the value of the selection.\n     */\n        getValue() {\n          return this._value;\n        },\n\n        /**\n     * Initializes the input element.\n     *\n     * Sets the input property, invokes all input listeners and (by default) attaches the action of\n     * searching when something is typed.\n     *\n     * @param input Input element.\n     * @param options Optional options object. May contain the following property:\n     *                search - If false, no event handlers are setup to initiate searching when the\n     *                         user types in the input field. This is useful if you want to use the\n     *                         input only to handle keyboard support.\n     */\n        initInput(input, options) {\n          this.input = input;\n\n          const selectivity = this;\n          const inputListeners = this.options.inputListeners || Selectivity.InputListeners;\n          inputListeners.forEach((listener) => {\n            listener(selectivity, input, options);\n          });\n\n          if (!options || options.search !== false) {\n            input.addEventListener('keyup', (event) => {\n              if (!event.defaultPrevented) {\n                selectivity.search(event.target.value);\n              }\n            });\n          }\n        },\n\n        /**\n     * Opens the dropdown.\n     */\n        open() {\n          if (this._opening || this.dropdown || !this.triggerEvent('selectivity-opening')) {\n            return;\n          }\n\n          this._opening = true;\n\n          const Dropdown = this.options.dropdown || Selectivity.Dropdown;\n          if (Dropdown) {\n            this.dropdown = new Dropdown(this, {\n              items: this.items,\n              position: this.options.positionDropdown,\n              query: this.options.query,\n              showSearchInput: this.options.showSearchInputInDropdown !== false,\n            });\n          }\n\n          this.search(this.input.value);\n\n          this.focus();\n\n          toggleClass(this.el, 'open', true);\n\n          this._opening = false;\n        },\n\n        /**\n     * (Re-)positions the dropdown.\n     */\n        positionDropdown() {\n          if (this.dropdown) {\n            this.dropdown.position();\n          }\n        },\n\n        /**\n     * Searches for results based on the term given.\n     *\n     * If an items array has been passed with the options to the Selectivity instance, a local\n     * search will be performed among those items. Otherwise, the query function specified in the\n     * options will be used to perform the search. If neither is defined, nothing happens.\n     *\n     * @param term Term to search for.\n     */\n        search(term) {\n          this.open();\n\n          if (this.dropdown) {\n            this.dropdown.search(term);\n          }\n        },\n\n        /**\n     * Sets the selection data.\n     *\n     * The selection data contains both IDs and text labels. If you only want to set or get the IDs,\n     * you should use the value() method.\n     *\n     * @param newData New data to set. For a MultipleSelectivity instance the data must be an array\n     *                of objects with 'id' and 'text' properties, for a SingleSelectivity instance\n     *                the data must be a single such object or null to indicate no item is selected.\n     * @param options Optional options object. May contain the following property:\n     *                triggerChange - Set to false to suppress the \"change\" event being triggered.\n     *                                Note this will also cause the UI to not update automatically;\n     *                                so you may want to call rerenderSelection() manually when\n     *                                using this option.\n     */\n        setData(newData, options) {\n          options = options || {};\n\n          newData = this.validateData(newData);\n\n          this._data = newData;\n          this._value = this.getValueForData(newData);\n\n          if (options.triggerChange !== false) {\n            this.triggerChange();\n          }\n        },\n\n        /**\n     * Sets one or more options on this Selectivity instance.\n     *\n     * @param options Options object. May contain one or more of the following properties:\n     *                closeOnSelect - Set to false to keep the dropdown open after the user has\n     *                                selected an item. This is useful if you want to allow the user\n     *                                to quickly select multiple items. The default value is true.\n     *                dropdown - Custom dropdown implementation to use for this instance.\n     *                initSelection - Function to map values by ID to selection data. This function\n     *                                receives two arguments, 'value' and 'callback'. The value is\n     *                                the current value of the selection, which is an ID or an array\n     *                                of IDs depending on the input type. The callback should be\n     *                                invoked with an object or array of objects, respectively,\n     *                                containing 'id' and 'text' properties.\n     *                inputListeners - Array of search input listeners. By default, the global\n     *                                 array Selectivity.InputListeners is used.\n     *                items - Array of items from which to select. Should be an array of objects\n     *                        with 'id' and 'text' properties. As convenience, you may also pass an\n     *                        array of strings, in which case the same string is used for both the\n     *                        'id' and 'text' properties. If items are given, all items are expected\n     *                        to be available locally and all selection operations operate on this\n     *                        local array only. If null, items are not available locally, and a\n     *                        query function should be provided to fetch remote data.\n     *                matcher - Function to determine whether text matches a given search term. Note\n     *                          this function is only used if you have specified an array of items.\n     *                          Receives two arguments:\n     *                          item - The item that should match the search term.\n     *                          term - The search term. Note that for performance reasons, the term\n     *                                 has always been already processed using\n     *                                 Selectivity.transformText().\n     *                          The method should return the item if it matches, and null otherwise.\n     *                          If the item has a children array, the matcher is expected to filter\n     *                          those itself (be sure to only return the filtered array of children\n     *                          in the returned item and not to modify the children of the item\n     *                          argument).\n     *                placeholder - Placeholder text to display when the element has no focus and\n     *                              no selected items.\n     *                positionDropdown - Function to position the dropdown. Receives two arguments:\n     *                                   dropdownEl - The element to be positioned.\n     *                                   selectEl - The element of the Selectivity instance, that\n     *                                              you can position the dropdown to.\n     *                                   The default implementation positions the dropdown element\n     *                                   under the Selectivity's element and gives it the same\n     *                                   width.\n     *                query - Function to use for querying items. Receives a single object as\n     *                        argument with the following properties:\n     *                        callback - Callback to invoke when the results are available. This\n     *                                   callback should be passed a single object as argument with\n     *                                   the following properties:\n     *                                   more - Boolean that can be set to true to indicate there\n     *                                          are more results available. Additional results may\n     *                                          be fetched by the user through pagination.\n     *                                   results - Array of result items. The format for the result\n     *                                             items is the same as for passing local items.\n     *                        offset - This property is only used for pagination and indicates how\n     *                                 many results should be skipped when returning more results.\n     *                        selectivity - The Selectivity instance the query function is used on.\n     *                        term - The search term the user is searching for. Unlike with the\n     *                               matcher function, the term has not been processed using\n     *                               Selectivity.transformText().\n     *                readOnly - If true, disables any modification of the input.\n     *                removeOnly - If true, disables any modification of the input except removing\n     *                             of selected items.\n     *                shouldOpenSubmenu - Function to call that will decide whether a submenu should\n     *                                    be opened. Receives two parameters:\n     *                                    item - The currently highlighted result item.\n     *                                    reason - The reason why the item is being highlighted.\n     *                                             See Dropdown#highlight() for possible values.\n     *                showDropdown - Set to false if you don't want to use any dropdown (you can\n     *                               still open it programmatically using open()).\n     *                showSearchInputInDropdown - Set to false to remove the search input used in\n     *                                            dropdowns. The default is true for single-value\n     *                                            inputs.\n     *                templates - Object with instance-specific templates to override the global\n     *                            templates assigned to Selectivity.Templates.\n     */\n        setOptions(options) {\n          options = options || {};\n\n          const selectivity = this;\n          Selectivity.OptionListeners.forEach((listener) => {\n            listener(selectivity, options);\n          });\n\n          if ('items' in options) {\n            this.items = options.items ? Selectivity.processItems(options.items) : null;\n          }\n          if ('templates' in options) {\n            assign(this.templates, options.templates);\n          }\n\n          assign(this.options, options);\n\n          this.enabled = !this.options.readOnly && !this.options.removeOnly;\n        },\n\n        /**\n     * Sets the value of the selection.\n     *\n     * The value of the selection only concerns the IDs of the selection items. If you are\n     * interested in the IDs and the text labels, you should use the data() method.\n     *\n     * Note that if neither the items option nor the initSelection option have been set, Selectivity\n     * will have no way to determine what text labels should be used with the given IDs in which\n     * case it will assume the text is equal to the ID. This is useful if you're working with tags,\n     * or selecting e-mail addresses for instance, but may not always be what you want.\n     *\n     * @param newValue New value to set. For a MultipleSelectivity instance the value must be an\n     *                 array of IDs, for a SingleSelectivity instance the value must be a single ID\n     *                 (a string or a number) or null to indicate no item is selected.\n     * @param options Optional options object. May contain the following property:\n     *                triggerChange - Set to false to suppress the \"change\" event being triggered.\n     *                                Note this will also cause the UI to not update automatically;\n     *                                so you may want to call rerenderSelection() manually when\n     *                                using this option.\n     */\n        setValue(newValue, options) {\n          options = options || {};\n          const fn = function (item) {\n            if (item && typeof item !== 'string') {\n              if (!this.options.idFunction) {\n                throw new Error('missing id function');\n              }\n              return this.options.idFunction(item);\n            } else {\n              return item;\n            }\n          }.bind(this);\n          let ids = Array.isArray(newValue) ? newValue.map(fn) : fn(newValue);\n          ids = this.validateValue(ids);\n\n          this._value = ids;\n\n          if (this._value && this.options.initSelection) {\n            this.options.initSelection(\n              newValue,\n              (data) => {\n                this._data = this.validateData(data);\n\n                if (options.triggerChange !== false) {\n                  this.triggerChange();\n                }\n                this.rerenderSelection();\n              },\n            );\n          } else {\n            this._data = this.getDataForValue(ids);\n\n            if (options.triggerChange !== false) {\n              this.triggerChange();\n            }\n          }\n        },\n\n        /**\n     * Returns the result of the given template.\n     *\n     * @param templateName Name of the template to process.\n     * @param options Options to pass to the template.\n     *\n     * @return String containing HTML.\n     */\n        template(templateName, options) {\n          const template = this.templates[templateName];\n          if (!template) {\n            throw new Error(`Unknown template: ${templateName}`);\n          }\n\n          if (typeof template === 'function') {\n            return template(options);\n          } else if (template.render) {\n            return template.render(options);\n          } else {\n            return template.toString();\n          }\n        },\n\n        /**\n     * Triggers the change event.\n     *\n     * The event object at least contains the following property:\n     * value - The new value of the Selectivity instance.\n     *\n     * @param Optional additional options added to the event object.\n     */\n        triggerChange(options) {\n          const data = assign({ value: this._value, items: this._data}, options);\n          this.triggerEvent('change', data);\n          this.triggerEvent('selectivity-change', data);\n        },\n\n        /**\n     * Triggers an event on the instance's element.\n     *\n     * @param eventName Name of the event to trigger.\n     * @param data Optional event data to be added to the event object.\n     *\n     * @return Whether the default action of the event may be executed, ie. returns false if\n     *         preventDefault() has been called.\n     */\n        triggerEvent(eventName, data) {\n          const event = document.createEvent('Event');\n          event.initEvent(eventName, /* bubbles: */ false, /* cancelable: */ true);\n          assign(event, data);\n          this.el.dispatchEvent(event);\n          return !event.defaultPrevented;\n        },\n\n        /**\n     * Validates a single item. Throws an exception if the item is invalid.\n     *\n     * @param item The item to validate.\n     *\n     * @return The validated item. May differ from the input item.\n     */\n        validateItem(item) {\n          if (item && Selectivity.isValidId(item.id) && isString(item.text)) {\n            return item;\n          } else {\n            throw new Error('Item should have id (number or string) and text (string) properties');\n          }\n        },\n\n        /**\n     * @private\n     */\n        _blur() {\n          if (!this._focusing && !this.el.classList.contains('hover')) {\n            // Without the timeout it appears clicks on result items are not always properly\n            // handled, especially when the user doesn't click exactly on the text of the result\n            // item. I don't understand really why that happens, or why the timeout has to be so\n            // large, but after trial and error, this now seems to work reliably...\n            this._clearCloseTimeout();\n            this._closeTimeout = setTimeout(this.close.bind(this), 166);\n            this.input.value = '';\n          }\n        },\n\n        /**\n     * @private\n     */\n        _clearCloseTimeout() {\n          if (this._closeTimeout) {\n            clearTimeout(this._closeTimeout);\n            this._closeTimeout = 0;\n          }\n        },\n\n        /**\n     * @private\n     */\n        _closed() {\n          this.dropdown = null;\n\n          toggleClass(this.el, 'open', false);\n        },\n\n        /**\n     * @private\n     */\n        _mouseleave(event) {\n        // If mouseleave happens on any selectivity related element, remove hover class\n          if (!this.el.contains(event.relatedTarget)) {\n            toggleClass(this.el, 'hover', false);\n          }\n        },\n\n        /**\n     * @private\n     */\n        _mouseenter() {\n          toggleClass(this.el, 'hover', true);\n        },\n      });\n\n      /**\n * Dropdown class to use for displaying dropdowns.\n *\n * The default implementation of a dropdown is defined in the selectivity-dropdown module.\n */\n      Selectivity.Dropdown = null;\n\n      /**\n * Array of input listeners.\n *\n * Input listeners are invoked when initInput() is called (typically right after the input is\n * created). Every listener receives three arguments:\n *\n * selectivity - The Selectivity instance.\n * input - DOM element of the input.\n * options - Options that were passed to initInput().\n *\n * An example of a search input listener is the selectivity-keyboard module.\n */\n      Selectivity.InputListeners = [];\n\n      /**\n * Mapping of input types.\n */\n      Selectivity.Inputs = {};\n\n      /**\n * Array of option listeners.\n *\n * Option listeners are invoked when setOptions() is called. Every listener receives two arguments:\n *\n * selectivity - The Selectivity instance.\n * options - The options that are about to be set. The listener may modify this options object.\n *\n * An example of an option listener is the selectivity-traditional module.\n */\n      Selectivity.OptionListeners = [];\n\n      /**\n * Mapping with templates to use for rendering select boxes and dropdowns. See\n * selectivity-templates.js for a useful set of default templates, as well as for documentation of\n * the individual templates.\n */\n      Selectivity.Templates = {};\n\n      /**\n * Finds an item in the given array with the specified ID.\n *\n * @param array Array to search in.\n * @param id ID to search for.\n *\n * @return The item in the array with the given ID, or null if the item was not found.\n */\n      Selectivity.findById = function (array, id) {\n        const index = Selectivity.findIndexById(array, id);\n        return index > -1 ? array[index] : null;\n      };\n\n      /**\n * Finds the index of an item in the given array with the specified ID.\n *\n * @param array Array to search in.\n * @param id ID to search for.\n *\n * @return The index of the item in the array with the given ID, or -1 if the item was not found.\n */\n      Selectivity.findIndexById = function (array, id) {\n        for (let i = 0, length = array.length; i < length; i++) {\n          if (array[i].id === id) {\n            return i;\n          }\n        }\n        return -1;\n      };\n\n      /**\n * Finds an item in the given array with the specified ID. Items in the array may contain 'children'\n * properties which in turn will be searched for the item.\n *\n * @param array Array to search in.\n * @param id ID to search for.\n *\n * @return The item in the array with the given ID, or null if the item was not found.\n */\n      Selectivity.findNestedById = function (array, id) {\n        for (let i = 0, length = array.length; i < length; i++) {\n          var item = array[i],\n            result;\n          if (item.id === id) {\n            result = item;\n          } else if (item.children) {\n            result = Selectivity.findNestedById(item.children, id);\n          } else if (item.submenu && item.submenu.items) {\n            // FIXME: reference to submenu plugin doesn't belong in base\n            result = Selectivity.findNestedById(item.submenu.items, id);\n          }\n          if (result) {\n            return result;\n          }\n        }\n        return null;\n      };\n\n      /**\n * Utility method for inheriting another class.\n *\n * @param SubClass Constructor function of the subclass.\n * @param SuperClass Constructor function of the superclass.\n * @param prototype Object with methods you want to add to the subclass prototype.\n *\n * @return A utility function for calling the methods of the superclass. This function receives two\n *         arguments: The this object on which you want to execute the method and the name of the\n *         method. Any arguments past those are passed to the superclass method.\n */\n      Selectivity.inherits = function (SubClass, SuperClass, prototype) {\n        SubClass.prototype = assign(\n          Object.create(SuperClass.prototype),\n          { constructor: SubClass },\n          prototype,\n        );\n\n        return function (self, methodName) {\n          SuperClass.prototype[methodName].apply(self, Array.prototype.slice.call(arguments, 2));\n        };\n      };\n\n      /**\n * Checks whether a value can be used as a valid ID for selection items. Only numbers and strings\n * are accepted to be used as IDs.\n *\n * @param id The value to check whether it is a valid ID.\n *\n * @return true if the value is a valid ID, false otherwise.\n */\n      Selectivity.isValidId = function (id) {\n        return typeof id === 'number' || isString(id);\n      };\n\n      /**\n * Decides whether a given item matches a search term. The default implementation simply\n * checks whether the term is contained within the item's text, after transforming them using\n * transformText().\n *\n * @param item The item that should match the search term.\n * @param term The search term. Note that for performance reasons, the term has always been already\n *             processed using transformText().\n *\n * @return true if the text matches the term, false otherwise.\n */\n      Selectivity.matcher = function (item, term) {\n        let result = null;\n        if (Selectivity.transformText(item.text).indexOf(term) > -1) {\n          result = item;\n        } else if (item.children) {\n          const matchingChildren = item.children\n            .map((child) => Selectivity.matcher(child, term))\n            .filter((child) => !!child);\n          if (matchingChildren.length) {\n            result = { id: item.id, text: item.text, children: matchingChildren };\n          }\n        }\n        return result;\n      };\n\n      /**\n * Helper function for processing items.\n *\n * @param item The item to process, either as object containing 'id' and 'text' properties or just\n *             as ID. The 'id' property of an item is optional if it has a 'children' property\n *             containing an array of items.\n *\n * @return Object containing 'id' and 'text' properties.\n */\n      Selectivity.processItem = function (item) {\n        if (Selectivity.isValidId(item)) {\n          return { id: item, text: `${item}` };\n        } else if (item && (Selectivity.isValidId(item.id) || item.children) && isString(item.text)) {\n          if (item.children) {\n            item.children = Selectivity.processItems(item.children);\n          }\n\n          return item;\n        } else {\n          throw new Error('invalid item');\n        }\n      };\n\n      /**\n * Helper function for processing an array of items.\n *\n * @param items Array of items to process. See processItem() for details about a single item.\n *\n * @return Array with items.\n */\n      Selectivity.processItems = function (items) {\n        if (Array.isArray(items)) {\n          return items.map(Selectivity.processItem);\n        } else {\n          throw new Error('invalid items');\n        }\n      };\n\n      /**\n * Transforms text in order to find matches. The default implementation casts all strings to\n * lower-case so that any matches found will be case-insensitive.\n *\n * @param string The string to transform.\n *\n * @return The transformed string.\n */\n      Selectivity.transformText = function (string) {\n        return string.toLowerCase();\n      };\n\n      module.exports = Selectivity;\n\n    }, {\n      40: 40, 54: 54, 63: 63, 85: 85,\n    }],\n    77: [function (_dereq_, module, exports) {\n\n\n      const escape = _dereq_(44);\n\n      const Selectivity = _dereq_(76);\n      const Locale = _dereq_(67);\n\n      /**\n * Default set of templates to use with Selectivity.js.\n *\n * Template can be defined as either a string, a function returning a string (like Handlebars\n * templates, for instance), an object containing a render function (like Hogan.js templates, fo\n * instance) or as a function returning a DOM element.\n *\n * Every template must return a single root element.\n */\n      Selectivity.Templates = {\n        /**\n     * Renders the dropdown.\n     *\n     * The template is expected to have at least one element with the class\n     * 'selectivity-results-container', which is where all results will be added to.\n     *\n     * @param options Options object containing the following properties:\n     *                dropdownCssClass - Optional CSS class to add to the top-level element.\n     *                searchInputPlaceholder - Optional placeholder text to display in the search\n     *                                         input in the dropdown.\n     *                showSearchInput - Boolean whether a search input should be shown. If true,\n     *                                  an input element with the 'selectivity-search-input' is\n     *                                  expected.\n     */\n        dropdown(options) {\n          let extraClass = options.dropdownCssClass ? ` ${options.dropdownCssClass}` : '',\n            searchInput = '';\n          if (options.showSearchInput) {\n            extraClass += ' has-search-input';\n\n            const placeholder = options.searchInputPlaceholder;\n            searchInput =\n                `${'<div class=\"selectivity-search-input-container\">' +\n                '<input type=\"text\" class=\"selectivity-search-input\"'}${\n                  placeholder ? ` placeholder=\"${escape(placeholder)}\"` : ''\n                }>` +\n                '</div>';\n          }\n          return (\n            `<div class=\"selectivity-dropdown${\n              extraClass\n            }\">${\n              searchInput\n            }<div class=\"selectivity-results-container\"></div>` +\n            '</div>'\n          );\n        },\n\n        /**\n     * Renders an error message in the dropdown.\n     *\n     * @param options Options object containing the following properties:\n     *                escape - Boolean whether the message should be HTML-escaped.\n     *                message - The message to display.\n     */\n        error(options) {\n          return (\n            `<div class=\"selectivity-error\">${\n              options.escape ? escape(options.message) : options.message\n            }</div>`\n          );\n        },\n\n        /**\n     * Renders a loading indicator in the dropdown.\n     *\n     * This template is expected to have an element with a 'selectivity-loading' class which may be\n     * replaced with actual results.\n     */\n        loading() {\n          return `<div class=\"selectivity-loading\">${Locale.loading}</div>`;\n        },\n\n        /**\n     * Load more indicator.\n     *\n     * This template is expected to have an element with a 'selectivity-load-more' class which, when\n     * clicked, will load more results.\n     */\n        loadMore() {\n          return `<div class=\"selectivity-load-more\">${Locale.loadMore}</div>`;\n        },\n\n        /**\n     * Renders multi-selection input boxes.\n     *\n     * The template is expected to have at least have elements with the following classes:\n     * 'selectivity-multiple-input-container' - The element containing all the selected items and\n     *                                          the input for selecting additional items.\n     * 'selectivity-multiple-input' - The actual input element that allows the user to type to\n     *                                search for more items. When selected items are added, they are\n     *                                inserted right before this element.\n     *\n     * @param options Options object containing the following property:\n     *                enabled - Boolean whether the input is enabled.\n     */\n        multipleSelectInput(options) {\n          return (\n            `<div class=\"selectivity-multiple-input-container\">${\n              options.enabled\n                ? '<input type=\"text\" autocomplete=\"off\" autocorrect=\"off\" ' +\n                  'autocapitalize=\"off\" class=\"selectivity-multiple-input\">'\n                : '<div class=\"selectivity-multiple-input ' + 'selectivity-placeholder\"></div>'\n            }<div class=\"selectivity-clearfix\"></div>` +\n            '</div>'\n          );\n        },\n\n        /**\n     * Renders a selected item in multi-selection input boxes.\n     *\n     * The template is expected to have a top-level element with the class\n     * 'selectivity-multiple-selected-item'. This element is also required to have a 'data-item-id'\n     * attribute with the ID set to that passed through the options object.\n     *\n     * An element with the class 'selectivity-multiple-selected-item-remove' should be present\n     * which, when clicked, will cause the element to be removed.\n     *\n     * @param options Options object containing the following properties:\n     *                highlighted - Boolean whether this item is currently highlighted.\n     *                id - Identifier for the item.\n     *                removable - Boolean whether a remove icon should be displayed.\n     *                text - Text label which the user sees.\n     */\n        multipleSelectedItem(options) {\n          const extraClass = options.highlighted ? ' highlighted' : '';\n          return (\n            `<span class=\"selectivity-multiple-selected-item${\n              extraClass\n            }\" ` +\n            `data-item-id=\"${\n              escape(options.id)\n            }\">${\n              options.removable\n                ? '<a class=\"selectivity-multiple-selected-item-remove\">' +\n                  '<i class=\"fa fa-remove\"></i>' +\n                  '</a>'\n                : ''\n            }${escape(options.text)\n            }</span>`\n          );\n        },\n\n        /**\n     * Renders a message there are no results for the given query.\n     *\n     * @param options Options object containing the following property:\n     *                term - Search term the user is searching for.\n     */\n        noResults(options) {\n          return (\n            `<div class=\"selectivity-error\">${\n              options.term ? Locale.noResultsForTerm(options.term) : Locale.noResults\n            }</div>`\n          );\n        },\n\n        /**\n     * Renders a container for item children.\n     *\n     * The template is expected to have an element with the class 'selectivity-result-children'.\n     *\n     * @param options Options object containing the following property:\n     *                childrenHtml - Rendered HTML for the children.\n     */\n        resultChildren(options) {\n          return `<div class=\"selectivity-result-children\">${options.childrenHtml}</div>`;\n        },\n\n        /**\n     * Render a result item in the dropdown.\n     *\n     * The template is expected to have a top-level element with the class\n     * 'selectivity-result-item'. This element is also required to have a 'data-item-id' attribute\n     * with the ID set to that passed through the options object.\n     *\n     * @param options Options object containing the following properties:\n     *                id - Identifier for the item.\n     *                text - Text label which the user sees.\n     *                disabled - Truthy if the item should be disabled.\n     *                submenu - Truthy if the result item has a menu with subresults.\n     */\n        resultItem(options) {\n          return (\n            `<div class=\"selectivity-result-item${\n              options.disabled ? ' disabled' : ''\n            }\"` +\n            ` data-item-id=\"${\n              escape(options.id)\n            }\">${\n              escape(options.text)\n            }${options.submenu\n              ? '<i class=\"selectivity-submenu-icon fa fa-chevron-right\"></i>'\n              : ''\n            }</div>`\n          );\n        },\n\n        /**\n     * Render a result label in the dropdown.\n     *\n     * The template is expected to have a top-level element with the class\n     * 'selectivity-result-label'.\n     *\n     * @param options Options object containing the following properties:\n     *                text - Text label.\n     */\n        resultLabel(options) {\n          return `<div class=\"selectivity-result-label\">${escape(options.text)}</div>`;\n        },\n\n        /**\n     * Renders single-select input boxes.\n     *\n     * The template is expected to have at least one element with the class\n     * 'selectivity-single-result-container' which is the element containing the selected item or\n     * the placeholder.\n     */\n        singleSelectInput(options) {\n          return (\n            `${'<div class=\"selectivity-single-select\">' +\n            '<input type=\"text\" class=\"selectivity-single-select-input\"'}${\n              options.required ? ' required' : ''\n            }>` +\n            '<div class=\"selectivity-single-result-container\"></div>' +\n            '<i class=\"fa fa-sort-desc selectivity-caret\"></i>' +\n            '</div>'\n          );\n        },\n\n        /**\n     * Renders the placeholder for single-select input boxes.\n     *\n     * The template is expected to have a top-level element with the class\n     * 'selectivity-placeholder'.\n     *\n     * @param options Options object containing the following property:\n     *                placeholder - The placeholder text.\n     */\n        singleSelectPlaceholder(options) {\n          return `<div class=\"selectivity-placeholder\">${escape(options.placeholder)}</div>`;\n        },\n\n        /**\n     * Renders the selected item in single-select input boxes.\n     *\n     * The template is expected to have a top-level element with the class\n     * 'selectivity-single-selected-item'. This element is also required to have a 'data-item-id'\n     * attribute with the ID set to that passed through the options object.\n     *\n     * @param options Options object containing the following properties:\n     *                id - Identifier for the item.\n     *                removable - Boolean whether a remove icon should be displayed.\n     *                text - Text label which the user sees.\n     */\n        singleSelectedItem(options) {\n          return (\n            `${'<span class=\"selectivity-single-selected-item\" ' +\n            'data-item-id=\"'}${\n              escape(options.id)\n            }\">${\n              options.removable\n                ? '<a class=\"selectivity-single-selected-item-remove\">' +\n                  '<i class=\"fa fa-remove\"></i>' +\n                  '</a>'\n                : ''\n            }${escape(options.text)\n            }</span>`\n          );\n        },\n\n        /**\n     * Renders select-box inside single-select input that was initialized on\n     * traditional <select> element.\n     *\n     * @param options Options object containing the following properties:\n     *                name - Name of the <select> element.\n     *                mode - Mode in which select exists, single or multiple.\n     */\n        selectCompliance(options) {\n          const mode = options.mode;\n          let name = options.name;\n          if (mode === 'multiple' && name.slice(-2) !== '[]') {\n            name += '[]';\n          }\n          return (\n            `<select name=\"${name}\"${mode === 'multiple' ? ' multiple' : ''}></select>`\n          );\n        },\n\n        /**\n     * Renders the selected item in compliance <select> element as <option>.\n     *\n     * @param options Options object containing the following properties\n     *                id - Identifier for the item.\n     *                text - Text label which the user sees.\n     */\n        selectOptionCompliance(options) {\n          return (\n            `<option value=\"${\n              escape(options.id)\n            }\" selected>${\n              escape(options.text)\n            }</option>`\n          );\n        },\n      };\n\n    }, {44: 44, 67: 67, 76: 76}],\n    78: [function (_dereq_, module, exports) {\n\n\n      /**\n * Returns a result item with a given item ID.\n *\n * @param resultItems Array of DOM elements representing result items.\n * @param itemId ID of the item to return.\n *\n * @param DOM element of the result item with the given item ID, or null if not found.\n */\n      module.exports = function (resultItems, itemId) {\n        for (let i = 0, length = resultItems.length; i < length; i++) {\n          const resultItem = resultItems[i];\n          const resultId = resultItem.getAttribute('data-item-id');\n          if ((typeof itemId === 'number' ? parseInt(resultId, 10) : resultId) === itemId) {\n            return resultItem;\n          }\n        }\n        return null;\n      };\n\n    }, {}],\n    79: [function (_dereq_, module, exports) {\n\n\n      /**\n * Returns the CSS selector for selecting a specific item by ID.\n *\n * @param selector Generic CSS selector to identify items.\n * @param id ID of the item to select.\n */\n      module.exports = function (selector, id) {\n        const quotedId = `\"${(`${id}`).replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"')}\"`;\n        return `${selector}[data-item-id=${quotedId}]`;\n      };\n\n    }, {}],\n    80: [function (_dereq_, module, exports) {\n\n\n      /**\n * Returns the keyCode value of the given event.\n */\n      module.exports = function (event) {\n        return event.which || event.keyCode || 0;\n      };\n\n    }, {}],\n    81: [function (_dereq_, module, exports) {\n\n\n      /**\n * Returns whether the given element matches the given selector.\n */\n      module.exports = function (el, selector) {\n        const method =\n        el.matches || el.webkitMatchesSelector || el.mozMatchesSelector || el.msMatchesSelector;\n        return method.call(el, selector);\n      };\n\n    }, {}],\n    82: [function (_dereq_, module, exports) {\n\n\n      /**\n * Parses an HTML string and returns the resulting DOM element.\n *\n * @param html HTML representation of the element to parse.\n */\n      module.exports = function (html) {\n        const div = document.createElement('div');\n        div.innerHTML = html;\n        return div.firstChild;\n      };\n\n    }, {}],\n    83: [function (_dereq_, module, exports) {\n\n\n      /**\n * Removes a DOM element.\n *\n * @param el The element to remove.\n */\n      module.exports = function (el) {\n        if (el && el.parentNode) {\n          el.parentNode.removeChild(el);\n        }\n      };\n\n    }, {}],\n    84: [function (_dereq_, module, exports) {\n\n\n      /**\n * Stops event propagation.\n *\n * @param event The event to stop from propagating.\n */\n      module.exports = function (event) {\n        event.stopPropagation();\n      };\n\n    }, {}],\n    85: [function (_dereq_, module, exports) {\n\n\n      /**\n * Toggles a CSS class on an element.\n *\n * @param el The element on which to toggle the CSS class.\n * @param className The CSS class to toggle.\n * @param force If true, the class is added. If false, the class is removed.\n */\n      module.exports = function (el, className, force) {\n        if (el) {\n          el.classList[force ? 'add' : 'remove'](className);\n        }\n      };\n\n    }, {}],\n  }, {}, [75]))(75);\n}));\n{\n  /**\n   * An element wrapping selectivity.js and relying on an operation for suggestions\n   *\n   *    <nuxeo-selectivity operation=\"Directory.SuggestEntries\"\n   *                   multiple\n   *                   params='{\"directoryName\": \"subject\"}'\n   *                   value=\"{{value}}\">\n   *\n   * @appliesMixin Polymer.IronFormElementBehavior\n   * @appliesMixin Polymer.IronValidatableBehavior\n   * @memberof Nuxeo\n   * @demo demo/nuxeo-selectivity/index.html\n   */\n  class SelectivityElement\n    extends mixinBehaviors([IronFormElementBehavior, IronValidatableBehavior], Nuxeo.Element) {\n\n    static get is() {\n      return 'nuxeo-selectivity';\n    }\n\n    static get properties() {\n      return {\n        /**\n         * Label.\n         */\n        label: String,\n\n        /**\n         * Selected value(s).\n         */\n        value: {\n          notify: true,\n          observer: '_valueChanged',\n        },\n\n        /**\n         * Set to `true` to allow multiple selection.\n         */\n        multiple: {\n          type: Boolean,\n          value: false,\n        },\n\n        /**\n         * If true, the dropdown stays open after a selection is made.\n         */\n        stayOpenOnSelect: {\n          type: Boolean,\n          value: false,\n        },\n\n        /**\n         * Set to `true` for read only mode.\n         */\n        readonly: {\n          type: Boolean,\n          value: false,\n          observer: '_readonlyChanged',\n        },\n\n        /**\n         * Minimum number of chars to trigger the suggestions.\n         */\n        minChars: {\n          type: Number,\n          value: 3,\n        },\n\n        /**\n         * Time in ms used to debounce requests.\n         */\n        frequency: {\n          type: Number,\n          value: 300,\n        },\n\n        /**\n         * Placeholder.\n         */\n        placeholder: {\n          type: String,\n          value: ' ',\n          observer: '_placeholderChanged',\n        },\n\n        /**\n         * Separator to use with multiple selection.\n         */\n        separator: {\n          type: String,\n          value: ',',\n        },\n\n        tagging: {\n          type: Boolean,\n          value: false,\n        },\n\n        /**\n         * Function used to get the id from the choice object.\n         */\n        idFunction: {\n          type: Function,\n          value() {\n            return this._idFunction.bind(this);\n          },\n        },\n\n        /**\n         * Formatter for selected entries.\n         */\n        selectionFormatter: {\n          type: Function,\n          value() {\n            return this._selectionFormatter.bind(this);\n          },\n        },\n\n        /**\n         * Formatter for suggested entries.\n         */\n        resultFormatter: {\n          type: Function,\n          value() {\n            return this._resultFormatter.bind(this);\n          },\n        },\n\n        /**\n         * Formatter for new entries.\n         */\n        newEntryFormatter: {\n          type: Function,\n          value() {\n            return this._newEntryFormatter.bind(this);\n          },\n        },\n\n\n        /**\n         * Function that transforms the entries added using the value property into object\n         */\n        resolveEntry: {\n          type: Function,\n          value() {\n            return this._resolveEntry.bind(this);\n          },\n        },\n\n        /**\n         * Function called when an entry is selected.\n         */\n        addedEntryHandler: {\n          type: Function,\n        },\n\n        /**\n         * Function called when an entry is unselected.\n         */\n        removedEntryHandler: {\n          type: Function,\n        },\n\n        /**\n         * Formatter for initial selection.\n         */\n        initSelection: {\n          type: Function,\n          value() {\n            return this._initSelection.bind(this);\n          },\n        },\n\n        maximumSelectionSize: {\n          type: Number,\n          value: -1,\n        },\n\n        data: {\n          type: Array,\n          observer: '_dataChanged',\n        },\n\n        /**\n         * Selected items.\n         */\n        selectedItems: {\n          type: Array,\n          notify: true,\n          observer: '_valueChanged',\n        },\n\n        /**\n         * Selected item.\n         */\n        selectedItem: {\n          type: Object,\n          notify: true,\n          observer: '_valueChanged',\n        },\n\n        /**\n         * Operation to call for suggestions.\n         */\n        operation: String,\n\n        /**\n         * Parameters to use in the operation call (will include `searchTerm`).\n         */\n        params: {\n          type: Object,\n        },\n\n        /**\n         * Results filtering function (optional).\n         */\n        queryResultsFilter: Function,\n\n        /**\n         * Error message to show when `invalid` is true.\n         */\n        errorMessage: String,\n\n        /**\n         * The `content enricher` of the operation.\n         */\n        enrichers: {\n          type: String,\n          value: '',\n        },\n\n        /**\n         *  The headers of the request.\n         */\n        headers: {\n          type: Object,\n          value: null,\n        },\n      };\n    }\n\n    static get template() {\n      return html`\n        <style>\n.selectivity-clearfix {\n  clear: both;\n}\n\n.selectivity-input {\n  display: inline-block;\n  width: 250px;\n}\n\n.selectivity-input select {\n  display: none;\n}\n\n.selectivity-input:focus {\n  outline: none;\n}\n\n.selectivity-placeholder {\n  color: #999;\n}\n/**\n* Dropdown\n*/\n\n.selectivity-dropdown {\n  background: #fff;\n  border-radius: 4px;\n  -webkit-box-shadow: 0 1px 5px 1px rgba(0, 0, 0, 0.15), 0 10px 16px 0 rgba(0, 0, 0, 0.2);\n  box-shadow: 0 1px 5px 1px rgba(0, 0, 0, 0.15), 0 10px 16px 0 rgba(0, 0, 0, 0.2);\n  position: fixed;\n  z-index: 9999;\n}\n\n.selectivity-search-input-container {\n  border-bottom: 1px solid #eee;\n}\n\n.selectivity-search-input {\n  background: transparent;\n  border: 0;\n  outline: 0;\n  width: 100%;\n}\n\n.selectivity-results-container {\n  max-height: 28em;\n  overflow: auto;\n  position: relative;\n}\n\n.selectivity-load-more,\n.selectivity-result-item {\n  cursor: pointer;\n  padding: 7px;\n}\n\n.selectivity-result-children .selectivity-result-item {\n  padding-left: 17px;\n}\n\n.selectivity-load-more.highlight,\n.selectivity-result-item.highlight {\n  background: var(--nuxeo-primary-color);\n  color: #fff;\n}\n\n.selectivity-result-item.disabled {\n  cursor: default;\n  color: #999;\n}\n\n.selectivity-result-item:first-child {\n  border-radius: 4px 4px 0 0;\n}\n\n.selectivity-dropdown.has-search-input .selectivity-result-item:first-child {\n  border-radius: 0;\n}\n\n.selectivity-result-label {\n  font-weight: bold;\n}\n\n.selectivity-load-more,\n.selectivity-result-item:last-child,\n.selectivity-result-children:last-child .selectivity-result-item:last-child {\n  border-radius: 0 0 4px 4px;\n}\n\n.selectivity-result-children .selectivity-result-item:last-child {\n  border-radius: 0;\n}\n\n.selectivity-error,\n.selectivity-loading,\n.selectivity-search-input-container,\n.selectivity-result-label {\n  padding: 7px;\n}\n/**\n* Multi-selection input\n*/\n\n#input:not([readonly]) .selectivity-multiple-input-container {\n  border-bottom: 1px solid #3a3a54;\n}\n\n.selectivity-multiple-input-container {\n  cursor: text;\n  min-height: 2em;\n  max-height: 10em;\n  overflow: auto;\n  padding: 14px 2px 0px 2px;\n}\n\n.selectivity-multiple-input,\ninput[type='text'].selectivity-multiple-input {\n  background-color: transparent;\n  border: none;\n  float: left;\n  font: inherit;\n  max-width: 100%;\n  outline: 0;\n  padding: 0;\n}\n\n.selectivity-multiple-input:focus,\ninput[type='text'].selectivity-multiple-input:focus {\n  background-color: transparent;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  outline: none;\n}\n\n.selectivity-multiple-input::-ms-clear {\n  display: none;\n}\n\n.selectivity-multiple-input::placeholder {\n  color: #999;\n}\n\n.selectivity-multiple-selected-item {\n  background: none var(--nuxeo-tag-background, #fff);\n  border-radius: 3px;\n  cursor: default;\n  float: left;\n  line-height: 2em;\n  margin: 2px;\n  padding: 0 5px;\n  position: relative;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -webkit-user-select: none;\n  user-select: none;\n  white-space: nowrap;\n  @apply --nuxeo-tag;\n}\n\n.selectivity-multiple-selected-item.highlighted {\n  background-color: #ccc;\n}\n\n.selectivity-multiple-selected-item-remove, .selectivity-single-selected-item-remove {\n  color: #000;\n  cursor: pointer;\n  margin-left: -5px;\n  padding: 5px;\n}\n/**\n* Single-selection input\n*/\n\n#input:not([readonly]) .selectivity-single-select {\n  border-bottom: 1px solid #3a3a54;\n}\n\n#input[readonly] .selectivity-caret {\n  display: none;\n}\n\n.selectivity-single-select {\n  cursor: pointer;\n  min-height: calc(2em + 4px);\n  padding: 5px;\n  position: relative;\n  -webkit-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.selectivity-single-select-input {\n  opacity: 0;\n}\n\n.selectivity-single-result-container {\n  position: absolute;\n  top: 1.05em;\n  right: 5px;\n  left: 5px;\n  overflow: hidden;\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.selectivity-single-selected-item {\n  color: #000;\n  margin: 2px 2px 0px 2px;\n  @apply --nuxeo-tag;\n}\n\n.selectivity-caret {\n  position: absolute;\n  top: 1.05em;\n  right: 5px;\n}\n\n@media only screen and (max-device-width: 480px) {\n  .selectivity-single-result-container {\n    right: 5px;\n  }\n\n  .selectivity-caret {\n    display: none;\n  }\n}\n/**\n* Submenu\n*/\n\n.selectivity-submenu-icon {\n  position: absolute;\n  right: 4px;\n}\n\n.selectivity-remove:before,\n.fa-close:before,\n.fa-times:before {\n  content: \"\\\\00d7\";\n}\n.selectivity-caret:before {\n  content: \"\\\\25bc\";\n}\n        :host {\n            display: block;\n            position: relative;\n            padding-bottom: 8px;\n        }\n\n        :host([hidden]) {\n            display: none;\n        }\n\n        :host([invalid]) .label,\n        .error {\n            color: var(--paper-input-container-invalid-color, red);\n        }\n\n        :host([invalid]) .error {\n            opacity: 1;\n            font-size: .923rem;\n        }\n\n        .label {\n            @apply --nuxeo-label;\n        }\n\n        .label[required]::after {\n            display: inline-block;\n            content: '*';\n            margin-left: 4px;\n            color: var(--paper-input-container-invalid-color, red);\n            font-size: 1.2em;\n        }\n\n        .preserve-white-space {\n            white-space: pre;\n        }\n\n        </style>\n\n        <nuxeo-operation id=\"op\" op=\"[[operation]]\" enrichers=\"[[enrichers]]\" headers=\"[[headers]]\"></nuxeo-operation>\n\n        <label class=\"label\" hidden$=\"[[!label]]\" required$=\"[[required]]\">[[label]]</label>\n\n        <div id=\"input\" readonly$=\"[[readonly]]\"></div>\n\n        <label class=\"error\" hidden$=\"[[!invalid]]\">[[errorMessage]]</label>\n      `;\n    }\n\n    connectedCallback() {\n      super.connectedCallback();\n      const options = {\n        searchFloor: this.minChars, // minimum length a search value should be before choices are searched\n        tokenSeparators: [this.separator],\n        width: '100%',\n        readOnly: this.readonly,\n        backspaceHighlightsBeforeDelete: true,\n\n        // initialize selection and create entries\n        initSelection: (value, callback) => {\n          if (!value) return;\n\n          const prep = (item) => {\n            const id = this.idFunction(item);\n            return {\n              id,\n              text: id,\n              item,\n            };\n          };\n\n          this.initSelection(value, (selection) => {\n            callback(this.multiple ? selection.map(prep) : prep(selection));\n          });\n        },\n\n        idFunction: (value) => this.idFunction(value),\n\n        // override templates since formatter should already escape text\n        templates: {\n          resultItem: (opts) => (\n            `<div class=\"selectivity-result-item${opts.disabled ? ' disabled' : ''}\"\n                  style=\"padding-left: ${7 + (10 * opts.depth)}px\"\n                  data-item-id=\"${escapeHTML(opts.id)}\">${this.resultFormatter(opts.item)}</div>`\n          ),\n\n          resultLabel: (opts) => (\n            `<div class=\"preserve-white-space selectivity-result-label\"\n                  style=\"padding-left: ${7 + (10 * opts.depth)}px\">${escapeHTML(opts.text)}</div>`\n          ),\n\n          singleSelectedItem: (opts) => (\n            `${'<span class=\"selectivity-single-selected-item\" ' +\n            'data-item-id=\"'}${escapeHTML(opts.id)}\">${\n              opts.removable ? '<a class=\"preserve-white-space selectivity-single-selected-item-remove\">' +\n                  '<i class=\"selectivity-remove\"></i>' +\n                  '</a>'\n                : ''\n            }${this.selectionFormatter(opts.item || opts)}</span>`\n          ),\n\n          multipleSelectedItem: (opts) => {\n            const extraClass = opts.highlighted ? ' highlighted' : '';\n            return (\n              `<span class=\"selectivity-multiple-selected-item${extraClass}\"\n                     data-item-id=\"${escapeHTML(opts.id)}\">${\n                opts.removable ? '<a class=\"preserve-white-space selectivity-multiple-selected-item-remove\">' +\n                    '<i class=\"selectivity-remove\"></i>' +\n                    '</a>'\n                  : ''\n              }${this.selectionFormatter(opts.item || opts)}</span>`);\n          },\n        },\n      };\n\n      const InputType = Selectivity.Inputs[this.multiple ? 'Multiple' : 'Single'];\n      options.element = this.$.input;\n\n      options.closeOnSelect = !this.stayOpenOnSelect;\n\n      if (!this.readonly) {\n        options.placeholder = this.placeholder;\n        options.allowClear = !this.required;\n      }\n\n      if (this.data) {\n        options.items = this._wrap(this.data);\n      }\n\n      options.query = (query) => {\n        if (query.term.length < this.minChars) {\n          query.error(`Please enter ${this.minChars} or more character`);\n          return;\n        }\n        // debounce requests\n        this._debouncer = Debouncer.debounce(\n          this._debouncer,\n          timeOut.after(this.frequency), () => {\n            this._query(query);\n          },\n        );\n      };\n\n      // createTokenItem is not supported in single inputs in selectivity\n      if (this.multiple && this.tagging) {\n        options.createTokenItem = (term) => this._wrap(this.newEntryFormatter(term));\n      }\n\n      this._updateSelectionHandler = this._updateSelection.bind(this);\n      this.$.input.addEventListener('selectivity-change', this._updateSelectionHandler);\n\n      this._selectivity = new InputType(options);\n\n      if (this.value || this.selectedItem || this.selectedItems) {\n        setTimeout(() => {\n          this._valueChanged(this.value || this.selectedItem || this.selectedItems);\n        }, 100);\n      }\n\n      // scope styles\n      this.scopeSubtree(this.$.input, true);\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      this.$.input.removeEventListener('selectivity-change', this._updateSelectionHandler);\n      this._updateSelectionHandler = null;\n      this._selectivity = null;\n    }\n\n    _getValidity() {\n      if (!this.required) {\n        return true;\n      }\n      return this.multiple ? !!this.value && this.value.length > 0 : !!this.value;\n    }\n\n    _initSelection(value, callback) {\n      if (!this.multiple) {\n        return callback(this.resolveEntry(value));\n      }\n      return callback(value.map(this.resolveEntry.bind(this)));\n    }\n\n    _resolveEntry(entry) {\n      if (this.data) {\n        for (let i = 0; i < this.data.length; i++) {\n          if (this.idFunction(this.data[i]) === entry) {\n            return this.data[i];\n          }\n        }\n      } else {\n        return { id: this.idFunction(entry), displayLabel: this.resultFormatter(entry) };\n      }\n    }\n\n    _updateSelection(e) {\n      this._inUpdateSelection = true;\n      this.value = this.multiple ? e.value.slice(0) : e.value;\n      if (this.multiple) {\n        const items = [];\n        const valS = e.items.slice(0);\n        if (valS) {\n          valS.forEach((el) => {\n            items.push(el.item ? el.item : el);\n          });\n        }\n        this.selectedItems = items;\n      } else {\n        this.set('selectedItem', e.items ? e.items.item : null);\n      }\n      this._inUpdateSelection = false;\n      if (e.added) {\n        if (this.addedEntryHandler) {\n          this.addedEntryHandler(e.added);\n        }\n      } else if (e.removed) {\n        if (this.removedEntryHandler) {\n          this.removedEntryHandler(e.removed);\n        }\n      }\n    }\n\n    _valueChanged(newValue) {\n      if (this._selectivity && !this._inUpdateSelection) {\n        if (newValue) {\n          this._selectivity.setValue(newValue, { triggerChange: false });\n        } else {\n          const cv = this._selectivity.getValue();\n          if ((this.multiple && cv.length > 0) || (!this.multiple && cv)) {\n            // in cases where newValue is either undefined or null, clear the value\n            this._selectivity.clear();\n          }\n        }\n      }\n    }\n\n    _dataChanged() {\n      if (this._selectivity) {\n        this._selectivity.setOptions({ items: this._wrap(this.data) });\n      }\n    }\n\n    _placeholderChanged() {\n      this.$.input.setAttribute('placeholder', this.placeholder);\n    }\n\n    _readonlyChanged() {\n      if (this._selectivity) {\n        this._selectivity.setOptions({ readOnly: this.readonly });\n      }\n    }\n\n    _idFunction(item) {\n      return item.computedId || item.uid || item.id || item;\n    }\n\n    _newEntryFormatter(term) {\n      return { id: term, displayLabel: term };\n    }\n\n    _selectionFormatter(item) {\n      return escapeHTML(item.displayLabel || item.title || item.text || item);\n    }\n\n    _resultFormatter(item) {\n      return escapeHTML(item.displayLabel || item.title || item.text || item);\n    }\n\n    _wrap(value) {\n      const fn = (item, level) => {\n        const depth = level || 0;\n        const id = this.idFunction(item);\n        const entry = {\n          id,\n          text: item.displayLabel || item.text || id || '',\n          item,\n          depth,\n        };\n        if (item.children) {\n          entry.children = item.children.map((child) => fn(child, depth + 1));\n        }\n        return entry;\n      };\n      return Array.isArray(value) ? value.map((item) => fn(item)) : fn(value);\n    }\n\n    _triggerQueryCallback(query, results) {\n      if (this.queryResultsFilter) {\n        results = results.filter(this.queryResultsFilter);\n      }\n      if (this.tagging && query.term) {\n        const exists = results.some((item) => item.id === query.term);\n        if (!exists) {\n          results.push(this.newEntryFormatter(query.term));\n        }\n      }\n      query.callback({\n        results: this._wrap(results),\n      });\n    }\n\n    // Implements abstract Nuxeo.Select2 methods\n    _query(query) {\n      if (this.data) {\n        return this._triggerQueryCallback(query, this.data);\n      }\n      const params = this.params || {};\n      params.searchTerm = query.term;\n      this.$.op.params = params;\n      this.$.op.execute().then((response) => {\n        let results = Array.isArray(response.entries) ? response.entries : response;\n        this._triggerQueryCallback(query, results);\n      });\n    }\n  }\n\n  customElements.define(SelectivityElement.is, SelectivityElement);\n  Nuxeo.Selectivity = SelectivityElement;\n}\n\nexport function escapeHTML(markup) {\n  const replaceMap = {\n    '\\\\': '&#92;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    '\\'': '&#39;',\n    '/': '&#47;',\n  };\n\n  // Do not try to escape the markup if it's not a string\n  if (typeof markup !== 'string') {\n    return markup;\n  }\n\n  return String(markup).replace(/[&<>\"'/\\\\]/g, (match) => replaceMap[match]);\n};\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\n/*\n * @license\n * (C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nwindow.nuxeo = window.nuxeo || {};\nwindow.nuxeo.I18n = window.nuxeo.I18n || {};\n\n/**\n * Translates the given key.\n * Also accepts a default value and multiple arguments which will be replaced on the value.\n */\nwindow.nuxeo.I18n.translate =\n  window.nuxeo.I18n.translate ||\n  function(...args) {\n    const language = window.nuxeo.I18n.language || 'en';\n    const key = args[0];\n    let value = (window.nuxeo.I18n[language] && window.nuxeo.I18n[language][key]) || key;\n    const params = Array.prototype.slice.call(args, 1);\n    for (let i = 0; i < params.length; i++) {\n      value = value.replace(`{${i}}`, params[i]);\n    } // improve this to use both numbered and named parameters\n    return value;\n  };\n\n/**\n * loads a locale using a locale resolver\n */\nwindow.nuxeo.I18n.loadLocale = function() {\n  return window.nuxeo.I18n.localeResolver\n    ? window.nuxeo.I18n.localeResolver().then(() => {\n        // TODO we should refactor this later to use a factory function instead; it requires factoring the resolver\n        // as well.\n        window.nuxeo.I18n.translate = window.nuxeo.I18n.translate.bind(null);\n        document.dispatchEvent(new Event('i18n-locale-loaded'));\n      })\n    : new Promise(() => {});\n};\n\n/**\n * The default locale resolver that reads labels from JSON files in a folder, with format messages.<language>.json\n */\nexport function XHRLocaleResolver(msgFolder) {\n  return function() {\n    return new Promise((resolve) => {\n      // point all english based locales to the reference file\n      if (window.nuxeo.I18n.language.startsWith('en-')) {\n        window.nuxeo.I18n.language = 'en';\n      }\n      let language = window.nuxeo.I18n.language || 'en';\n      function loadLang(url) {\n        const referenceFile = `${msgFolder}/messages.json`;\n        const xhr = new XMLHttpRequest();\n        xhr.open('GET', url, true);\n        xhr.onreadystatechange = function() {\n          if (xhr.readyState === 4) {\n            if (xhr.status === 200) {\n              window.nuxeo.I18n[language] = JSON.parse(this.response); // cache this locale\n              window.nuxeo.I18n.language = language;\n              resolve(this.response);\n            } else if (xhr.status === 404 && url !== referenceFile) {\n              console.warn(`Could not find locale \"${language}\". Defaulting to \"en\".`);\n              language = 'en';\n              loadLang(referenceFile); // default to messages.json\n            }\n          }\n        };\n        xhr.onerror = function() {\n          console.error(`Failed to load ${url}`);\n        };\n        xhr.send();\n      }\n      const url = `${msgFolder}/messages${language === 'en' ? '' : `-${language}`}.json`;\n      loadLang(url);\n    });\n  };\n}\n\n/**\n * `Nuxeo.I18nBehavior` provides a `i18n` helper function for translations.\n *\n * @polymerBehavior\n */\nexport const I18nBehavior = {\n  properties: {\n    /**\n     * Returns the translation for the given key.\n     */\n    i18n: {\n      type: Function,\n      notify: true,\n      value() {\n        return window.nuxeo.I18n.translate;\n      },\n    },\n  },\n\n  created() {\n    this.localeLoadedHandler = this.refreshI18n.bind(this);\n    document.addEventListener('i18n-locale-loaded', this.localeLoadedHandler);\n  },\n\n  detached() {\n    document.removeEventListener('i18n-locale-loaded', this.localeLoadedHandler);\n    this.localeLoadedHandler = null;\n  },\n\n  refreshI18n() {\n    // this.i18n = null;\n    this.set('i18n', window.nuxeo.I18n.translate);\n  },\n};\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\nimport '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/iron-icons/iron-icons.js';\nimport '@nuxeo/nuxeo-elements/nuxeo-element.js';\nimport '@nuxeo/nuxeo-elements/nuxeo-operation.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/polymer/lib/elements/dom-if.js';\nimport { FiltersBehavior } from '../nuxeo-filters-behavior.js';\nimport { I18nBehavior } from '../nuxeo-i18n-behavior.js';\nimport '../nuxeo-icons.js';\nimport '../widgets/nuxeo-tooltip.js';\nimport './nuxeo-action-button-styles.js';\n\n{\n  /**\n   * A toggle button element for adding/removing a document from the favorites.\n   *\n   * Example:\n   *\n   *     <nuxeo-favorites-toggle-button document=\"[[document]]\"></nuxeo-favorites-toggle-button>\n   *\n   * Custom property | Description | Default\n   * ----------------|-------------|----------\n   * `--nuxeo-action-color-activated` | Color of the icon when activated | #00aded\n   *\n   * @appliesMixin Nuxeo.I18nBehavior\n   * @appliesMixin Nuxeo.FiltersBehavior\n   * @memberof Nuxeo\n   * @demo demo/nuxeo-favorites-toggle-button/index.html\n   */\n  class FavoritesToggleButton extends mixinBehaviors([I18nBehavior, FiltersBehavior], Nuxeo.Element) {\n    static get template() {\n      return html`\n        <style include=\"nuxeo-action-button-styles\">\n          :host([favorite]) paper-icon-button {\n            color: var(--icon-toggle-pressed-color, var(--nuxeo-action-color-activated));\n          }\n        </style>\n\n        <nuxeo-operation id=\"opAdd\" op=\"Document.AddToFavorites\" input=\"[[document.uid]]\"></nuxeo-operation>\n        <nuxeo-operation id=\"opRemove\" op=\"Document.RemoveFromFavorites\" input=\"[[document.uid]]\"></nuxeo-operation>\n\n        <dom-if if=\"[[_isAvailable(document)]]\">\n          <template>\n            <div class=\"action\">\n              <paper-icon-button icon=\"[[icon]]\" noink></paper-icon-button>\n              <span class=\"label\" hidden$=\"[[!showLabel]]\">[[_label]]</span>\n            </div>\n            <nuxeo-tooltip>[[_label]]</nuxeo-tooltip>\n          </template>\n        </dom-if>\n      `;\n    }\n\n    static get is() {\n      return 'nuxeo-favorites-toggle-button';\n    }\n\n    static get properties() {\n      return {\n        /**\n         * Input document.\n         */\n        document: {\n          type: Object,\n          observer: '_documentChanged',\n        },\n\n        /**\n         * Icon to use (iconset_name:icon_name).\n         */\n        icon: {\n          type: String,\n          value: 'nuxeo:favorites',\n        },\n\n        favorite: {\n          type: Boolean,\n          readOnly: true,\n          notify: true,\n          reflectToAttribute: true,\n        },\n\n        /**\n         * `true` if the action should display the label, `false` otherwise.\n         * @private\n         */\n        showLabel: {\n          type: Boolean,\n          value: false,\n        },\n\n        _label: {\n          type: String,\n          computed: '_computeLabel(favorite, i18n)',\n        },\n      };\n    }\n\n    ready() {\n      super.ready();\n      this.removeFromFavoritesHandler = (e) => {\n        if (this.document && e.detail.docUid && e.detail.docUid === this.document.uid) {\n          this._setFavorite(false);\n        }\n      };\n      window.addEventListener('removed-from-favorites', this.removeFromFavoritesHandler);\n      this.addEventListener('click', this._toggle);\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      window.removeEventListener('removed-from-favorites', this.removeFromFavoritesHandler);\n      this.removeFromFavoritesHandler = null;\n    }\n\n    _isAvailable(doc) {\n      return this.isCollectionMember(doc);\n    }\n\n    /**\n     * Fired when a document is added to favorites.\n     * @event added-to-favorites\n     */\n    /**\n     * Fired when a document is removed from favorites.\n     * @event removed-from-favorites\n     */\n    _toggle() {\n      if (!this.favorite) {\n        this.$.opAdd.execute().then(() => {\n          this.dispatchEvent(\n            new CustomEvent('added-to-favorites', {\n              composed: true,\n              bubbles: true,\n              detail: { doc: this.document },\n            }),\n          );\n          this._setFavorite(true);\n        });\n      } else {\n        this.$.opRemove.execute().then(() => {\n          this.dispatchEvent(\n            new CustomEvent('removed-from-favorites', {\n              composed: true,\n              bubbles: true,\n              detail: { doc: this.document },\n            }),\n          );\n          this._setFavorite(false);\n        });\n      }\n    }\n\n    _computeLabel(favorite) {\n      return this.i18n && this.i18n(`favoritesToggleButton.tooltip.${favorite ? 'remove' : 'add'}`);\n    }\n\n    _documentChanged() {\n      this._setFavorite(this.isFavorite(this.document));\n    }\n  }\n\n  customElements.define(FavoritesToggleButton.is, FavoritesToggleButton);\n  Nuxeo.FavoritesToggleButton = FavoritesToggleButton;\n}\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { FlattenedNodesObserver } from '@polymer/polymer/lib/utils/flattened-nodes-observer.js';\nimport { idlePeriod, microTask } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport '@nuxeo/nuxeo-elements/nuxeo-element.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport '@polymer/paper-menu-button/paper-menu-button.js';\nimport { I18nBehavior } from '../nuxeo-i18n-behavior.js';\nimport './nuxeo-tooltip.js';\n\n{\n  /**\n   * A responsive menu that only displays elements fitting the available space. Remaining elements will be placed\n   * in a dropdown menu.\n   *\n   * Example:\n   *\n   *     <nuxeo-actions-menu>\n   *       <nuxeo-add-to-collection-button document=\"[[document]]\"></nuxeo-add-to-collection-button>\n   *       <nuxeo-preview-button document=\"[[document]]\"></nuxeo-preview-button>\n   *       <nuxeo-favorites-toggle-button document=\"[[document]]\"></nuxeo-favorites-toggle-button>\n   *     </nuxeo-actions-menu>\n   *\n   * @appliesMixin Polymer.IronResizableBehavior\n   * @memberof Nuxeo\n   * @demo demo/nuxeo-actions-menu/index.html\n   */\n  class ActionsMenu extends mixinBehaviors([IronResizableBehavior, I18nBehavior], Nuxeo.Element) {\n    static get template() {\n      return html`\n        <style>\n          :host,\n          #main {\n            @apply --layout-horizontal;\n            @apply --layout-center;\n          }\n\n          [hidden] {\n            display: none !important;\n          }\n\n          #reparent,\n          #reparent > * {\n            width: 0;\n            height: 0;\n            overflow: hidden;\n          }\n\n          #slot::slotted(*), /* chrome, safari */\n          #main::slotted(*) /* firefox, edge */ {\n            @apply --nuxeo-actions-menu-main;\n          }\n\n          #dropdown::slotted(*), /* chrome, safari */\n          paper-listbox::slotted(*) /* firefox, edge */ {\n            outline: none;\n            user-select: none;\n            @apply --nuxeo-actions-menu-dropdown;\n          }\n\n          paper-menu-button {\n            --paper-menu-button: {\n              padding: 0;\n            }\n          }\n\n          paper-listbox {\n            @apply --layout-vertical;\n          }\n        </style>\n\n        <div id=\"main\">\n          <slot id=\"slot\"></slot>\n        </div>\n        <div id=\"reparent\"></div>\n        <paper-menu-button id=\"dropdownButton\" close-on-activate no-overlap horizontal-align=\"right\">\n          <paper-icon-button icon=\"icons:more-vert\" slot=\"dropdown-trigger\" alt=\"dropdown\"></paper-icon-button>\n          <paper-listbox slot=\"dropdown-content\">\n            <slot id=\"dropdown\" name=\"dropdown\"></slot>\n          </paper-listbox>\n        </paper-menu-button>\n        <paper-tooltip for=\"dropdownButton\">[[i18n('actionsMenu.more')]]</paper-tooltip>\n      `;\n    }\n\n    static get is() {\n      return 'nuxeo-actions-menu';\n    }\n\n    connectedCallback() {\n      super.connectedCallback();\n      this._observer = new FlattenedNodesObserver(this, ({ addedNodes, removedNodes }) => {\n        // mark unresolved custom elements\n        const unresolved = addedNodes.filter(\n          (node) => node.tagName && node.tagName.includes('-') && !customElements.get(node.tagName.toLowerCase()),\n        );\n        // defer rendering for non resolved elements\n        unresolved.forEach((node) =>\n          customElements.whenDefined(node.tagName.toLowerCase()).then(this._layout.bind(this)),\n        );\n        if ((addedNodes.length > 0 && unresolved.length === 0) || removedNodes.length > 0) {\n          // do instant rendering if we're removing nodes or adding at least one resolved element\n          this._layout();\n        }\n      });\n      this.addEventListener('iron-resize', this._layout);\n      this.addEventListener('dom-change', this._layout);\n      this.addEventListener('iron-overlay-opened', this._reparent);\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      this._observer.disconnect();\n      this.removeEventListener('iron-resize', this._layout);\n      this.removeEventListener('dom-change', this._layout);\n      this.removeEventListener('iron-overlay-opened', this._reparent);\n    }\n\n    ready() {\n      super.ready();\n    }\n\n    get contentWidth() {\n      return this._getMenuElements().reduce((sum, current) => sum + current.clientWidth, 0);\n    }\n\n    _reparent(e) {\n      const src = e.composedPath()[0];\n      if ((src.tagName === 'NUXEO-DIALOG' || src.tagName === 'PAPER-DIALOG') && e.target.slot === 'dropdown') {\n        const parent = e.target.parentElement;\n        const sibling = e.target.nextElementSibling;\n        const action = e.target;\n        /**\n         * XXX: Instead of reparenting dialogs, this handler reparents the actions that trigger dialogs instead, to\n         * prevent issues with stacking contexts. The goal is threefold:\n         *  1) to prevent the backdrop from overlaping the dialog\n         *  2) to prevent the dialog from disappearing when the dropdown is closed\n         *  3) to preserve the dialogs inside the actions, which might need to be accessible for custom logics\n         */\n        idlePeriod.run(() => {\n          this.$.reparent.appendChild(action);\n          action._actionsMenuReparent =\n            action._actionsMenuReparent ||\n            ((evt) => {\n              let path = evt.composedPath();\n              if (path[0].tagName !== 'NUXEO-DIALOG' && path[0].tagName !== 'PAPER-DIALOG') {\n                // we don't want to move the action back if the event is comming from a non-dialog element\n                return;\n              }\n              path = path.slice(0, path.findIndex((el) => el === action));\n              if (path.filter((el) => el.tagName === 'NUXEO-DIALOG' || el.tagName === 'PAPER-DIALOG').length > 1) {\n                // nor if it comes from an inner dialog\n                return;\n              }\n              parent.insertBefore(action, sibling);\n            });\n          action.addEventListener('iron-overlay-closed', action._actionsMenuReparent);\n        });\n      }\n    }\n\n    _getMenuElements() {\n      return this.$.slot.assignedNodes({ flatten: true }).filter((node) => node.nodeType === Node.ELEMENT_NODE);\n    }\n\n    _getDropdownElements() {\n      return this.$.dropdown.assignedNodes({ flatten: true }).filter((node) => node.nodeType === Node.ELEMENT_NODE);\n    }\n\n    _moveToMenu(el) {\n      el.slot = '';\n      el.removeAttribute('show-label');\n    }\n\n    _moveToDropdown(el) {\n      el.slot = 'dropdown';\n      el.setAttribute('show-label', '');\n    }\n\n    _layout(e) {\n      if (e && e.type && e.composedPath().find((el) => el.id === 'reparent' || el.id === 'dropdownButton')) {\n        return; // skip events from within reparented actions\n      }\n      this.__layoutDebouncer = Debouncer.debounce(this.__layoutDebouncer, microTask, () => {\n        let els = this._getDropdownElements();\n        /**\n         * XXX: We're using this.contentWidth instead of this.scrollWidth because it takes too much time to be\n         * updated on polyfilled browsers (Firex and Edge), leading to an empty menu if there's a single element\n         * that doesn't fit on the menu.\n         */\n        while (els.length && this.contentWidth <= this.clientWidth) {\n          this._moveToMenu(els.shift());\n        }\n        if (!els.length) {\n          this.$.dropdownButton.hidden = true;\n        }\n        // let's move any element in the menu to the \"dropdown\" slot if it doesn't fit\n        els = this._getMenuElements();\n        while (els.length && this.contentWidth + this.$.dropdownButton.offsetWidth > this.clientWidth) {\n          this._moveToDropdown(els.pop());\n          if (this.$.dropdownButton.hidden) {\n            this.$.dropdownButton.hidden = false;\n          }\n        }\n      });\n    }\n  }\n\n  customElements.define(ActionsMenu.is, ActionsMenu);\n  Nuxeo.ActionsMenu = ActionsMenu;\n}\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport '@polymer/iron-collapse/iron-collapse.js';\n\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/iron-icons/hardware-icons.js';\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport '@nuxeo/nuxeo-elements/nuxeo-element.js';\nimport '@polymer/polymer/lib/elements/dom-if.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\n\n{\n  /**\n   * An element for a generic card\n   *\n   * Example:\n   *\n   *     <nuxeo-card icon=\"icons:home\" heading=\"title\" collapsible opened>content</nuxeo-card>\n   *\n   * ### Styling\n   *\n   * The following custom properties and mixins are available for styling:\n   *\n   * Custom property         | Description | Default\n   * -----------------------|------------------|----------\n   * `--nuxeo-card`         | Mixin applied to the card | `{}`\n   *\n   * @appliesMixin Polymer.IronResizableBehavior\n   * @memberof Nuxeo\n   * @demo demo/nuxeo-card/index.html\n   *\n   */\n  class Card extends mixinBehaviors([IronResizableBehavior], Nuxeo.Element) {\n    static get template() {\n      return html`\n        <style>\n          :host {\n            display: block;\n            -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */\n            -moz-box-sizing: border-box; /* Firefox, other Gecko */\n            box-sizing: border-box; /* Opera/IE 8+ */\n            background-color: white;\n            padding: 16px;\n            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.04);\n            @apply --nuxeo-card;\n          }\n\n          :host([collapsible]) {\n            padding-bottom: 1px;\n          }\n\n          :host([opened]) {\n            padding-bottom: 16px;\n          }\n\n          :host([collapsible]) h3:hover {\n            cursor: pointer;\n            @apply --nuxeo-link-hover;\n          }\n\n          [hidden] {\n            display: none !important;\n          }\n\n          .header {\n            @apply --layout-horizontal;\n            @apply --layout-center;\n            margin: 0 0 1em;\n          }\n\n          .header .icon {\n            display: inline-block;\n            margin-right: 8px;\n            --iron-icon-width: 16px;\n            --iron-icon-height: 16px;\n          }\n\n          .header .heading {\n            @apply --layout-flex;\n            font-size: 1rem;\n            font-weight: 700;\n            letter-spacing: 0.04em;\n            text-transform: uppercase;\n          }\n\n          .header .toggle {\n            --iron-icon-width: 20px;\n            --iron-icon-height: 20px;\n          }\n        </style>\n\n        <dom-if if=\"[[_hasHeading(icon, heading, collapsible)]]\">\n          <template>\n            <h3 class=\"header\" on-click=\"_toggle\">\n              <iron-icon class=\"icon\" icon=\"[[icon]]\" hidden$=\"[[!icon]]\"></iron-icon>\n              <span class=\"heading\">[[heading]]</span>\n              <iron-icon class=\"toggle\" icon=\"[[_toggleIcon(opened)]]\" toggle hidden$=\"[[!collapsible]]\"></iron-icon>\n            </h3>\n          </template>\n        </dom-if>\n\n        <dom-if if=\"[[collapsible]]\">\n          <template>\n            <iron-collapse opened=\"[[_opened(opened, collapsible)]]\">\n              <slot></slot>\n            </iron-collapse>\n          </template>\n        </dom-if>\n\n        <dom-if if=\"[[!collapsible]]\">\n          <template>\n            <slot></slot>\n          </template>\n        </dom-if>\n      `;\n    }\n\n    static get is() {\n      return 'nuxeo-card';\n    }\n\n    static get properties() {\n      return {\n        /**\n         * Heading icon\n         */\n        icon: {\n          type: String,\n          value: null,\n        },\n\n        /**\n         * Heading of the card\n         */\n        heading: {\n          type: String,\n          value: null,\n        },\n\n        /**\n         * If the card is collapsible\n         */\n        collapsible: {\n          type: Boolean,\n          value: false,\n          reflectToAttribute: true,\n        },\n\n        /**\n         * If is a collapsible card, if it is opened or not\n         */\n        opened: {\n          type: Boolean,\n          value: false,\n          reflectToAttribute: true,\n        },\n      };\n    }\n\n    _hasHeading(icon, heading, collapsible) {\n      return icon || heading || collapsible;\n    }\n\n    _opened(opened, collapsible) {\n      return !collapsible || opened;\n    }\n\n    _toggle() {\n      if (this.collapsible) {\n        this.opened = !this.opened;\n        if (this.$$('iron-collapse')) {\n          this.$$('iron-collapse').addEventListener('transitionend', (fireEvent) => {\n            this.dispatchEvent(new CustomEvent('iron-resize', { bubbles: true, composed: true }));\n            this.removeEventListener('transitionend', fireEvent);\n          });\n        }\n      }\n    }\n\n    _toggleIcon(opened) {\n      return `hardware:keyboard-arrow-${opened ? 'up' : 'down'}`;\n    }\n  }\n\n  customElements.define(Card.is, Card);\n  Nuxeo.Card = Card;\n}\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport '@polymer/iron-icon/iron-icon.js';\nimport '@nuxeo/nuxeo-elements/nuxeo-element.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport '../nuxeo-icons.js';\n\n{\n  /**\n   * An element that displays a toggleable checkmark.\n   *\n   * ### Styling\n   *\n   * The following custom properties are available for styling:\n   *\n   * Custom property | Description | Default\n   * ----------------|-------------|----------\n   * `--nuxeo-checkmark-width` | Width | 18px\n   * `--nuxeo-checkmark-height` | Height | 18px\n   * `--nuxeo-checkmark-background-color` | Background color | transparent\n   * `--nuxeo-checkmark-background-color-hover` | Background color on hover | transparent\n   * `--nuxeo-checkmark-background-color-checked` | Background color on checked | --nuxeo-primary-color, blue\n   * `--nuxeo-checkmark-border-color` | Border color | --nuxeo-border, gray\n   * `--nuxeo-checkmark-border-color-hover` | Border color on hover | --nuxeo-border, gray\n   * `--nuxeo-checkmark-border-color-checked` | Border color on checked | --nuxeo-primary-color, blue\n   * `--nuxeo-checkmark-icon-color` | Icon color | transparent\n   * `--nuxeo-checkmark-icon-color-hover` | Icon color on hover | black\n   * `--nuxeo-checkmark-icon-color-checked` | Icon color on checked | white\n   *\n   * @memberof Nuxeo\n   * @demo demo/nuxeo-checkmark/index.html\n   */\n  class CheckMark extends Nuxeo.Element {\n    static get template() {\n      return html`\n        <style>\n          :host {\n            display: inline-block;\n            width: var(--nuxeo-checkmark-width, 18px);\n            height: var(--nuxeo-checkmark-height, 18px);\n            cursor: pointer;\n            border-radius: 50%;\n            border: 2px solid var(--nuxeo-checkmark-border-color, var(--nuxeo-border, gray));\n            background-color: var(--nuxeo-checkmark-background-color, transparent);\n            color: var(--nuxeo-icon-color, transparent);\n            padding: 0;\n            margin: 0;\n          }\n\n          :host([hidden]) {\n            display: none !important;\n          }\n\n          :host(:focus) {\n            outline: none;\n          }\n\n          :host(:hover) {\n            border: 2px solid var(--nuxeo-checkmark-border-color, var(--nuxeo-border, gray));\n            background-color: var(--nuxeo-checkmark-background-color-hover, transparent);\n            color: var(--nuxeo-icon-color-hover, black);\n          }\n\n          :host([checked]) {\n            border: 2px solid var(--nuxeo-checkmark-border-color-checked, var(--nuxeo-primary-color, blue));\n            background-color: var(--nuxeo-checkmark-background-color-checked, var(--nuxeo-primary-color, blue));\n            color: var(--nuxeo-icon-color-checked, white);\n          }\n\n          iron-icon {\n            --iron-icon-width: 100%;\n            --iron-icon-height: 100%;\n            vertical-align: top;\n          }\n        </style>\n\n        <iron-icon icon=\"nuxeo:check\" on-click=\"_tap\"></iron-icon>\n      `;\n    }\n\n    static get is() {\n      return 'nuxeo-checkmark';\n    }\n\n    static get properties() {\n      return {\n        checked: {\n          type: Boolean,\n          reflectToAttribute: true,\n          value: false,\n        },\n        disabled: {\n          type: Boolean,\n          reflectToAttribute: true,\n          value: false,\n        },\n      };\n    }\n\n    _tap() {\n      if (!this.disabled) {\n        this.checked = !this.checked;\n      }\n    }\n  }\n\n  customElements.define(CheckMark.is, CheckMark);\n  Nuxeo.CheckMark = CheckMark;\n}\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport { IronFormElementBehavior } from '@polymer/iron-form-element-behavior/iron-form-element-behavior.js';\nimport { IronValidatableBehavior } from '@polymer/iron-validatable-behavior/iron-validatable-behavior.js';\nimport '@nuxeo/nuxeo-elements/nuxeo-element.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@vaadin/vaadin-date-picker/vaadin-date-picker.js';\nimport moment from 'moment';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\nimport { I18nBehavior } from '../nuxeo-i18n-behavior.js';\n\n{\n  /**\n   * An element for picking a W3C YYYY-MM-DDThh:mm:ss.sTZD based date (eg 1997-07-16T19:20:30.45+01:00).\n   *\n   * Example:\n   *\n   *     <nuxeo-date-picker value=\"{{value}}\" label=\"My label\"></nuxeo-date-picker>\n   *\n   * @appliesMixin Polymer.IronFormElementBehavior\n   * @appliesMixin Polymer.IronValidatableBehavior\n   * @memberof Nuxeo UI\n   * @demo demo/nuxeo-date-picker/index.html\n   */\n  class DatePicker extends mixinBehaviors(\n    [I18nBehavior, IronFormElementBehavior, IronValidatableBehavior],\n    Nuxeo.Element,\n  ) {\n    static get is() {\n      return 'nuxeo-date-picker';\n    }\n\n    static get properties() {\n      return {\n        label: String,\n\n        /*\n         * The default time of the picked-up date. Format is HH:mm:ss e.g. 12:45:23. Default is 00:00:00 (midnight).\n         */\n        defaultTime: String,\n\n        errorMessage: String,\n\n        /*\n         * The maximum date-time input value (e.g. `\"2000-01-01\"`).\n         */\n        max: String,\n\n        /*\n         * The minimum date-time input value (e.g. `\"2000-01-01\"`).\n         */\n        min: String,\n\n        required: {\n          type: Boolean,\n          value: false,\n          reflectToAttribute: true,\n        },\n\n        value: {\n          type: String,\n          notify: true,\n          observer: '_valueChanged',\n        },\n\n        disabled: {\n          type: Boolean,\n          value: false,\n        },\n\n        /*\n         * The first day of week to be displayed (e.g. `\"Sunday -> 0\"`, ... `\"Saturday -> 6\"`).\n         * By default, it will be set according the locale.\n         */\n        firstDayOfWeek: {\n          type: Number,\n          value() {\n            return (\n              (Nuxeo.UI && Nuxeo.UI.config && parseInt(Nuxeo.UI.config.firstDayOfWeek, 10)) ||\n              moment.localeData().firstDayOfWeek() ||\n              0\n            );\n          },\n          observer: '_firstDayOfWeekChanged',\n        },\n\n        _inputValue: {\n          type: String,\n          observer: '_inputValueChanged',\n        },\n\n        _preventInputUpdate: {\n          type: Boolean,\n          value: false,\n        },\n      };\n    }\n\n    static get template() {\n      return html`\n        <style>\n          :host {\n            position: relative;\n          }\n\n          :host([hidden]) {\n            display: none;\n          }\n\n          :host([required]) label::after {\n            display: inline-block;\n            content: '*';\n            margin-left: 4px;\n            color: var(--paper-input-container-invalid-color, red);\n          }\n\n          label {\n            @apply --nuxeo-label;\n          }\n\n          :host([invalid]) label {\n            color: var(--paper-input-container-invalid-color, red);\n          }\n\n          vaadin-date-picker {\n            padding-bottom: 8px;\n          }\n\n          /* picker input */\n          [part='input-field'] {\n            background-color: var(--nuxeo-page-background) !important;\n            border: 1px solid var(--nuxeo-border) !important;\n            color: var(--nuxeo-text-default) !important;\n          }\n\n          /* buttons inside input (clear and open picker) */\n          [part='text-field'] [part$='button'] {\n            color: var(--nuxeo-text-default) !important;\n          }\n\n          [part='text-field'] [part$='button']:hover {\n            color: var(--nuxeo-primary-color) !important;\n          }\n\n          /* buttons inside the overlay (cancel and today), plus highlights for current year and today's date */\n          [part='cancel-button'],\n          [part='today-button'],\n          [part='years'] [part='year-number'][current],\n          [part='date'][today] {\n            color: var(--nuxeo-primary-color) !important;\n          }\n\n          /* keyboard focus for buttons inside the overlay */\n          [part='cancel-button'][focus-ring],\n          [part='today-button'][focus-ring] {\n            box-shadow: 0 0 0 2px var(--nuxeo-primary-color) !important;\n          }\n\n          /* date selected */\n          [part='date'][selected]:before {\n            background-color: var(--nuxeo-primary-color) !important;\n            box-shadow: 0 0 0 2px var(--nuxeo-primary-color) !important;\n          }\n\n          [part='date'][selected][today] {\n            color: var(--nuxeo-button-primary-text) !important;\n          }\n\n          /* hover any date that is not disabled or currently selected */\n          [part='date']:not([disabled]):not([selected]):hover::before {\n            background-color: var(--nuxeo-primary-color) !important;\n            opacity: 0.1 !important;\n          }\n        </style>\n\n        <label>[[label]]</label>\n\n        <vaadin-date-picker\n          id=\"date\"\n          name=\"[[name]]\"\n          required$=\"[[required]]\"\n          invalid=\"[[invalid]]\"\n          value=\"{{_inputValue}}\"\n          disabled$=\"[[disabled]]\"\n          min=\"[[min]]\"\n          max=\"[[max]]\"\n          error-message=\"[[errorMessage]]\"\n        >\n        </vaadin-date-picker>\n      `;\n    }\n\n    ready() {\n      super.ready();\n      moment.locale(window.nuxeo.I18n.language ? window.nuxeo.I18n.language.split('-')[0] : 'en');\n      // tell vaadin-date-picker how to display dates since default behavior is US locales (MM-DD-YYYY)\n      // this way we can take advantage of moment locale and use the date format that is most suitable for the user\n      this.$.date.set('i18n.formatDate', (date) => moment(date).format(moment.localeData().longDateFormat('L')));\n      this.$.date.set('i18n.parseDate', (text) => {\n        const date = moment(text, moment.localeData().longDateFormat('L'));\n        return {\n          day: date.format('D'),\n          month: date.format('M') - 1,\n          year: date.format('YYYY'),\n        };\n      });\n      this.$.date.set('i18n.monthNames', moment.months());\n      this.$.date.set('i18n.weekdays', moment.weekdays());\n      this.$.date.set('i18n.weekdaysShort', moment.weekdaysShort());\n      this.$.date.set('i18n.cancel', this.i18n('command.cancel'));\n      this.$.date.set('i18n.clear', this.i18n('command.clear'));\n      this.$.date.set('i18n.today', this.i18n('today'));\n    }\n\n    _getValidity() {\n      if (!this.required) {\n        return true;\n      }\n      return !!this.value;\n    }\n\n    _valueChanged() {\n      if (!this.value) {\n        this._inputValue = null;\n        return;\n      }\n      const date = moment(this.value);\n      if (this.value && date.isValid()) {\n        this._preventInputUpdate = true;\n        this._inputValue = date.format('YYYY-MM-DD');\n      } else {\n        this._inputValue = '';\n      }\n    }\n\n    _inputValueChanged() {\n      if (this._inputValue !== null && !this._preventInputUpdate) {\n        const date = moment(this._inputValue);\n        if (date.isValid()) {\n          if (this.defaultTime) {\n            const time = moment(this.defaultTime, 'HH:mm:ss');\n            if (time.isValid()) {\n              date.add(time.hour(), 'hour');\n              date.add(time.minute(), 'minute');\n              date.add(time.second(), 'second');\n            } else {\n              throw new Error(`Invalid default time ${this.defaultTime}`);\n            }\n          }\n          this.set('value', date.toJSON());\n        } else {\n          this.set('value', null);\n        }\n      }\n      this._preventInputUpdate = false;\n    }\n\n    _firstDayOfWeekChanged() {\n      if (this.firstDayOfWeek != null) {\n        this.$.date.set('i18n.firstDayOfWeek', this.firstDayOfWeek);\n      }\n    }\n  }\n\n  customElements.define(DatePicker.is, DatePicker);\n  Nuxeo.DatePicker = DatePicker;\n}\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport { NeonAnimationRunnerBehavior } from '@polymer/neon-animation/neon-animation-runner-behavior.js';\nimport '@nuxeo/nuxeo-elements/nuxeo-element.js';\nimport { PaperDialogBehavior } from '@polymer/paper-dialog-behavior/paper-dialog-behavior.js';\nimport '@polymer/paper-dialog-behavior/paper-dialog-shared-styles.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { dom } from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\nimport { Templatizer } from '@polymer/polymer/lib/legacy/templatizer-behavior.js';\nimport { IronOverlayManager } from '@polymer/iron-overlay-behavior/iron-overlay-manager.js';\n\n// ELEMENTS-884 - fix backdrops\n// revert https://github.com/PolymerElements/iron-overlay-behavior/commit/ac1cb\nIronOverlayManager._overlayWithBackdrop = function() {\n  for (let i = 0; i < this._overlays.length; i++) {\n    if (this._overlays[i].withBackdrop) {\n      return this._overlays[i];\n    }\n  }\n};\n\n{\n  /**\n   * A dialog element.\n   *\n   * If a `<template>` is passed as the dialog's content, that `<template>` will be stamped when dialog is opened.\n   *\n   * @appliesMixin Polymer.NeonAnimationRunnerBehavior\n   * @appliesMixin Polymer.Templatizer\n   * @memberof Nuxeo\n   * @demo demo/nuxeo-dialog/index.html\n   */\n  class Dialog extends mixinBehaviors([PaperDialogBehavior, NeonAnimationRunnerBehavior, Templatizer], Nuxeo.Element) {\n    static get template() {\n      return html`\n        <style include=\"paper-dialog-shared-styles\">\n          :host {\n            @apply --nuxeo-dialog;\n          }\n\n          :host > ::slotted(h2),\n          :host > ::slotted(*) {\n            margin-top: 16px;\n          }\n\n          :host > ::slotted(.buttons) {\n            @apply --layout-horizontal;\n            @apply --layout-justified;\n            margin-top: 16px;\n            background-color: var(--nuxeo-dialog-buttons-bar, white);\n          }\n        </style>\n\n        <slot></slot>\n      `;\n    }\n\n    static get is() {\n      return 'nuxeo-dialog';\n    }\n\n    static get properties() {\n      return {\n        /**\n         * Make sure dialog is positioned after the backdrop element.\n         * Should only be used when the dialog appears behind the backdrop because of stacking context issues.\n         */\n        reparent: {\n          type: Boolean,\n          value: false,\n        },\n      };\n    }\n\n    ready() {\n      super.ready();\n      this.addEventListener('iron-overlay-opened', this._opened);\n    }\n\n    disconnectedCallback() {\n      // workaround to prevent IronOverlayBehavior.detached() from being called when unattached\n      if (this._observer) {\n        this.detached();\n      }\n      this._instance = null;\n    }\n\n    _opened(e) {\n      const isIOS = /iPhone|iPad|iPod/.test(window.navigator.userAgent);\n      if ((this.reparent && e.target.withBackdrop) || isIOS) {\n        e.target.parentNode.insertBefore(e.target.backdropElement, e.target);\n      }\n\n      if (!this._instance) {\n        const template = dom(this).querySelector('nuxeo-dialog > template');\n        if (template) {\n          // prevent \"A <template> can only be templatized once\" error\n          if (!this._templatizerTemplate) {\n            this.templatize(template);\n          }\n          this._instance = this.stamp();\n          this.appendChild(this._instance.root);\n        }\n      }\n    }\n\n    _forwardHostPropV2(prop, value) {\n      if (this._instance) {\n        this._instance.forwardHostProp(prop, value);\n      }\n    }\n  }\n\n  customElements.define(Dialog.is, Dialog);\n  Nuxeo.Dialog = Dialog;\n}\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport '@polymer/iron-validatable-behavior/iron-validatable-behavior.js';\nimport '@nuxeo/nuxeo-elements/nuxeo-element.js';\nimport '@polymer/paper-input/paper-textarea.js';\n\n{\n  /**\n   * An element for generic textarea input in forms\n   *\n   * @memberof Nuxeo\n   * @demo demo/nuxeo-textarea/index.html\n   */\n  class Textarea extends Nuxeo.Element {\n    static get template() {\n      return html`\n        <style>\n          :host {\n            display: block;\n            position: relative;\n            padding-bottom: 8px;\n          }\n\n          :host([hidden]) {\n            display: none;\n          }\n\n          :host([required]) label::after {\n            display: inline-block;\n            content: '*';\n            margin-left: 4px;\n            color: var(--paper-input-container-invalid-color, red);\n          }\n\n          paper-textarea {\n            --paper-input-container: {\n              padding: 0;\n            }\n          }\n\n          label {\n            @apply --nuxeo-label;\n          }\n        </style>\n\n        <label>[[label]]</label>\n\n        <paper-textarea\n          id=\"paperTextarea\"\n          name=\"[[name]]\"\n          value=\"{{value}}\"\n          rows$=\"[[rows]]\"\n          required$=\"[[required]]\"\n          disabled$=\"[[disabled]]\"\n          readonly$=\"[[readonly]]\"\n          error-message=\"[[errorMessage]]\"\n          validator$=\"[[validator]]\"\n          placeholder$=\"[[placeholder]]\"\n          invalid$=\"[[invalid]]\"\n          no-label-float\n        >\n        </paper-textarea>\n      `;\n    }\n\n    static get is() {\n      return 'nuxeo-textarea';\n    }\n\n    static get properties() {\n      return {\n        /**\n         * Label.\n         */\n        label: String,\n\n        /**\n         * Name.\n         */\n        name: String,\n\n        /**\n         * Value.\n         */\n        value: {\n          type: String,\n          notify: true,\n        },\n\n        /**\n         * Initial number of rows.\n         */\n        rows: Number,\n\n        /**\n         * Placeholder.\n         */\n        placeholder: String,\n\n        /**\n         * Error message to show when `invalid` is true.\n         */\n        errorMessage: String,\n\n        /**\n         * Read only.\n         */\n        readonly: {\n          type: Boolean,\n          value: false,\n          reflectToAttribute: true,\n        },\n\n        /**\n         * Disabled.\n         */\n        disabled: {\n          type: Boolean,\n          value: false,\n          reflectToAttribute: true,\n        },\n\n        /**\n         * Required.\n         */\n        required: {\n          type: Boolean,\n          value: false,\n          reflectToAttribute: true,\n        },\n\n        /**\n         * Invalid.\n         */\n        invalid: {\n          type: Boolean,\n          value: false,\n          reflectToAttribute: true,\n        },\n      };\n    }\n\n    /* Override method from Polymer.IronValidatableBehavior. */\n    _getValidity() {\n      return this.$.paperTextarea.validate();\n    }\n  }\n\n  customElements.define(Textarea.is, Textarea);\n  Nuxeo.Textarea = Textarea;\n}\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\nimport '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/iron-icons/iron-icons.js';\nimport '@nuxeo/nuxeo-elements/nuxeo-element.js';\nimport '@nuxeo/nuxeo-elements/nuxeo-operation.js';\nimport '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-dialog-scrollable/paper-dialog-scrollable.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/polymer/lib/elements/dom-if.js';\nimport { FiltersBehavior } from '../nuxeo-filters-behavior.js';\nimport { I18nBehavior } from '../nuxeo-i18n-behavior.js';\nimport '../nuxeo-icons.js';\nimport '../widgets/nuxeo-dialog.js';\nimport { escapeHTML } from '../widgets/nuxeo-selectivity.js';\nimport '../widgets/nuxeo-textarea.js';\nimport '../widgets/nuxeo-tooltip.js';\nimport './nuxeo-action-button-styles.js';\n\n{\n  /**\n   * A button element for adding a document to a collection\n   *\n   * Example:\n   *\n   *     <nuxeo-add-to-collection-button document=\"[[document]]\"></nuxeo-add-to-collection-button>\n   *\n   * @appliesMixin Nuxeo.I18nBehavior\n   * @appliesMixin Nuxeo.FiltersBehavior\n   * @memberof Nuxeo\n   * @demo demo/nuxeo-add-to-collection-button/index.html\n   */\n  class AddToCollectionButton extends mixinBehaviors([I18nBehavior, FiltersBehavior], Nuxeo.Element) {\n    static get template() {\n      return html`\n        <style include=\"nuxeo-action-button-styles\">\n          /* Fix known stacking issue in iOS (NXP-24600)\n         https://github.com/PolymerElements/paper-dialog-scrollable/issues/72 */\n          paper-dialog-scrollable {\n            --paper-dialog-scrollable: {\n              -webkit-overflow-scrolling: auto;\n            }\n          }\n        </style>\n\n        <nuxeo-operation\n          id=\"addToCollectionOp\"\n          op=\"Document.AddToCollection\"\n          input=\"[[document.uid]]\"\n        ></nuxeo-operation>\n        <nuxeo-operation id=\"createCollectionOp\" op=\"Collection.Create\"></nuxeo-operation>\n\n        <dom-if if=\"[[_isAvailable(document)]]\">\n          <template>\n            <div class=\"action\" on-click=\"_toggleDialog\">\n              <paper-icon-button icon=\"[[icon]]\" noink></paper-icon-button>\n              <span class=\"label\" hidden$=\"[[!showLabel]]\">[[_label]]</span>\n            </div>\n            <nuxeo-tooltip>[[_label]]</nuxeo-tooltip>\n          </template>\n        </dom-if>\n\n        <nuxeo-dialog id=\"add-to-collection-dialog\" with-backdrop on-iron-overlay-closed=\"_resetPopup\" no-auto-focus>\n          <h2>[[i18n('addToCollectionButton.dialog.heading')]]</h2>\n          <paper-dialog-scrollable>\n            <nuxeo-selectivity\n              id=\"nxSelect\"\n              label=\"[[i18n('addToCollectionButton.dialog.collections')]]\"\n              required\n              operation=\"Collection.Suggestion\"\n              min-chars=\"0\"\n              placeholder=\"[[i18n('addToCollectionButton.dialog.select')]]\"\n              value=\"{{collection}}\"\n              tagging=\"true\"\n              query-results-filter=\"[[resultsFilter]]\"\n              result-formatter=\"[[resultFormatter]]\"\n              selection-formatter=\"[[selectionFormatter]]\"\n              new-entry-formatter=\"[[newEntryFormatter]]\"\n            >\n            </nuxeo-selectivity>\n            <nuxeo-textarea\n              label=\"[[i18n('addToCollectionButton.dialog.description')]]\"\n              value=\"{{description::input}}\"\n              hidden$=\"[[!_isNew(collection)]]\"\n            >\n            </nuxeo-textarea>\n          </paper-dialog-scrollable>\n          <div class=\"buttons\">\n            <paper-button dialog-dismiss>[[i18n('addToCollectionButton.dialog.cancel')]]</paper-button>\n            <paper-button\n              dialog-confirm\n              class=\"primary\"\n              name=\"add\"\n              on-click=\"_add\"\n              disabled$=\"[[!_isValid(collection)]]\"\n            >\n              [[i18n('addToCollectionButton.dialog.add')]]\n            </paper-button>\n          </div>\n        </nuxeo-dialog>\n      `;\n    }\n\n    static get is() {\n      return 'nuxeo-add-to-collection-button';\n    }\n\n    static get properties() {\n      return {\n        /**\n         * Input document.\n         */\n        document: Object,\n\n        /**\n         * Icon to use (iconset_name:icon_name).\n         */\n        icon: {\n          type: String,\n          value: 'nuxeo:collections',\n        },\n\n        collection: {\n          type: String,\n          value: '',\n        },\n\n        resultsFilter: {\n          type: Function,\n          value() {\n            return this._resultsFilter.bind(this);\n          },\n        },\n\n        resultFormatter: {\n          type: Function,\n          value() {\n            return this._resultFormatter.bind(this);\n          },\n        },\n\n        selectionFormatter: {\n          type: Function,\n          value() {\n            return this._selectionFormatter.bind(this);\n          },\n        },\n\n        newEntryFormatter: {\n          type: Function,\n          value() {\n            return this._newEntryFormatter.bind(this);\n          },\n        },\n\n        /**\n         * `true` if the action should display the label, `false` otherwise.\n         */\n        showLabel: {\n          type: Boolean,\n          value: false,\n        },\n\n        _label: {\n          type: String,\n          computed: '_computeLabel(i18n)',\n        },\n      };\n    }\n\n    _isAvailable(doc) {\n      return this.isCollectionMember(doc);\n    }\n\n    _computeLabel() {\n      return this.i18n('addToCollectionButton.tooltip');\n    }\n\n    _toggleDialog() {\n      this.$['add-to-collection-dialog'].toggle();\n    }\n\n    _add() {\n      if (this._isNew()) {\n        const op = this.$$('#createCollectionOp');\n        // XXX\n        const name = this.$.nxSelect.selectedItem.displayLabel;\n        op.params = {\n          name,\n          description: this.description,\n        };\n        return op.execute().then((response) => {\n          this.collection = response.uid;\n          this._addToCollection();\n        });\n      }\n      this._addToCollection();\n    }\n\n    _addToCollection() {\n      const op = this.$$('#addToCollectionOp');\n      op.params = {\n        collection: this.collection,\n      };\n      return op.execute().then(() => {\n        this.dispatchEvent(\n          new CustomEvent('added-to-collection', {\n            composed: true,\n            bubbles: true,\n            detail: { docId: this.document.uid, collectionId: this.collection },\n          }),\n        );\n        this._resetPopup();\n      });\n    }\n\n    _resultsFilter(entry) {\n      return entry.id.indexOf('-999999') === -1;\n    }\n\n    _resultFormatter(item) {\n      const label = item.displayLabel || item.title;\n\n      // if we are adding a new entry with the _newEntryFormatter we don't want to escape the HTML\n      return item.id === -1 ? `<iron-icon icon=\"nuxeo:add\" item-icon></iron-icon>${label}` : escapeHTML(label);\n    }\n\n    _selectionFormatter(item) {\n      const label = item.displayLabel || item.title;\n\n      // if we are adding a new entry with the _newEntryFormatter we don't want to escape the HTML\n      return item.id === -1 ? label : escapeHTML(label);\n    }\n\n    _newEntryFormatter(term) {\n      return { id: -1, displayLabel: term };\n    }\n\n    _isValid() {\n      return this.collection !== '';\n    }\n\n    _isNew() {\n      return this.collection === -1;\n    }\n\n    _resetPopup() {\n      this.set('collection', null);\n      this.description = '';\n    }\n  }\n\n  customElements.define(AddToCollectionButton.is, AddToCollectionButton);\n  Nuxeo.AddToCollectionButton = AddToCollectionButton;\n}\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport { IronFormElementBehavior } from '@polymer/iron-form-element-behavior/iron-form-element-behavior.js';\nimport { IronValidatableBehavior } from '@polymer/iron-validatable-behavior/iron-validatable-behavior.js';\nimport '@nuxeo/nuxeo-elements/nuxeo-element.js';\nimport '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\n\n{\n  /**\n   * An element for generic input in forms\n   *\n   * @appliesMixin Polymer.IronFormElementBehavior\n   * @appliesMixin Polymer.IronValidatableBehavior\n   * @memberof Nuxeo\n   * @demo demo/nuxeo-input/index.html\n   */\n  class Input extends mixinBehaviors([IronFormElementBehavior, IronValidatableBehavior], Nuxeo.Element) {\n    static get template() {\n      return html`\n        <style>\n          :host {\n            display: block;\n            position: relative;\n            padding-bottom: 8px;\n          }\n\n          :host([hidden]) {\n            display: none;\n          }\n\n          :host([required]) label::after {\n            display: inline-block;\n            content: '*';\n            margin-left: 4px;\n            color: var(--paper-input-container-invalid-color, red);\n          }\n\n          paper-input {\n            --paper-input-container: {\n              padding: 0;\n            }\n          }\n\n          label {\n            @apply --nuxeo-label;\n          }\n        </style>\n\n        <label>[[label]]</label>\n\n        <paper-input\n          id=\"paperInput\"\n          type=\"[[type]]\"\n          name=\"[[name]]\"\n          value=\"{{value}}\"\n          placeholder$=\"[[placeholder]]\"\n          error-message=\"[[errorMessage]]\"\n          autofocus$=\"[[autofocus]]\"\n          readonly$=\"[[readonly]]\"\n          disabled$=\"[[disabled]]\"\n          required$=\"[[required]]\"\n          minlength$=\"[[minlength]]\"\n          maxlength$=\"[[maxlength]]\"\n          min$=\"[[min]]\"\n          max$=\"[[max]]\"\n          step$=\"[[step]]\"\n          pattern$=\"[[pattern]]\"\n          auto-validate$=\"[[autoValidate]]\"\n          validator$=\"[[validator]]\"\n          invalid$=\"[[invalid]]\"\n          no-label-float\n        >\n        </paper-input>\n      `;\n    }\n\n    static get is() {\n      return 'nuxeo-input';\n    }\n\n    static get properties() {\n      return {\n        /**\n         * Label.\n         */\n        label: String,\n\n        /**\n         * Type.\n         */\n        type: String,\n\n        /**\n         * Name.\n         */\n        name: String,\n\n        /**\n         * Value.\n         */\n        value: {\n          type: String,\n          notify: true,\n        },\n\n        /**\n         * Placeholder.\n         */\n        placeholder: String,\n\n        /**\n         * Error message to show when `invalid` is true.\n         */\n        errorMessage: String,\n\n        /**\n         * Autofocus.\n         */\n        autofocus: {\n          type: Boolean,\n          value: false,\n          reflectToAttribute: true,\n        },\n\n        /**\n         * Read only.\n         */\n        readonly: {\n          type: Boolean,\n          value: false,\n          reflectToAttribute: true,\n        },\n\n        /**\n         * Disabled.\n         */\n        disabled: {\n          type: Boolean,\n          value: false,\n          reflectToAttribute: true,\n        },\n\n        /**\n         * Required.\n         */\n        required: {\n          type: Boolean,\n          value: false,\n          reflectToAttribute: true,\n        },\n\n        /**\n         * The minimum (numeric or date-time) input value.\n         */\n        min: String,\n\n        /**\n         * The maximum (numeric or date-time) input value.\n         */\n        max: String,\n\n        /**\n         * The increment value.\n         */\n        step: Number,\n\n        /**\n         * The minimum length of the input value.\n         */\n        minlength: Number,\n\n        /**\n         * The maximum length of the input value.\n         */\n        maxlength: Number,\n\n        /**\n         * A pattern to validate.\n         */\n        pattern: String,\n\n        /**\n         * The name of the custom validator\n         */\n        validator: String,\n\n        /**\n         * Set to true to auto-validate the input value when it changes.\n         */\n        autoValidate: {\n          type: Boolean,\n          value: false,\n        },\n      };\n    }\n\n    focus() {\n      this.$.paperInput.focus();\n    }\n\n    /* Override method from Polymer.IronValidatableBehavior. */\n    _getValidity() {\n      return this.$.paperInput.validate();\n    }\n  }\n\n  customElements.define(Input.is, Input);\n  Nuxeo.Input = Input;\n}\n","/**\n@license\n(C) Copyright Nuxeo Corp. (http://nuxeo.com/)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\nimport '@nuxeo/nuxeo-elements/nuxeo-element.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport { I18nBehavior } from '../nuxeo-i18n-behavior.js';\nimport '../widgets/nuxeo-input.js';\nimport '../widgets/nuxeo-tooltip.js';\nimport './nuxeo-action-button-styles.js';\n\n{\n  /**\n   * A button element for displaying a link with an icon button.\n   *\n   * Example:\n   *\n   *     <nnuxeo-link-button href=\"http://www.nuxeo.org\" icon></nuxeo-link-button>\n   *\n   * @appliesMixin Nuxeo.I18nBehavior\n   * @memberof Nuxeo\n   */\n  class LinkButton extends mixinBehaviors([I18nBehavior], Nuxeo.Element) {\n    static get template() {\n      return html`\n        <style include=\"nuxeo-action-button-styles\">\n          .action {\n            text-decoration: none;\n            color: var(--nuxeo-text-default);\n          }\n        </style>\n\n        <template is=\"dom-if\" if=\"[[_isAvailable(href, icon, iconSrc)]]\">\n          <a class=\"action\" href=\"[[href]]\" tabindex=\"-1\" target=\"[[target]]\">\n            <paper-icon-button src=\"[[iconSrc]]\" icon=\"[[icon]]\" noink></paper-icon-button>\n            <span class=\"label\" hidden$=\"[[!showLabel]]\">[[i18n(label)]]</span>\n          </a>\n          <nuxeo-tooltip>[[i18n(label)]]</nuxeo-tooltip>\n        </template>\n      `;\n    }\n\n    static get is() {\n      return 'nuxeo-link-button';\n    }\n\n    static get properties() {\n      return {\n        /**\n         * Link.\n         */\n        href: String,\n\n        /**\n         * Target.\n         */\n        target: String,\n\n        /**\n         *  The URL of an image for the icon. If the iconSrc property is specified,\n         * the icon property should not be.\n         */\n        iconSrc: String,\n\n        /**\n         * Icon to use (iconset_name:icon_name).\n         * If the icon property is specified the iconSrc property should not be.\n         */\n        icon: String,\n\n        /**\n         * `true` if the action should display the label, `false` otherwise.\n         */\n        showLabel: {\n          type: Boolean,\n          value: false,\n        },\n\n        /**\n         * Label (i18n key) to use as tooltip and label when `showLabel`is true.\n         */\n        label: String,\n      };\n    }\n\n    _isAvailable() {\n      return this.href && (this.icon || this.iconSrc);\n    }\n  }\n\n  customElements.define(LinkButton.is, LinkButton);\n  Nuxeo.LinkButton = LinkButton;\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;AAqBA;;;;;;;;AA8BA;;;;;;;;;;;;;;;;;AC7BA;;;;;;;;;;;;;;;;ACDA;;;;;;;;;;;;;;;;;ACUA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAinBA;;;;;;;;;;;;;;;;;ACtnBA;;;;;;;;;;;;;;;;;;;;;AAuBA;;;;;;;;;;;;;;;;;AC7BA;;;;;;AA8BA;;;;;;;;;;;;;;;;;AC5BA;;;;;;;AA8BA;;;;;;;;;;;;;;;;AC9BA;;;;;;;;;;;;;;;;AAoDA;;;;;;;;;;;;;;;;ACrDA;;;;;;;AAgCA;;;;;;;;;;;;;;;;;;;;;;;;ACrBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA83NA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC33NA;;;;;;;;;;;;;;;;;ACLA;;;;;;;;;;;;;;;;;;;AAyCA;;;;;;;;;;;;;;;;;AC1CA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;;;;;;;;;;;;;;;;;AC7EA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;;;;;;;;;;;;;;;;;AChHA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;;;;;;;;;;;;;;;;;ACpEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqLA;;;;;;;;;;;;;;;;;ACnLA;;;;;;;;;;;;;;;;;;;;AA4CA;;;;;;;;;;;;;;;;;ACnDA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;;;;;;;;;;;;;;;;;AC7CA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;;;;;;;;;;;;;;;;;AChGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;;;;;;;;;;;;;;;;;ACnEA;;;;;;;;;;;;;;;AA+BA","sourceRoot":""}